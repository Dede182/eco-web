(()=>{"use strict";var e,t={9835:(e,t,o)=>{o.r(t)},9789:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_VERSION=void 0,t.CLIENT_VERSION="2022.03.26_00.26",$(document.body).on("click",".version",(e=>{e.shiftKey&&alert(t.CLIENT_VERSION)}))},9280:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Analytics=t.Auth=void 0;const n=o(5503),a=o(2974),i=o(6374),s=o(5296);let r;try{r=(0,n.initializeApp)(i.firebaseConfig),t.Auth=(0,a.getAuth)(r),t.Analytics=(0,s.getAnalytics)(r)}catch(e){console.error(e),$("body").text("Failed to initialize Firebase. Are you sure you have the correct config in the firebase-config.ts file?")}},5632:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.clear=void 0;const s=i(o(2541)),r=i(o(5021));t.clear=function(){$(".pageAccount .globalTimeTyping .val").text("-"),$(".pageAccount .globalTestsStarted .val").text("-"),$(".pageAccount .globalTestsCompleted .val").text("-")},t.update=function(){var e,t;const o=s.getSnapshot();if(void 0!==o.globalStats){const n=null!==(t=null===(e=null==o?void 0:o.globalStats)||void 0===e?void 0:e.time)&&void 0!==t?t:0;let a="";a=0===n?"-":r.secondsToString(Math.round(n),!0,!0),$(".pageAccount .globalTimeTyping .val").text(a)}void 0!==o.globalStats&&$(".pageAccount .globalTestsStarted .val").text(o.globalStats.started),void 0!==o.globalStats&&$(".pageAccount .globalTestsCompleted .val").text(o.globalStats.completed)}},9065:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateData=t.show=t.updatePosition=void 0;const r=i(o(8185)),u=s(o(2426)),d=r.result.options.scales;t.updatePosition=function(e,t){$(".pageAccount .miniResultChartWrapper").css({top:t,left:e})},t.show=function(){$(".pageAccount .miniResultChartWrapper").stop(!0,!0).fadeIn(125),$(".pageAccount .miniResultChartBg").stop(!0,!0).fadeIn(125)},t.updateData=function(e){const t=[];for(let o=1;o<=e.wpm.length;o++)t.push(o.toString());r.miniResult.data.labels=t,r.miniResult.data.datasets[0].data=e.wpm,r.miniResult.data.datasets[1].data=e.raw,r.miniResult.data.datasets[2].data=e.err;const o=Math.max(Math.max(...e.wpm),Math.max(...e.raw)),n=Math.min(Math.min(...e.wpm),Math.min(...e.raw));d.wpm.max=Math.round(o),d.raw.max=Math.round(o),u.default.startGraphsAtZero?(d.wpm.min=0,d.raw.min=0):(d.wpm.min=Math.round(n),d.raw.min=Math.round(n)),r.miniResult.updateColors()},$(document).on("click",".pageAccount .miniResultChartBg",(()=>{$(".pageAccount .miniResultChartWrapper").stop(!0,!0).fadeOut(125),$(".pageAccount .miniResultChartBg").stop(!0,!0).fadeOut(125)}))},60:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=i(o(2541)),u=s(o(2426)),d=i(o(5021)),l=s(o(9546));t.update=function(){$(".pageAccount .timePbTable tbody").html("\n  <tr>\n    <td>15</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  <tr>\n    <td>30</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  <tr>\n    <td>60</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  <tr>\n    <td>120</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  "),$(".pageAccount .wordsPbTable tbody").html("\n  <tr>\n    <td>10</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  <tr>\n    <td>25</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  <tr>\n    <td>50</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  <tr>\n    <td>100</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n    <td>-</td>\n  </tr>\n  "),u.default.alwaysShowCPM?$(".pageAccount .timePbTable thead tr td:nth-child(2), .pageAccount .wordsPbTable thead tr td:nth-child(2)").html('cpm<br><span class="sub">accuracy</span>'):$(".pageAccount .timePbTable thead tr td:nth-child(2), .pageAccount .wordsPbTable thead tr td:nth-child(2)").html('wpm<br><span class="sub">accuracy</span>');const e=r.getSnapshot().personalBests;if(void 0===e)return;let t,o,n='-<br><span class="sub">-</span>';const a=u.default.alwaysShowCPM?5:1;o="";try{t=e.time[15].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>15</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>15</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}try{t=e.time[30].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n    <td>30</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>30</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}try{t=e.time[60].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>60</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>60</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}try{t=e.time[120].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>120</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>120</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}$(".pageAccount .timePbTable tbody").html(o),o="";try{t=e.words[10].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>10</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>10</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}try{t=e.words[25].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>25</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>25</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}try{t=e.words[50].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>50</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>50</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}try{t=e.words[100].sort(((e,t)=>t.wpm-e.wpm))[0],n='-<br><span class="sub">-</span>';const i=new Date(t.timestamp);t.timestamp&&(n=(0,l.default)(i,"dd MMM yyyy")+"<br><div class='sub'>"+(0,l.default)(i,"HH:mm")+"</div>"),o+=`<tr>\n      <td>100</td>\n      <td>${d.roundTo2(t.wpm*a)}<br><span class="sub">${void 0===t.acc?"-":t.acc+"%"}</span></td>\n      <td>${d.roundTo2(t.raw*a)}<br><span class="sub">${void 0===t.consistency?"-":t.consistency+"%"}</span></td>\n      <td>${n}</td>\n    </tr>`}catch(e){o+='<tr>\n      <td>100</td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n      <td>-<br><span class="sub">-</span></td>\n    </tr>'}$(".pageAccount .wordsPbTable tbody").html(o)}},9861:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateTags=t.toggle=t.updateActive=t.reset=t.loadTags=t.getFilter=t.getGroup=t.getFilters=t.load=t.filters=t.defaultResultFilters=void 0;const r=i(o(5021)),u=i(o(2541)),d=s(o(2426)),l=i(o(6030));function c(){window.localStorage.setItem("resultFilters",JSON.stringify(t.filters))}function p(){return t.filters}function f(e){return t.filters[e]}function m(e,o){return t.filters[e][o]}function h(){t.filters=t.defaultResultFilters,c()}function g(){var e,t,o,n;const a={};function i(e){var t,o,n,i,s;let r="";return r+="<div class='group'>","difficulty"==e?r+='<span aria-label="Difficulty" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i>':"mode"==e?r+='<span aria-label="Mode" data-balloon-pos="up"><i class="fas fa-fw fa-bars"></i>':"punctuation"==e?r+='<span aria-label="Punctuation" data-balloon-pos="up"><span class="punc" style="font-weight: 900;\n      width: 1.25rem;\n      text-align: center;\n      display: inline-block;\n      letter-spacing: -.1rem;">!?</span>':"numbers"==e?r+='<span aria-label="Numbers" data-balloon-pos="up"><span class="numbers" style="font-weight: 900;\n        width: 1.25rem;\n        text-align: center;\n        margin-right: .1rem;\n        display: inline-block;\n        letter-spacing: -.1rem;">15</span>':"words"==e?r+='<span aria-label="Words" data-balloon-pos="up"><i class="fas fa-fw fa-font"></i>':"time"==e?r+='<span aria-label="Time" data-balloon-pos="up"><i class="fas fa-fw fa-clock"></i>':"date"==e?r+='<span aria-label="Date" data-balloon-pos="up"><i class="fas fa-fw fa-calendar"></i>':"tags"==e?r+='<span aria-label="Tags" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i>':"language"==e?r+='<span aria-label="Language" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i>':"funbox"==e&&(r+='<span aria-label="Funbox" data-balloon-pos="up"><i class="fas fa-fw fa-gamepad"></i>'),(null===(t=a[e])||void 0===t?void 0:t.all)?r+="all":r+="tags"===e?null===(n=null===(o=a.tags)||void 0===o?void 0:o.array)||void 0===n?void 0:n.map((e=>{var t,o;if("none"==e)return e;const n=u.getSnapshot(),a=null===(t=n.tags)||void 0===t?void 0:t.filter((t=>t._id==e))[0];return void 0!==a?null===(o=n.tags)||void 0===o?void 0:o.filter((t=>t._id==e))[0].name:a})).join(", "):null===(s=null===(i=a[e])||void 0===i?void 0:i.array)||void 0===s?void 0:s.join(", ").replace(/_/g," "),r+="</span></div>",r}Object.keys(p()).forEach((e=>{a[e]={all:!0,array:[]},Object.keys(f(e)).forEach((t=>{var o;const n=a[e];if(void 0===n)return;let i;m(e,t)?null===(o=n.array)||void 0===o||o.push(t):void 0!==n.all&&(n.all=!1),i="date"===e?$(`.pageAccount .group.topFilters .filterGroup[group="${e}"] .button[filter="${t}"]`):$(`.pageAccount .group.filterButtons .filterGroup[group="${e}"] .button[filter="${t}"]`),m(e,t)?i.addClass("active"):i.removeClass("active")}))}));let s="";s+=i("date"),s+='<div class="spacer"></div>',s+=i("mode"),s+='<div class="spacer"></div>',(null===(t=null===(e=a.mode)||void 0===e?void 0:e.array)||void 0===t?void 0:t.includes("time"))&&(s+=i("time"),s+='<div class="spacer"></div>'),(null===(n=null===(o=a.mode)||void 0===o?void 0:o.array)||void 0===n?void 0:n.includes("words"))&&(s+=i("words"),s+='<div class="spacer"></div>'),s+=i("difficulty"),s+='<div class="spacer"></div>',s+=i("punctuation"),s+='<div class="spacer"></div>',s+=i("numbers"),s+='<div class="spacer"></div>',s+=i("language"),s+='<div class="spacer"></div>',s+=i("funbox"),s+='<div class="spacer"></div>',s+=i("tags"),setTimeout((()=>{$(".pageAccount .group.chart .above").html(s)}),0)}function y(e,o){try{"date"===e&&Object.keys(f("date")).forEach((e=>{t.filters.date[e]=!1})),t.filters[e][o]=!t.filters[e][o],c()}catch(e){l.add("Something went wrong toggling filter. Reverting to defaults.",0),console.log("toggling filter error"),console.error(e),h(),g()}}t.defaultResultFilters={difficulty:{normal:!0,expert:!0,master:!0},mode:{words:!0,time:!0,quote:!0,zen:!0,custom:!0},words:{10:!0,25:!0,50:!0,100:!0,custom:!0},time:{15:!0,30:!0,60:!0,120:!0,custom:!0},quoteLength:{short:!0,medium:!0,long:!0,thicc:!0},punctuation:{on:!0,off:!0},numbers:{on:!0,off:!0},date:{last_day:!1,last_week:!1,last_month:!1,last_3months:!1,all:!0},tags:{none:!0},language:{},funbox:{none:!0}},t.filters=t.defaultResultFilters,t.load=function(){console.log("loading filters");try{const e=window.localStorage.getItem("resultFilters");null!=e&&""!==e&&Object.keys(JSON.parse(e)).length>=Object.keys(t.defaultResultFilters).length?t.filters=JSON.parse(e):t.filters=t.defaultResultFilters;const o={none:!1};Object.keys(t.defaultResultFilters.tags).forEach((e=>{void 0!==t.filters.tags[e]?o[e]=t.filters.tags[e]:o[e]=!0})),t.filters.tags=o,c()}catch(e){console.log("error in loading result filters"),t.filters=t.defaultResultFilters,c()}},t.getFilters=p,t.getGroup=f,t.getFilter=m,t.loadTags=function(e){console.log("loading tags"),e.forEach((e=>{t.defaultResultFilters.tags[e._id]=!0}))},t.reset=h,t.updateActive=g,t.toggle=y,t.updateTags=function(){var e,t;$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").empty();const o=u.getSnapshot();(null===(e=o.tags)||void 0===e?void 0:e.length)?($(".pageAccount .content .filterButtons .buttonsAndTitle.tags").removeClass("hidden"),$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").append('<div class="button" filter="none">no tag</div>'),null===(t=o.tags)||void 0===t||t.forEach((e=>{$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").append(`<div class="button" filter="${e._id}">${e.name}</div>`)}))):$(".pageAccount .content .filterButtons .buttonsAndTitle.tags").addClass("hidden")},$(".pageAccount .filterButtons .buttonsAndTitle .buttons, .pageAccount .group.topFilters .buttonsAndTitle.testDate .buttons").on("click",".button",(e=>{const o=$(e.target).parents(".buttons").attr("group"),n=$(e.target).attr("filter");$(e.target).hasClass("allFilters")?(Object.keys(p()).forEach((e=>{Object.keys(f(e)).forEach((o=>{"date"===e?t.filters[e][o]=!1:void 0!==t.filters[e]&&(t.filters[e][o]=!0)}))})),t.filters.date.all=!0):$(e.target).hasClass("noFilters")?Object.keys(p()).forEach((e=>{"date"!==e&&Object.keys(f(e)).forEach((o=>{t.filters[e][o]=!1}))})):$(e.target).hasClass("button")&&(e.shiftKey?(Object.keys(f(o)).forEach((e=>{t.filters[o][e]=!1})),t.filters[o][n]=!0):y(o,n)),g(),c()})),$(".pageAccount .topFilters .button.allFilters").on("click",(()=>{Object.keys(p()).forEach((e=>{Object.keys(f(e)).forEach((o=>{t.filters[e][o]="date"!==e}))})),t.filters.date.all=!0,g(),c()})),$(".pageAccount .topFilters .button.currentConfigFilter").on("click",(()=>{var e;if(Object.keys(p()).forEach((e=>{Object.keys(f(e)).forEach((o=>{t.filters[e][o]=!1}))})),t.filters.difficulty[d.default.difficulty]=!0,t.filters.mode[d.default.mode]=!0,"time"===d.default.mode)if([15,30,60,120].includes(d.default.time)){const e=d.default.time;t.filters.time[e]=!0}else t.filters.time.custom=!0;else if("words"===d.default.mode)if([10,25,50,100,200].includes(d.default.words)){const e=d.default.words;t.filters.words[e]=!0}else t.filters.words.custom=!0;else"quote"===d.default.mode&&["short","medium","long","thicc"].forEach(((e,o)=>{d.default.quoteLength.includes(o)?t.filters.quoteLength[e]=!0:t.filters.quoteLength[e]=!1}));d.default.punctuation?t.filters.punctuation.on=!0:t.filters.punctuation.off=!0,d.default.numbers?t.filters.numbers.on=!0:t.filters.numbers.off=!0,"quote"===d.default.mode&&/english.*/.test(d.default.language)?t.filters.language.english=!0:t.filters.language[d.default.language]=!0,"none"===d.default.funbox?t.filters.funbox.none=!0:t.filters.funbox[d.default.funbox]=!0,t.filters.tags.none=!0,null===(e=u.getSnapshot().tags)||void 0===e||e.forEach((e=>{!0===e.active&&(t.filters.tags.none=!1,t.filters.tags[e._id]=!0)})),t.filters.date.all=!0,g(),c()})),$(".pageAccount .topFilters .button.toggleAdvancedFilters").on("click",(()=>{$(".pageAccount .filterButtons").slideToggle(250),$(".pageAccount .topFilters .button.toggleAdvancedFilters").toggleClass("active")})),r.getLanguageList().then((e=>{e.forEach((e=>{$(".pageAccount .content .filterButtons .buttonsAndTitle.languages .buttons").append(`<div class="button" filter="${e}">${e.replace("_"," ")}</div>`)}))})),$(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons").append('<div class="button" filter="none">none</div>'),r.getFunboxList().then((e=>{e.forEach((e=>{$(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons").append(`<div class="button" filter="${e.name}">${e.name.replace(/_/g," ")}</div>`)}))}))},9281:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0,t.show=function(){$(".signOut").stop(!0,!0).removeClass("hidden").css({opacity:0,transition:"0s"}).animate({opacity:1},125,(()=>{$(".signOut").css({transition:"0.25s"})}))},t.hide=function(){$(".signOut").stop(!0,!0).css({opacity:1,transition:"0s"}).animate({opacity:0},125,(()=>{$(".signOut").css({transition:"0.25s"}),$(".signOut").addClass("hidden")}))}},1235:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/ape-keys";t.default=function(e){return{get:function(){return o(this,void 0,void 0,(function*(){return yield e.get(n)}))},generate:function(t,a){return o(this,void 0,void 0,(function*(){const o={name:t,enabled:a};return yield e.post(n,{payload:o})}))},update:function(t,n){return o(this,void 0,void 0,(function*(){const o=Object.assign({},n);return yield e.patch(`/ape-keys/${t}`,{payload:o})}))},delete:function(t){return o(this,void 0,void 0,(function*(){return yield e.delete(`/ape-keys/${t}`)}))}}}},1666:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/configs";t.default=function(e){return{get:function(){return o(this,void 0,void 0,(function*(){return yield e.get(n)}))},save:function(t){return o(this,void 0,void 0,(function*(){return yield e.patch(n,{payload:{config:t}})}))}}}},3976:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(o(1666)),i=n(o(9014)),s=n(o(9742)),r=n(o(2414)),u=n(o(499)),d=n(o(442)),l=n(o(7855)),c=n(o(1235));t.default={getConfigsEndpoints:a.default,getLeaderboardsEndpoints:i.default,getPresetsEndpoints:s.default,getPsasEndpoints:r.default,getQuotesEndpoints:u.default,getResultsEndpoints:d.default,getUsersEndpoints:l.default,getApeKeysEndpoints:c.default}},9014:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/leaderboards";t.default=function(e){return{get:function(t,a,i,s=0,r=50){return o(this,void 0,void 0,(function*(){const o={language:t,mode:a,mode2:i,skip:s,limit:Math.max(Math.min(r,50),0)};return yield e.get(n,{searchQuery:o})}))},getRank:function(t,a,i){return o(this,void 0,void 0,(function*(){const o={language:t,mode:a,mode2:i};return yield e.get(`${n}/rank`,{searchQuery:o})}))}}}},9742:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/presets";t.default=function(e){return{get:function(){return o(this,void 0,void 0,(function*(){return yield e.get(n)}))},add:function(t,a){return o(this,void 0,void 0,(function*(){const o={name:t,config:a};return yield e.post(n,{payload:o})}))},edit:function(t,a,i){return o(this,void 0,void 0,(function*(){const o={_id:t,name:a,config:i};return yield e.patch(n,{payload:o})}))},delete:function(t){return o(this,void 0,void 0,(function*(){return yield e.delete(`/presets/${t}`)}))}}}},2414:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(9789);t.default=function(e){return{get:function(){return n(this,void 0,void 0,(function*(){return yield e.get("/psas",{headers:{"Client-Version":a.CLIENT_VERSION}})}))}}}},499:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/quotes";t.default=function(e){return{get:function(){return o(this,void 0,void 0,(function*(){return yield e.get(n)}))},submit:function(t,a,i,s){return o(this,void 0,void 0,(function*(){const o={text:t,source:a,language:i,captcha:s};return yield e.post(n,{payload:o})}))},approveSubmission:function(t,n,a){return o(this,void 0,void 0,(function*(){const o={quoteId:t,editText:n,editSource:a};return yield e.post("/quotes/approve",{payload:o})}))},rejectSubmission:function(t){return o(this,void 0,void 0,(function*(){return yield e.post("/quotes/reject",{payload:{quoteId:t}})}))},getRating:function(t){return o(this,void 0,void 0,(function*(){const o={quoteId:t.id,language:t.language};return yield e.get("/quotes/rating",{searchQuery:o})}))},addRating:function(t,n){return o(this,void 0,void 0,(function*(){const o={quoteId:t.id,rating:n,language:t.language};return yield e.post("/quotes/rating",{payload:o})}))},report:function(t,n,a,i,s){return o(this,void 0,void 0,(function*(){const o={quoteId:t,quoteLanguage:n,reason:a,comment:i,captcha:s};return yield e.post("/quotes/report",{payload:o})}))}}}},442:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(9789),i="/results";t.default=function(e){return{get:function(){return n(this,void 0,void 0,(function*(){return yield e.get(i)}))},save:function(t){return n(this,void 0,void 0,(function*(){return yield e.post(i,{payload:{result:t},headers:{"Client-Version":a.CLIENT_VERSION}})}))},updateTags:function(t,o){return n(this,void 0,void 0,(function*(){return yield e.patch("/results/tags",{payload:{resultId:t,tagIds:o}})}))},deleteAll:function(){return n(this,void 0,void 0,(function*(){return yield e.delete(i)}))}}}},7855:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/users";t.default=function(e){return{getData:function(){return o(this,void 0,void 0,(function*(){return yield e.get(n)}))},create:function(t,n,a){return o(this,void 0,void 0,(function*(){const o={email:n,name:t,uid:a};return yield e.post("/users/signup",{payload:o})}))},getNameAvailability:function(t){return o(this,void 0,void 0,(function*(){return yield e.get(`/users/checkName/${t}`)}))},delete:function(){return o(this,void 0,void 0,(function*(){return yield e.delete(n)}))},updateName:function(t){return o(this,void 0,void 0,(function*(){return yield e.patch("/users/name",{payload:{name:t}})}))},updateLeaderboardMemory:function(t,n,a,i){return o(this,void 0,void 0,(function*(){const o={mode:t,mode2:n,language:a,rank:i};return yield e.patch("/users/leaderboardMemory",{payload:o})}))},updateEmail:function(t,n){return o(this,void 0,void 0,(function*(){const o={newEmail:t,previousEmail:n};return yield e.patch("/users/email",{payload:o})}))},deletePersonalBests:function(){return o(this,void 0,void 0,(function*(){return yield e.delete("/users/personalBests")}))},getTags:function(){return o(this,void 0,void 0,(function*(){return yield e.get("/users/tags")}))},createTag:function(t){return o(this,void 0,void 0,(function*(){return yield e.post("/users/tags",{payload:{tagName:t}})}))},editTag:function(t,n){return o(this,void 0,void 0,(function*(){const o={tagId:t,newName:n};return yield e.patch("/users/tags",{payload:o})}))},deleteTag:function(t){return o(this,void 0,void 0,(function*(){return yield e.delete(`/users/tags/${t}`)}))},deleteTagPersonalBest:function(t){return o(this,void 0,void 0,(function*(){return yield e.delete(`/users/tags/${t}/personalBest`)}))},linkDiscord:function(t){return o(this,void 0,void 0,(function*(){return yield e.post("/users/discord/link",{payload:{data:t}})}))},unlinkDiscord:function(){return o(this,void 0,void 0,(function*(){return yield e.post("/users/discord/unlink")}))},getCustomThemes:function(){return o(this,void 0,void 0,(function*(){return yield e.get("/users/customThemes")}))},addCustomTheme:function(t){return o(this,void 0,void 0,(function*(){const o={name:t.name,colors:t.colors};return yield e.post("/users/customThemes",{payload:o})}))},editCustomTheme:function(t,n){return o(this,void 0,void 0,(function*(){const o={themeId:t,theme:{name:n.name,colors:n.colors}};return yield e.patch("/users/customThemes",{payload:o})}))},deleteCustomTheme:function(t){return o(this,void 0,void 0,(function*(){const o={themeId:t};return yield e.delete("/users/customThemes",{payload:o})}))}}}},9063:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(9669)),s=a(o(3976)),r=o(9280),u=o(2974),d=""+("localhost"===window.location.hostname?"http://localhost:5005":"https://api.monkeytype.com");function l(e,t){return(o,a={})=>n(this,void 0,void 0,(function*(){var s,d,l;let c="";try{const i=yield function(e){return n(this,void 0,void 0,(function*(){const t=r.Auth.currentUser,o=t&&(yield(0,u.getIdToken)(t));return{params:e.searchQuery,data:e.payload,headers:Object.assign(Object.assign(Object.assign({},e.headers),{Accept:"application/json","Content-Type":"application/json"}),o&&{Authorization:`Bearer ${o}`})}}))}(a);let s;s="get"===t||"delete"===t?yield e(o,i):yield e(o,i.data,i);const{message:d,data:l}=s.data;return{status:s.status,message:d,data:l}}catch(e){console.error(e);const t=e;if(c=t.message,i.default.isAxiosError(t))return Object.assign({status:null!==(d=null===(s=t.response)||void 0===s?void 0:s.status)&&void 0!==d?d:500,message:t.message},null===(l=t.response)||void 0===l?void 0:l.data)}return{status:500,message:c}}))}const c=i.default.create({baseURL:d,timeout:1e4}),p={get:l(c.get,"get"),post:l(c.post,"post"),put:l(c.put,"put"),patch:l(c.patch,"patch"),delete:l(c.delete,"delete")},f={users:s.default.getUsersEndpoints(p),configs:s.default.getConfigsEndpoints(p),results:s.default.getResultsEndpoints(p),psas:s.default.getPsasEndpoints(p),quotes:s.default.getQuotesEndpoints(p),leaderboards:s.default.getLeaderboardsEndpoints(p),presets:s.default.getPresetsEndpoints(p),apeKeys:s.default.getApeKeysEndpoints(p)};t.default=f},7765:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isConfigValueValidAsync=t.isConfigValueValid=t.isConfigKeyValid=void 0;const r=i(o(5021)),u=i(o(6030));function d(e,t,o){void 0===o?u.add(`Invalid value for ${e} (${t}). Please try to change this setting again.`,-1):u.add(`Invalid value for ${e} (${t}). ${o}`,-1),console.error(`Invalid value key ${e} value ${t} type ${typeof t}`)}function l(e){return e instanceof Array}t.isConfigKeyValid=function(e){return null!=e&&""!==e&&!(e.length>30)&&/^[0-9a-zA-Z_.\-#+]+$/.test(e)},t.isConfigValueValid=function(e,t,o){let n=!1;for(const e of o)switch(e){case"boolean":"boolean"==typeof t&&(n=!0);break;case"null":null===t&&(n=!0);break;case"number":"number"==typeof t&&(n=!0);break;case"numberArray":l(t)&&t.every((e=>"number"==typeof e))&&(n=!0);break;case"string":"string"==typeof t&&(n=!0);break;case"stringArray":l(t)&&t.every((e=>"string"==typeof e))&&(n=!0);break;case"undefined":void 0!==t&&void 0!==t||(n=!0);break;default:l(e)&&e.includes(t)&&(n=!0)}return n||d(e,t,undefined),n},t.isConfigValueValidAsync=function(e,t,o){return s(this,void 0,void 0,(function*(){let n,a=!1;for(const e of o)switch(e){case"layoutfluid":{if("string"!=typeof t)break;const e=t.split(/[# ]+/);if(e.length<2||e.length>5)break;const o=yield Promise.all(e.map((e=>r.getLayout(e))));if(!o.every((e=>void 0!==e))){n=`The following inputted layouts do not exist: ${e.map(((e,t)=>[e,o[t]])).filter((([e,t])=>void 0===t)).map((([e])=>e)).join(", ")}`;break}a=!0;break}}return a||d(e,t,n),a}))}},2426:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setShowLiveAcc=t.setShowLiveWpm=t.setShowTimerProgress=t.setPaceCaretStyle=t.setCaretStyle=t.setPageWidth=t.setOppositeShiftMode=t.setStrictSpace=t.setColorfulMode=t.setFlipTestColors=t.setRepeatQuotes=t.setEnableAds=t.setQuickEnd=t.setShowAllLines=t.setCapsLockWarning=t.setSingleListCommandLine=t.setAlwaysShowWordsHistory=t.setMinBurstCustomSpeed=t.setMinBurst=t.setMinAccCustom=t.setMinAcc=t.setMinWpmCustomSpeed=t.setMinWpm=t.setRepeatedPace=t.setPaceCaretCustomSpeed=t.setPaceCaret=t.setSwapEscAndTab=t.setShowOutOfFocusWarning=t.setAlwaysShowCPM=t.setAlwaysShowDecimalPlaces=t.setStopOnError=t.setChartStyle=t.setChartAccuracy=t.setBlindMode=t.setFunbox=t.setFavThemes=t.setDifficulty=t.setSoundVolume=t.setPlaySoundOnClick=t.setPlaySoundOnError=t.setMode=t.setPunctuation=t.setNumbers=t.saveFullConfigToLocalStorage=t.setChangedBeforeDb=t.setDbConfigLoaded=t.setLocalStorageConfig=t.changedBeforeDb=t.dbConfigLoaded=t.localStorageConfig=void 0,t.loadPromise=t.setConfig=t.getConfigChanges=t.loadFromLocalStorage=t.reset=t.apply=t.setBurstHeatmap=t.setMonkeyPowerLevel=t.setCustomBackgroundFilter=t.setCustomBackgroundSize=t.setCustomLayoutfluid=t.setCustomBackground=t.setFontSize=t.setLayout=t.setKeymapLayout=t.setKeymapStyle=t.setKeymapLegendStyle=t.setKeymapMode=t.setMonkey=t.setLanguage=t.setCustomThemeColors=t.setLazyMode=t.setBritishEnglish=t.setRandomTheme=t.setThemeDark=t.setThemeLight=t.setTheme=t.setCustomTheme=t.setAutoSwitchTheme=t.setIndicateTypos=t.setConfidenceMode=t.setFreedomMode=t.setFontFamily=t.previewFontFamily=t.setQuickTabMode=t.setSmoothLineScroll=t.setStartGraphsAtZero=t.setSmoothCaret=t.setWordCount=t.setQuoteLength=t.setTimeConfig=t.setKeyTips=t.setTimerOpacity=t.setTimerColor=t.setTimerStyle=t.setHideExtraLetters=t.setHighlightMode=t.setShowAverage=t.setShowLiveBurst=void 0;const u=i(o(2541)),d=i(o(1613)),l=i(o(6030)),c=o(7765),p=i(o(9073)),f=r(o(1457)),m=o(9280),h=i(o(394));function g(e){t.changedBeforeDb=e}let y;t.dbConfigLoaded=!1,t.changedBeforeDb=!1,t.setLocalStorageConfig=function(e){t.localStorageConfig=e},t.setDbConfigLoaded=function(e){t.dbConfigLoaded=e},t.setChangedBeforeDb=g;let v=Object.assign({},f.default);function b(e,o=!1,n=!1){return s(this,void 0,void 0,(function*(){if(t.dbConfigLoaded||n||o||g(!0),o)return;const a=v;delete a.resultFilters;const i=JSON.stringify(a);window.localStorage.setItem("config",i),n||(yield function(e){return s(this,void 0,void 0,(function*(){w[e]=v[e],null===C&&(C=setTimeout((()=>s(this,void 0,void 0,(function*(){delete w.resultFilters,Object.keys(w).length>0&&u.saveConfig(w),w={},clearTimeout(C),C=null}))),"localhost"===window.location.hostname?0:1e3))}))}(e)),p.dispatch("saveToLocalStorage",i)}))}let w={},C=null;function S(e=!1){return s(this,void 0,void 0,(function*(){t.dbConfigLoaded||e||g(!0);const o=v;delete o.resultFilters;const n=JSON.stringify(o);window.localStorage.setItem("config",n),e||(yield u.saveConfig(o)),p.dispatch("saveToLocalStorage",n)}))}function _(e,t){return!!(0,c.isConfigValueValid)("numbers",e,["boolean"])&&("quote"===v.mode&&(e=!1),v.numbers=e,v.numbers?$("#top .config .numbersMode .text-button").addClass("active"):$("#top .config .numbersMode .text-button").removeClass("active"),b("numbers",t),p.dispatch("numbers",v.numbers),!0)}function x(e,t){return!!(0,c.isConfigValueValid)("punctuation",e,["boolean"])&&("quote"===v.mode&&(e=!1),v.punctuation=e,v.punctuation?$("#top .config .punctuationMode .text-button").addClass("active"):$("#top .config .punctuationMode .text-button").removeClass("active"),b("punctuation",t),p.dispatch("punctuation",v.punctuation),!0)}function T(e,t){if(!(0,c.isConfigValueValid)("mode",e,[["time","words","quote","zen","custom"]]))return!1;if("words"!==e&&"memory"===v.funbox)return l.add("Memory funbox can only be used with words mode.",0),!1;const o=v.mode;return v.mode=e,"custom"==v.mode||"quote"==v.mode?(x(!1,!0),_(!1,!0)):"zen"==v.mode&&"off"!=v.paceCaret&&l.add("Pace caret will not work with zen mode.",0),b("mode",t),p.dispatch("mode",v.mode,t,o),!0}function k(e,t){return!!(0,c.isConfigValueValid)("play sound on error",e,["boolean"])&&(v.playSoundOnError=e,b("playSoundOnError",t),p.dispatch("playSoundOnError",v.playSoundOnError),!0)}function M(e,t){return!!(0,c.isConfigValueValid)("play sound on click",e,[["off","1","2","3","4","5","6","7"]])&&(v.playSoundOnClick=e,b("playSoundOnClick",t),p.dispatch("playSoundOnClick",v.playSoundOnClick),!0)}function P(e,t){return!!(0,c.isConfigValueValid)("sound volume",e,[["0.1","0.5","1.0"]])&&(v.soundVolume=e,b("soundVolume",t),p.dispatch("soundVolume",v.soundVolume),!0)}function O(e,t){return!!(0,c.isConfigValueValid)("difficulty",e,[["normal","expert","master"]])&&(v.difficulty=e,b("difficulty",t),p.dispatch("difficulty",v.difficulty,t),!0)}function L(e,t){return!!(0,c.isConfigValueValid)("favorite themes",e,["stringArray"])&&(v.favThemes=e,b("favThemes",t),p.dispatch("favThemes",v.favThemes),!0)}function A(e,t){if(!(0,c.isConfigValueValid)("funbox",e,["string"]))return!1;const o=e||"none";return v.funbox=o,b("funbox",t),p.dispatch("funbox",v.funbox),!0}function W(e,t){return!!(0,c.isConfigValueValid)("blind mode",e,["boolean"])&&(v.blindMode=e,b("blindMode",t),p.dispatch("blindMode",v.blindMode,t),!0)}function E(e,t){return!!(0,c.isConfigValueValid)("chart accuracy",e,["boolean"])&&(v.chartAccuracy=e,b("chartAccuracy",t),p.dispatch("chartAccuracy",v.chartAccuracy),!0)}function j(e,t){return!!(0,c.isConfigValueValid)("chart style",e,[["line","scatter"]])&&(v.chartStyle=e,b("chartStyle",t),p.dispatch("chartStyle",v.chartStyle),!0)}function B(e,t){return!!(0,c.isConfigValueValid)("stop on error",e,[["off","word","letter"]])&&(v.stopOnError=e,"off"!==v.stopOnError&&(v.confidenceMode="off"),b("stopOnError",t),p.dispatch("stopOnError",v.stopOnError,t),!0)}function D(e,t){return!!(0,c.isConfigValueValid)("always show decimal places",e,["boolean"])&&(v.alwaysShowDecimalPlaces=e,b("alwaysShowDecimalPlaces",t),p.dispatch("alwaysShowDecimalPlaces",v.alwaysShowDecimalPlaces),!0)}function R(e,t){return!!(0,c.isConfigValueValid)("always show CPM",e,["boolean"])&&(v.alwaysShowCPM=e,b("alwaysShowCPM",t),p.dispatch("alwaysShowCPM",v.alwaysShowCPM),!0)}function q(e,t){return!!(0,c.isConfigValueValid)("show out of focus warning",e,["boolean"])&&(v.showOutOfFocusWarning=e,v.showOutOfFocusWarning||d.hide(),b("showOutOfFocusWarning",t),p.dispatch("showOutOfFocusWarning",v.showOutOfFocusWarning),!0)}function I(e,t){return!!(0,c.isConfigValueValid)("swap esc and tab",e,["boolean"])&&(v.swapEscAndTab=e,b("swapEscAndTab",t),p.dispatch("swapEscAndTab",v.swapEscAndTab),!0)}function V(e,t){return!!(0,c.isConfigValueValid)("pace caret",e,[["custom","off","average","pb"]])&&("complete"===document.readyState&&"pb"==e&&null===m.Auth.currentUser?(l.add("PB pace caret is unavailable without an account",0),!1):(v.paceCaret=e,b("paceCaret",t),p.dispatch("paceCaret",v.paceCaret,t),!0))}function F(e,t){return!!(0,c.isConfigValueValid)("pace caret custom speed",e,["number"])&&(v.paceCaretCustomSpeed=e,b("paceCaretCustomSpeed",t),p.dispatch("paceCaretCustomSpeed",v.paceCaretCustomSpeed),!0)}function K(e,t){return!!(0,c.isConfigValueValid)("repeated pace",e,["boolean"])&&(v.repeatedPace=e,b("repeatedPace",t),p.dispatch("repeatedPace",v.repeatedPace),!0)}function H(e,t){return!!(0,c.isConfigValueValid)("min WPM",e,[["off","custom"]])&&(v.minWpm=e,b("minWpm",t),p.dispatch("minWpm",v.minWpm,t),!0)}function z(e,t){return!!(0,c.isConfigValueValid)("min WPM custom speed",e,["number"])&&(v.minWpmCustomSpeed=e,b("minWpmCustomSpeed",t),p.dispatch("minWpmCustomSpeed",v.minWpmCustomSpeed),!0)}function N(e,t){return!!(0,c.isConfigValueValid)("min acc",e,[["off","custom"]])&&(v.minAcc=e,b("minAcc",t),p.dispatch("minAcc",v.minAcc,t),!0)}function Q(e,t){return!!(0,c.isConfigValueValid)("min acc custom",e,["number"])&&(v.minAccCustom=e,b("minAccCustom",t),p.dispatch("minAccCustom",v.minAccCustom),!0)}function U(e,t){return!!(0,c.isConfigValueValid)("min burst",e,[["off","fixed","flex"]])&&(v.minBurst=e,b("minBurst",t),p.dispatch("minBurst",v.minBurst,t),!0)}function G(e,t){return!!(0,c.isConfigValueValid)("min burst custom speed",e,["number"])&&(v.minBurstCustomSpeed=e,b("minBurstCustomSpeed",t),p.dispatch("minBurstCustomSpeed",v.minBurstCustomSpeed),!0)}function J(e,t){return!!(0,c.isConfigValueValid)("always show words history",e,["boolean"])&&(v.alwaysShowWordsHistory=e,b("alwaysShowWordsHistory",t),p.dispatch("alwaysShowWordsHistory",v.alwaysShowWordsHistory),!0)}function Z(e,t){return!!(0,c.isConfigValueValid)("single list command line",e,[["manual","on"]])&&(v.singleListCommandLine=e,b("singleListCommandLine",t),p.dispatch("singleListCommandLine",v.singleListCommandLine),!0)}function Y(e,t){return!!(0,c.isConfigValueValid)("caps lock warning",e,["boolean"])&&(v.capsLockWarning=e,b("capsLockWarning",t),p.dispatch("capsLockWarning",v.capsLockWarning),!0)}function X(e,t){return!!(0,c.isConfigValueValid)("show all lines",e,["boolean"])&&(v.showAllLines=e,b("showAllLines",t),p.dispatch("showAllLines",v.showAllLines,t),!0)}function ee(e,t){return!!(0,c.isConfigValueValid)("quick end",e,["boolean"])&&(v.quickEnd=e,b("quickEnd",t),p.dispatch("quickEnd",v.quickEnd),!0)}function te(e,t){return!!(0,c.isConfigValueValid)("enable ads",e,[["on","off","max"]])&&(v.enableAds=e,t||(b("enableAds",t),setTimeout((()=>{location.reload()}),3e3),l.add("Ad settings changed. Refreshing...",0)),!0)}function oe(e,t){return!!(0,c.isConfigValueValid)("repeat quotes",e,[["off","typing"]])&&(v.repeatQuotes=e,b("repeatQuotes",t),p.dispatch("repeatQuotes",v.repeatQuotes),!0)}function ne(e,t){return!!(0,c.isConfigValueValid)("flip test colors",e,["boolean"])&&(v.flipTestColors=e,b("flipTestColors",t),p.dispatch("flipTestColors",v.flipTestColors),!0)}function ae(e,t){return!!(0,c.isConfigValueValid)("colorful mode",e,["boolean"])&&(v.colorfulMode=e,b("colorfulMode",t),p.dispatch("colorfulMode",v.colorfulMode),!0)}function ie(e,t){return!!(0,c.isConfigValueValid)("strict space",e,["boolean"])&&(v.strictSpace=e,b("strictSpace",t),p.dispatch("strictSpace",v.strictSpace),!0)}function se(e,t){return!!(0,c.isConfigValueValid)("opposite shift mode",e,[["off","on","keymap"]])&&(v.oppositeShiftMode=e,b("oppositeShiftMode",t),p.dispatch("oppositeShiftMode",v.oppositeShiftMode),!0)}function re(e,t){return!!(0,c.isConfigValueValid)("page width",e,[["max","100","125","150","200"]])&&(v.pageWidth=e,$("#centerContent").removeClass("wide125"),$("#centerContent").removeClass("wide150"),$("#centerContent").removeClass("wide200"),$("#centerContent").removeClass("widemax"),"100"!==e&&$("#centerContent").addClass("wide"+e),b("pageWidth",t),p.dispatch("pageWidth",v.pageWidth),!0)}function ue(e,t){return!!(0,c.isConfigValueValid)("caret style",e,[["off","default","block","outline","underline","carrot","banana"]])&&(v.caretStyle=e,$("#caret").removeClass("off"),$("#caret").removeClass("default"),$("#caret").removeClass("underline"),$("#caret").removeClass("outline"),$("#caret").removeClass("block"),$("#caret").removeClass("carrot"),$("#caret").removeClass("banana"),"off"==e?$("#caret").addClass("off"):"default"==e?$("#caret").addClass("default"):"block"==e?$("#caret").addClass("block"):"outline"==e?$("#caret").addClass("outline"):"underline"==e?$("#caret").addClass("underline"):"carrot"==e?$("#caret").addClass("carrot"):"banana"==e&&$("#caret").addClass("banana"),b("caretStyle",t),p.dispatch("caretStyle",v.caretStyle),!0)}function de(e,t){return!!(0,c.isConfigValueValid)("pace caret style",e,[["off","default","block","outline","underline","carrot","banana"]])&&(v.paceCaretStyle=e,$("#paceCaret").removeClass("off"),$("#paceCaret").removeClass("default"),$("#paceCaret").removeClass("underline"),$("#paceCaret").removeClass("outline"),$("#paceCaret").removeClass("block"),$("#paceCaret").removeClass("carrot"),$("#paceCaret").removeClass("banana"),"default"==e?$("#paceCaret").addClass("default"):"block"==e?$("#paceCaret").addClass("block"):"outline"==e?$("#paceCaret").addClass("outline"):"underline"==e?$("#paceCaret").addClass("underline"):"carrot"==e?$("#paceCaret").addClass("carrot"):"banana"==e&&$("#paceCaret").addClass("banana"),b("paceCaretStyle",t),p.dispatch("paceCaretStyle",v.paceCaretStyle),!0)}function le(e,t){return!!(0,c.isConfigValueValid)("show timer progress",e,["boolean"])&&(v.showTimerProgress=e,b("showTimerProgress",t),p.dispatch("showTimerProgress",v.showTimerProgress),!0)}function ce(e,t){return!!(0,c.isConfigValueValid)("show live WPM",e,["boolean"])&&(v.showLiveWpm=e,b("showLiveWpm",t),p.dispatch("showLiveWpm",v.showLiveWpm),!0)}function pe(e,t){return!!(0,c.isConfigValueValid)("show live acc",e,["boolean"])&&(v.showLiveAcc=e,b("showLiveAcc",t),p.dispatch("showLiveAcc",v.showLiveAcc),!0)}function fe(e,t){return!!(0,c.isConfigValueValid)("show live burst",e,["boolean"])&&(v.showLiveBurst=e,b("showLiveBurst",t),p.dispatch("showLiveBurst",v.showLiveBurst),!0)}function me(e,t){return!!(0,c.isConfigValueValid)("show average",e,[["off","wpm","acc","both"]])&&(v.showAverage=e,b("showAverage",t),p.dispatch("showAverage",v.showAverage,t),!0)}function he(e,t){return!!(0,c.isConfigValueValid)("highlight mode",e,[["off","letter","word"]])&&("word"!==e||"nospace"!==v.funbox&&"read_ahead"!==v.funbox&&"read_ahead_easy"!==v.funbox&&"read_ahead_hard"!==v.funbox&&"tts"!==v.funbox&&"arrows"!==v.funbox?(v.highlightMode=e,b("highlightMode",t),p.dispatch("highlightMode",v.highlightMode),!0):(l.add("Can't use word highlight with this funbox",0),!1))}function ge(e,t){return!!(0,c.isConfigValueValid)("hide extra letters",e,["boolean"])&&(v.hideExtraLetters=e,b("hideExtraLetters",t),p.dispatch("hideExtraLetters",v.hideExtraLetters),!0)}function ye(e,t){return!!(0,c.isConfigValueValid)("timer style",e,[["bar","text","mini"]])&&(v.timerStyle=e,b("timerStyle",t),p.dispatch("timerStyle",v.timerStyle),!0)}function ve(e,t){return!!(0,c.isConfigValueValid)("timer color",e,[["black","sub","text","main"]])&&(v.timerColor=e,$("#timer").removeClass("timerSub"),$("#timer").removeClass("timerText"),$("#timer").removeClass("timerMain"),$("#timerNumber").removeClass("timerSub"),$("#timerNumber").removeClass("timerText"),$("#timerNumber").removeClass("timerMain"),$("#largeLiveWpmAndAcc").removeClass("timerSub"),$("#largeLiveWpmAndAcc").removeClass("timerText"),$("#largeLiveWpmAndAcc").removeClass("timerMain"),$("#miniTimerAndLiveWpm").removeClass("timerSub"),$("#miniTimerAndLiveWpm").removeClass("timerText"),$("#miniTimerAndLiveWpm").removeClass("timerMain"),"main"===e?($("#timer").addClass("timerMain"),$("#timerNumber").addClass("timerMain"),$("#largeLiveWpmAndAcc").addClass("timerMain"),$("#miniTimerAndLiveWpm").addClass("timerMain")):"sub"===e?($("#timer").addClass("timerSub"),$("#timerNumber").addClass("timerSub"),$("#largeLiveWpmAndAcc").addClass("timerSub"),$("#miniTimerAndLiveWpm").addClass("timerSub")):"text"===e&&($("#timer").addClass("timerText"),$("#timerNumber").addClass("timerText"),$("#largeLiveWpmAndAcc").addClass("timerText"),$("#miniTimerAndLiveWpm").addClass("timerText")),b("timerColor",t),p.dispatch("timerColor",v.timerColor),!0)}function be(e,t){return!!(0,c.isConfigValueValid)("timer opacity",e,[["0.25","0.5","0.75","1"]])&&(v.timerOpacity=e,b("timerOpacity",t),p.dispatch("timerOpacity",v.timerOpacity),!0)}function we(e,t){return!!(0,c.isConfigValueValid)("key tips",e,["boolean"])&&(v.showKeyTips=e,v.showKeyTips?$("#bottom .keyTips").removeClass("hidden"):$("#bottom .keyTips").addClass("hidden"),b("showKeyTips",t),p.dispatch("showKeyTips",v.showKeyTips),!0)}function $e(e,t){if(!(0,c.isConfigValueValid)("time",e,["number"]))return!1;const o=isNaN(e)||e<0?f.default.time:e;$("#top .config .time .text-button").removeClass("active");const n=[15,30,60,120].includes(o)?o:"custom";return v.time=o,$("#top .config .time .text-button[timeConfig='"+n+"']").addClass("active"),b("time",t),p.dispatch("time",v.time),!0}function Ce(e,t,o){return!!(0,c.isConfigValueValid)("quote length",e,[[-2,-1,0,1,2,3],"numberArray"])&&(Array.isArray(e)?(1===e.length&&-1===e[0]&&(e=[1]),v.quoteLength=e):(Array.isArray(v.quoteLength)||(v.quoteLength=[]),(null===e||isNaN(e)||e<-2||e>3)&&(e=1),e=parseInt(e.toString()),o?v.quoteLength.includes(e)?v.quoteLength.length>1&&(v.quoteLength=v.quoteLength.filter((t=>t!==e))):v.quoteLength.push(e):v.quoteLength=[e]),$("#top .config .quoteLength .text-button").removeClass("active"),v.quoteLength.forEach((e=>{$("#top .config .quoteLength .text-button[quoteLength='"+e+"']").addClass("active")})),b("quoteLength",t),p.dispatch("quoteLength",v.quoteLength),!0)}function Se(e,t){if(!(0,c.isConfigValueValid)("words",e,["number"]))return!1;const o=e<0||e>1e5?f.default.words:e;$("#top .config .wordCount .text-button").removeClass("active");const n=[10,25,50,100,200].includes(o)?o:"custom";return v.words=o,$("#top .config .wordCount .text-button[wordCount='"+n+"']").addClass("active"),b("words",t),p.dispatch("words",v.words),!0}function _e(e,t){return!!(0,c.isConfigValueValid)("smooth caret",e,["boolean"])&&(v.smoothCaret=e,e?$("#caret").css("animation-name","caretFlashSmooth"):$("#caret").css("animation-name","caretFlashHard"),b("smoothCaret",t),p.dispatch("smoothCaret",v.smoothCaret),!0)}function xe(e,t){return!!(0,c.isConfigValueValid)("start graphs at zero",e,["boolean"])&&(v.startGraphsAtZero=e,b("startGraphsAtZero",t),p.dispatch("startGraphsAtZero",v.startGraphsAtZero),!0)}function Te(e,t){return!!(0,c.isConfigValueValid)("smooth line scroll",e,["boolean"])&&(v.smoothLineScroll=e,b("smoothLineScroll",t),p.dispatch("smoothLineScroll",v.smoothLineScroll),!0)}function ke(e,t){return!!(0,c.isConfigValueValid)("quick tab mode",e,["boolean"])&&(v.quickTab=e,v.quickTab?($("#restartTestButton").addClass("hidden"),$("#bottom .keyTips").html("<key>tab</key> - restart test<br>\n    <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key> or <key>esc</key> - command line")):($("#restartTestButton").removeClass("hidden"),$("#restartTestButton").css("opacity",1),$("#bottom .keyTips").html("<key>tab</key> and <key>enter</key> / <key>space</key> - restart test<br>\n      <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key> or <key>esc</key> - command line")),b("quickTab",t),p.dispatch("quickTab",v.quickTab),!0)}function Me(e,t){return!!(0,c.isConfigValueValid)("font family",e,["string"])&&(""===e&&(e="roboto_mono",l.add("Empty input received, reverted to the default font.",0,3,"Custom font")),(0,c.isConfigKeyValid)(e)?(v.fontFamily=e,document.documentElement.style.setProperty("--font",`"${e.replace(/_/g," ")}", "Roboto Mono"`),b("fontFamily",t),p.dispatch("fontFamily",v.fontFamily),!0):(l.add(`Invalid font name value: "${e}".`,-1,3,"Custom font"),!1))}function Pe(e,t){return!!(0,c.isConfigValueValid)("freedom mode",e,["boolean"])&&(null==e&&(e=!1),v.freedomMode=e,v.freedomMode&&"off"!==v.confidenceMode&&(v.confidenceMode="off"),b("freedomMode",t),p.dispatch("freedomMode",v.freedomMode),!0)}function Oe(e,t){return!!(0,c.isConfigValueValid)("confidence mode",e,[["off","on","max"]])&&(v.confidenceMode=e,"off"!==v.confidenceMode&&(v.freedomMode=!1,v.stopOnError="off"),b("confidenceMode",t),p.dispatch("confidenceMode",v.confidenceMode,t),!0)}function Le(e,t){return!!(0,c.isConfigValueValid)("indicate typos",e,[["off","below","replace"]])&&(v.indicateTypos=e,b("indicateTypos",t),p.dispatch("indicateTypos",v.indicateTypos),!0)}function Ae(e,t){return!!(0,c.isConfigValueValid)("auto switch theme",e,["boolean"])&&(e=null!=e?e:f.default.autoSwitchTheme,v.autoSwitchTheme=e,b("autoSwitchTheme",t),p.dispatch("autoSwitchTheme",v.autoSwitchTheme),!0)}function We(e,t){return!!(0,c.isConfigValueValid)("custom theme",e,["boolean"])&&(v.customTheme=e,b("customTheme",t),p.dispatch("customTheme",v.customTheme),!0)}function Ee(e,t){return!!(0,c.isConfigValueValid)("theme light",e,["string"])&&(v.themeLight=e,b("themeLight",t),p.dispatch("themeLight",v.themeLight,t),!0)}function je(e,t){return!!(0,c.isConfigValueValid)("theme dark",e,["string"])&&(v.themeDark=e,b("themeDark",t),p.dispatch("themeDark",v.themeDark,t),!0)}function Be(e,t){if(!(0,c.isConfigValueValid)("random theme",e,[["off","on","fav","light","dark","custom"]]))return!1;if("custom"===e){if(null===m.Auth.currentUser)return v.randomTheme=e,!1;if(!u.getSnapshot())return!0;if(0===u.getSnapshot().customThemes.length)return l.add("You need to create a custom theme first",0),v.randomTheme="off",!1}return v.randomTheme=e,b("randomTheme",t),p.dispatch("randomTheme",v.randomTheme),!0}function De(e,t){return!!(0,c.isConfigValueValid)("british english",e,["boolean"])&&(e||(e=!1),v.britishEnglish=e,b("britishEnglish",t),p.dispatch("britishEnglish",v.britishEnglish),!0)}function Re(e,t){return!!(0,c.isConfigValueValid)("lazy mode",e,["boolean"])&&(e||(e=!1),v.lazyMode=e,b("lazyMode",t),p.dispatch("lazyMode",v.lazyMode,t),!0)}function qe(e,t){return!!(0,c.isConfigValueValid)("language",e,["string"])&&(v.language=e,h.log("changedLanguage",{language:e}),b("language",t),p.dispatch("language",v.language),!0)}function Ie(e,t){return!!(0,c.isConfigValueValid)("monkey",e,["boolean"])&&(v.monkey=e,b("monkey",t),p.dispatch("monkey",v.monkey),!0)}function Ve(e,t){return!!(0,c.isConfigValueValid)("keymap mode",e,[["off","static","react","next"]])&&($(".active-key").removeClass("active-key"),$(".keymap-key").attr("style",""),v.keymapMode=e,b("keymapMode",t),p.dispatch("keymapMode",v.keymapMode,t),!0)}function Fe(e,t){return!!(0,c.isConfigValueValid)("keymap legend style",e,[["lowercase","uppercase","blank","dynamic"]])&&(["lowercase","uppercase","blank","dynamic"].forEach((e=>{$(".keymapLegendStyle").removeClass(e)})),e=e||"lowercase",$(".keymap-key > .letter").css("display",""),$(".keymap-key > .letter").css("text-transform",""),"uppercase"===e&&$(".keymap-key > .letter").css("text-transform","capitalize"),"blank"===e&&$(".keymap-key > .letter").css("display","none"),$(".keymapLegendStyle").addClass(e),v.keymapLegendStyle=e,b("keymapLegendStyle",t),p.dispatch("keymapLegendStyle",v.keymapLegendStyle),!0)}function Ke(e,t){return!!(0,c.isConfigValueValid)("keymap style",e,[["staggered","alice","matrix","split","split_matrix"]])&&(e=e||"staggered",v.keymapStyle=e,b("keymapStyle",t),p.dispatch("keymapStyle",v.keymapStyle),!0)}function He(e,t){return!!(0,c.isConfigValueValid)("keymap layout",e,["string"])&&(v.keymapLayout=e,b("keymapLayout",t),p.dispatch("keymapLayout",v.keymapLayout),!0)}function ze(e,t){return!!(0,c.isConfigValueValid)("layout",e,["string"])&&(v.layout=e,b("layout",t),p.dispatch("layout",v.layout,t),!0)}function Ne(e,t){return e=e.toString(),!!(0,c.isConfigValueValid)("font size",e,[["1","125","15","2","3","4"]])&&(v.fontSize=e,$("#words").removeClass("size125"),$("#caret, #paceCaret").removeClass("size125"),$("#words").removeClass("size15"),$("#caret, #paceCaret").removeClass("size15"),$("#words").removeClass("size2"),$("#caret, #paceCaret").removeClass("size2"),$("#words").removeClass("size3"),$("#caret, #paceCaret").removeClass("size3"),$("#words").removeClass("size35"),$("#caret, #paceCaret").removeClass("size35"),$("#words").removeClass("size4"),$("#caret, #paceCaret").removeClass("size4"),$("#miniTimerAndLiveWpm").removeClass("size125"),$("#miniTimerAndLiveWpm").removeClass("size15"),$("#miniTimerAndLiveWpm").removeClass("size2"),$("#miniTimerAndLiveWpm").removeClass("size3"),$("#miniTimerAndLiveWpm").removeClass("size35"),$("#miniTimerAndLiveWpm").removeClass("size4"),"125"==e?($("#words").addClass("size125"),$("#caret, #paceCaret").addClass("size125"),$("#miniTimerAndLiveWpm").addClass("size125")):"15"==e?($("#words").addClass("size15"),$("#caret, #paceCaret").addClass("size15"),$("#miniTimerAndLiveWpm").addClass("size15")):"2"==e?($("#words").addClass("size2"),$("#caret, #paceCaret").addClass("size2"),$("#miniTimerAndLiveWpm").addClass("size2")):"3"==e?($("#words").addClass("size3"),$("#caret, #paceCaret").addClass("size3"),$("#miniTimerAndLiveWpm").addClass("size3")):"4"==e&&($("#words").addClass("size4"),$("#caret, #paceCaret").addClass("size4"),$("#miniTimerAndLiveWpm").addClass("size4")),b("fontSize",t),p.dispatch("fontSize",v.fontSize),!0)}function Qe(e,t){return!!(0,c.isConfigValueValid)("custom background",e,["string"])&&(e=e.trim(),/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi.test(e)&&!/[<>]/.test(e)||""==e?(v.customBackground=e,b("customBackground",t),p.dispatch("customBackground",v.customBackground)):l.add("Invalid custom background URL",0),!0)}function Ue(e,t){return s(this,void 0,void 0,(function*(){const o=e.trim();if(!(yield(0,c.isConfigValueValidAsync)("layoutfluid",o,["layoutfluid"])))return!1;const n=o.replace(/ /g,"#");return v.customLayoutfluid=n,$(".pageSettings .section.customLayoutfluid input").val(n.replace(/#/g," ")),b("customLayoutfluid",t),p.dispatch("customLayoutFluid",v.customLayoutfluid),!0}))}function Ge(e,t){return!!(0,c.isConfigValueValid)("custom background size",e,[["max","cover","contain"]])&&("cover"!=e&&"contain"!=e&&"max"!=e&&(e="cover"),v.customBackgroundSize=e,b("customBackgroundSize",t),p.dispatch("customBackgroundSize",v.customBackgroundSize),!0)}function Je(e,t){return!!(0,c.isConfigValueValid)("custom background filter",e,["numberArray"])&&(v.customBackgroundFilter=e,b("customBackgroundFilter",t),p.dispatch("customBackgroundFilter",v.customBackgroundFilter),!0)}function Ze(e,t){return!!(0,c.isConfigValueValid)("monkey power level",e,[["off","1","2","3","4"]])&&(["off","1","2","3","4"].includes(e)||(e="off"),v.monkeyPowerLevel=e,b("monkeyPowerLevel",t),p.dispatch("monkeyPowerLevel",v.monkeyPowerLevel),!0)}function Ye(e,t){return!!(0,c.isConfigValueValid)("burst heatmap",e,["boolean"])&&(e||(e=!1),v.burstHeatmap=e,b("burstHeatmap",t),p.dispatch("burstHeatmap",v.burstHeatmap),!0)}function Xe(e){if(!e)return;const t=e;if(Object.keys(f.default).forEach((e=>{if(void 0===t[e]){const o=f.default[e];t[e]=o}})),null!=t){Ee(t.themeLight,!0),je(t.themeDark,!0),Ae(t.autoSwitchTheme,!0),o=t.theme,n=t.customTheme,a=t.customThemeColors,!0,(0,c.isConfigValueValid)("themes",o,["string"])&&(v.customThemeColors=a,v.theme=o,v.customTheme=n,b("theme",true),p.dispatch("setThemes",n)),Ue(t.customLayoutfluid,!0),Qe(t.customBackground,!0),Ge(t.customBackgroundSize,!0),Je(t.customBackgroundFilter,!0),ke(t.quickTab,!0),we(t.showKeyTips,!0),$e(t.time,!0),Ce(t.quoteLength,!0),Se(t.words,!0),qe(t.language,!0),ze(t.layout,!0),Ne(t.fontSize,!0),Pe(t.freedomMode,!0),ue(t.caretStyle,!0),de(t.paceCaretStyle,!0),O(t.difficulty,!0),W(t.blindMode,!0),ee(t.quickEnd,!0),ne(t.flipTestColors,!0),ae(t.colorfulMode,!0),Oe(t.confidenceMode,!0),Le(t.indicateTypos,!0),ye(t.timerStyle,!0),ve(t.timerColor,!0),be(t.timerOpacity,!0),Ve(t.keymapMode,!0),Ke(t.keymapStyle,!0),Fe(t.keymapLegendStyle,!0),He(t.keymapLayout,!0),Me(t.fontFamily,!0),_e(t.smoothCaret,!0),Te(t.smoothLineScroll,!0),ce(t.showLiveWpm,!0),pe(t.showLiveAcc,!0),fe(t.showLiveBurst,!0),le(t.showTimerProgress,!0),D(t.alwaysShowDecimalPlaces,!0),J(t.alwaysShowWordsHistory,!0),Z(t.singleListCommandLine,!0),Y(t.capsLockWarning,!0),k(t.playSoundOnError,!0),M(t.playSoundOnClick,!0),P(t.soundVolume,!0),B(t.stopOnError,!0),L(t.favThemes,!0),A(t.funbox,!0),Be(t.randomTheme,!0),X(t.showAllLines,!0),I(t.swapEscAndTab,!0),q(t.showOutOfFocusWarning,!0),V(t.paceCaret,!0),F(t.paceCaretCustomSpeed,!0),K(t.repeatedPace,!0),re(t.pageWidth,!0),E(t.chartAccuracy,!0),j(t.chartStyle,!0),U(t.minBurst,!0),G(t.minBurstCustomSpeed,!0),H(t.minWpm,!0),z(t.minWpmCustomSpeed,!0),N(t.minAcc,!0),Q(t.minAccCustom,!0),_(t.numbers,!0),x(t.punctuation,!0),he(t.highlightMode,!0),R(t.alwaysShowCPM,!0),ge(t.hideExtraLetters,!0),xe(t.startGraphsAtZero,!0),ie(t.strictSpace,!0),se(t.oppositeShiftMode,!0),T(t.mode,!0),Ie(t.monkey,!0),oe(t.repeatQuotes,!0),Ze(t.monkeyPowerLevel,!0),Ye(t.burstHeatmap,!0),De(t.britishEnglish,!0),Re(t.lazyMode,!0),me(t.showAverage,!0);try{te(t.enableAds,!0),"max"===v.enableAds||"on"===v.enableAds?($("head").append('\n          <script\n          src="https://hb.vntsm.com/v3/live/ad-manager.min.js"\n          type="text/javascript"\n          data-site-id="60b78af12119122b8958910f"\n          data-mode="scan"\n          id="adScript"\n          async\n          ><\/script>\n        '),"max"===v.enableAds?($("#ad_rich_media").removeClass("hidden"),$("#ad_rich_media").html('<div class="vm-placement" data-id="60bf737ee04cb761c88aafb1" style="display:none"></div>')):$("#ad_rich_media").remove(),$("#ad_footer").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_footer").removeClass("hidden"),$("#ad_about1").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_about1").removeClass("hidden"),$("#ad_about2").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_about2").removeClass("hidden"),$("#ad_settings0").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_settings0").removeClass("hidden"),$("#ad_settings1").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_settings1").removeClass("hidden"),$("#ad_settings2").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_settings2").removeClass("hidden"),$("#ad_settings3").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_settings3").removeClass("hidden"),$("#ad_account").html('<div class="vm-placement" data-id="60bf73dae04cb761c88aafb5"></div>'),$("#ad_account").removeClass("hidden"),$(".footerads").removeClass("hidden")):($("#adScript").remove(),$(".footerads").remove(),$("#ad_left").remove(),$("#ad_right").remove(),$("#ad_footer").remove(),$("#ad_footer2").remove(),$("#ad_footer3").remove(),$("#ad_settings0").remove(),$("#ad_settings1").remove(),$("#ad_settings2").remove(),$("#ad_settings3").remove(),$("#ad_account").remove(),$("#ad_about1").remove(),$("#ad_about2").remove())}catch(e){l.add("Error initialising ads: "+e.message),console.log("error initialising ads "+e.message),$(".footerads").remove(),$("#ad_left").remove(),$("#ad_right").remove(),$("#ad_footer").remove(),$("#ad_footer2").remove(),$("#ad_footer3").remove(),$("#ad_settings0").remove(),$("#ad_settings1").remove(),$("#ad_settings2").remove(),$("#ad_settings3").remove(),$("#ad_account").remove(),$("#ad_about1").remove(),$("#ad_about2").remove()}p.dispatch("configApplied",void 0,void 0,void 0,v)}var o,n,a}t.saveFullConfigToLocalStorage=S,t.setNumbers=_,t.setPunctuation=x,t.setMode=T,t.setPlaySoundOnError=k,t.setPlaySoundOnClick=M,t.setSoundVolume=P,t.setDifficulty=O,t.setFavThemes=L,t.setFunbox=A,t.setBlindMode=W,t.setChartAccuracy=E,t.setChartStyle=j,t.setStopOnError=B,t.setAlwaysShowDecimalPlaces=D,t.setAlwaysShowCPM=R,t.setShowOutOfFocusWarning=q,t.setSwapEscAndTab=I,t.setPaceCaret=V,t.setPaceCaretCustomSpeed=F,t.setRepeatedPace=K,t.setMinWpm=H,t.setMinWpmCustomSpeed=z,t.setMinAcc=N,t.setMinAccCustom=Q,t.setMinBurst=U,t.setMinBurstCustomSpeed=G,t.setAlwaysShowWordsHistory=J,t.setSingleListCommandLine=Z,t.setCapsLockWarning=Y,t.setShowAllLines=X,t.setQuickEnd=ee,t.setEnableAds=te,t.setRepeatQuotes=oe,t.setFlipTestColors=ne,t.setColorfulMode=ae,t.setStrictSpace=ie,t.setOppositeShiftMode=se,t.setPageWidth=re,t.setCaretStyle=ue,t.setPaceCaretStyle=de,t.setShowTimerProgress=le,t.setShowLiveWpm=ce,t.setShowLiveAcc=pe,t.setShowLiveBurst=fe,t.setShowAverage=me,t.setHighlightMode=he,t.setHideExtraLetters=ge,t.setTimerStyle=ye,t.setTimerColor=ve,t.setTimerOpacity=be,t.setKeyTips=we,t.setTimeConfig=$e,t.setQuoteLength=Ce,t.setWordCount=Se,t.setSmoothCaret=_e,t.setStartGraphsAtZero=xe,t.setSmoothLineScroll=Te,t.setQuickTabMode=ke,t.previewFontFamily=function(e){return!!(0,c.isConfigValueValid)("preview font family",e,["string"])&&(document.documentElement.style.setProperty("--font",'"'+e.replace(/_/g," ")+'", "Roboto Mono"'),!0)},t.setFontFamily=Me,t.setFreedomMode=Pe,t.setConfidenceMode=Oe,t.setIndicateTypos=Le,t.setAutoSwitchTheme=Ae,t.setCustomTheme=We,t.setTheme=function(e,t){return!!(0,c.isConfigValueValid)("theme",e,["string"])&&(v.theme=e,We(!1),b("theme",t),p.dispatch("theme",v.theme),!0)},t.setThemeLight=Ee,t.setThemeDark=je,t.setRandomTheme=Be,t.setBritishEnglish=De,t.setLazyMode=Re,t.setCustomThemeColors=function(e,t){return!!(0,c.isConfigValueValid)("custom theme colors",e,["stringArray"])&&(void 0!==e&&(v.customThemeColors=e),b("customThemeColors",t),p.dispatch("customThemeColors",v.customThemeColors,t),!0)},t.setLanguage=qe,t.setMonkey=Ie,t.setKeymapMode=Ve,t.setKeymapLegendStyle=Fe,t.setKeymapStyle=Ke,t.setKeymapLayout=He,t.setLayout=ze,t.setFontSize=Ne,t.setCustomBackground=Qe,t.setCustomLayoutfluid=Ue,t.setCustomBackgroundSize=Ge,t.setCustomBackgroundFilter=Je,t.setMonkeyPowerLevel=Ze,t.setBurstHeatmap=Ye,t.apply=Xe,t.reset=function(){p.dispatch("fullConfigChange"),Xe(f.default),S()},t.loadFromLocalStorage=function(){console.log("loading localStorage config");const e=window.localStorage.getItem("config");let o;if(null!=e&&""!==e){try{o=JSON.parse(e)}catch(e){o={}}Xe(o),console.log("applying localStorage config"),t.localStorageConfig=o,S(!0),console.log("saving localStorage config")}y()},t.getConfigChanges=function(){const e={};return Object.keys(v).filter((e=>v[e]!=f.default[e])).forEach((t=>{e[t]=v[t]})),e},t.setConfig=function(e){v=e},t.loadPromise=new Promise((e=>{y=e})),t.default=v},1457:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={theme:"serika_dark",themeLight:"serika",themeDark:"serika_dark",autoSwitchTheme:!1,customTheme:!1,customThemeColors:["#323437","#e2b714","#e2b714","#646669","#d1d0c5","#ca4754","#7e2a33","#ca4754","#7e2a33"],favThemes:[],showKeyTips:!0,showLiveWpm:!1,showTimerProgress:!0,smoothCaret:!0,quickTab:!1,punctuation:!1,numbers:!1,words:50,time:30,mode:"time",quoteLength:[1],language:"english",fontSize:"15",freedomMode:!1,resultFilters:null,difficulty:"normal",blindMode:!1,quickEnd:!1,caretStyle:"default",paceCaretStyle:"default",flipTestColors:!1,layout:"default",funbox:"none",confidenceMode:"off",indicateTypos:"off",timerStyle:"mini",colorfulMode:!1,randomTheme:"off",timerColor:"main",timerOpacity:"1",stopOnError:"off",showAllLines:!1,keymapMode:"off",keymapStyle:"staggered",keymapLegendStyle:"lowercase",keymapLayout:"overrideSync",fontFamily:"Roboto_Mono",smoothLineScroll:!1,alwaysShowDecimalPlaces:!1,alwaysShowWordsHistory:!1,singleListCommandLine:"manual",capsLockWarning:!0,playSoundOnError:!1,playSoundOnClick:"off",soundVolume:"0.5",startGraphsAtZero:!0,swapEscAndTab:!1,showOutOfFocusWarning:!0,paceCaret:"off",paceCaretCustomSpeed:100,repeatedPace:!0,pageWidth:"100",chartAccuracy:!0,chartStyle:"line",minWpm:"off",minWpmCustomSpeed:100,highlightMode:"letter",alwaysShowCPM:!1,enableAds:"off",hideExtraLetters:!1,strictSpace:!1,minAcc:"off",minAccCustom:90,showLiveAcc:!1,showLiveBurst:!1,monkey:!1,repeatQuotes:"off",oppositeShiftMode:"off",customBackground:"",customBackgroundSize:"cover",customBackgroundFilter:[0,1,1,1,1],customLayoutfluid:"qwerty#dvorak#colemak",monkeyPowerLevel:"off",minBurst:"off",minBurstCustomSpeed:100,burstHeatmap:!1,britishEnglish:!1,lazyMode:!1,showAverage:"off"}},4126:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSnap=void 0,t.defaultSnap={results:void 0,personalBests:{time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}},name:"",customThemes:[],presets:[],tags:[],favouriteThemes:[],banned:void 0,verified:void 0,emailVerified:void 0,lbMemory:{time:{15:{english:0},60:{english:0}}},globalStats:{time:0,started:0,completed:0},quoteRatings:void 0,quoteMod:!1}},6374:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseConfig=void 0,t.firebaseConfig={apiKey:"AIzaSyB5m_AnO575kvWriahcF1SFIWp8Fj3gQno",authDomain:"monkey-type.firebaseapp.com",databaseURL:"https://monkey-type.firebaseio.com",projectId:"monkey-type",storageBucket:"monkey-type.appspot.com",messagingSenderId:"789788471140",appId:"1:789788471140:web:7e31b15959d68ac0a51471",measurementId:"G-PFV65WPEWF"}},517:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.signOut=t.addPasswordAuth=t.removeGoogleAuth=t.addGoogleAuth=t.signInWithGoogle=t.signIn=t.getDataAndInit=t.sendVerificationEmail=t.gmailProvider=void 0;const u=r(o(9063)),d=i(o(6030)),l=i(o(2426)),c=l,p=i(o(2734)),f=i(o(1211)),m=i(o(2229)),h=i(o(5021)),g=i(o(4610)),y=i(o(5632)),v=i(o(2541)),b=i(o(2850)),w=i(o(9596)),C=i(o(1675)),S=i(o(249)),_=i(o(8308)),x=i(o(5922)),T=i(o(4375)),k=i(o(940)),M=i(o(8548)),P=i(o(9861)),O=i(o(3370)),L=i(o(1112)),A=i(o(7124)),W=i(o(6122)),E=i(o(7995)),j=o(2974),B=o(9280),D=r(o(4673)),R=o(4126);function q(){_.show();const e=B.Auth.currentUser;null!==e&&(0,j.sendEmailVerification)(e).then((()=>{_.hide(),d.add("Email sent to "+e.email,4e3)})).catch((e=>{_.hide(),d.add("Error: "+e.message,3e3),console.error(e.message)}))}function I(){var e;return s(this,void 0,void 0,(function*(){try{console.log("getting account data"),"loading"===T.get()?M.updateBar(90):M.updateBar(45),M.updateText("Downloading user data..."),yield M.showBar(),yield v.initSnapshot()}catch(e){const t=e;p.loading(!1),429===t.responseCode&&(d.add("Doing so will save you bandwidth, make the next test be ready faster and will not sign you out (which could mean your new personal best would not save to your account).",0,0),d.add("You will run into this error if you refresh the website to restart the test. It is NOT recommended to do that. Instead, use tab + enter or just tab (with quick tab mode enabled) to restart the test.",0,0));const o=t.message||t;return d.add("Failed to get user data: "+o,-1),$("#top #menu .account").css("opacity",1),"loading"===T.get()&&w.change(""),!1}"loading"==T.get()?M.updateBar(100):M.updateBar(45),M.updateText("Applying settings...");const t=v.getSnapshot();if($("#menu .icon-button.account .text").text(t.name),P.loadTags(t.tags),Promise.all([h.getLanguageList(),h.getFunboxList()]).then((e=>{const[t,o]=e;t.forEach((e=>{P.defaultResultFilters.language[e]=!0})),o.forEach((e=>{P.defaultResultFilters.funbox[e.name]=!0})),P.load()})),!t.name){let o=!1,n="";for(;!o;){if(n=null!==(e=prompt("Please provide a new username (cannot be longer than 16 characters, can only contain letters, numbers, underscores, dots and dashes):"))&&void 0!==e?e:"",!n)return!1;const a=yield u.default.users.updateName(n);if(200!==a.status)return d.add("Failed to update name: "+a.message,-1),!1;o=!0,d.add("Name updated",1),t.name=n,v.setSnapshot(t),$("#menu .icon-button.account .text").text(n)}}if(c.changedBeforeDb)console.log("config changed before db"),p.loading(!1);else{if(null===c.localStorageConfig&&t.config)console.log("no local config, applying db"),p.loading(!1),c.apply(t.config),g.update(),c.saveFullConfigToLocalStorage(!0),b.restart(!1,!0);else if(void 0!==t.config){let e=!1;Object.keys(l.default).forEach((o=>{var n,a;const i=o;if(!e)try{"resultFilters"!==i&&(Array.isArray(l.default[i])?l.default[i].forEach(((o,n)=>{var a;const s=(null===(a=null==t?void 0:t.config)||void 0===a?void 0:a[i])[n];o!=s&&(e=!0,console.log(`.config is different: ${o} != ${s}`))})):l.default[i]!=(null===(n=null==t?void 0:t.config)||void 0===n?void 0:n[i])&&(e=!0,console.log(`..config is different ${i}: ${l.default[i]} != ${null===(a=null==t?void 0:t.config)||void 0===a?void 0:a[i]}`)))}catch(t){console.log(t),e=!0,console.log("...config is different")}})),e&&(console.log("configs are different, applying config from db"),p.loading(!1),c.apply(t.config),g.update(),c.saveFullConfigToLocalStorage(!0),"test"==T.get()&&b.restart(!1,!0),v.saveConfig(l.default))}c.setDbConfigLoaded(!0)}return"pb"!==l.default.paceCaret&&"average"!==l.default.paceCaret||k.get()||O.init(),p.loading(!1),P.updateTags(),L.updateTagCommands(),A.loadActiveFromLocalStorage(),W.updateButtons(),g.showAccountSection(),x.set(!1),console.log("account loading finished"),!0}))}function V(e){return s(this,void 0,void 0,(function*(){$(".pageAccount .content p.accountVerificatinNotice").remove(),!1===e.emailVerified&&$(".pageAccount .content").prepend('<p class="accountVerificatinNotice" style="text-align:center">Your account is not verified. <a class="sendVerificationEmail">Send the verification email again</a>.'),x.set(!1),p.update(),p.loading(!0),!1===(yield I())&&Q(),$(".pageLogin .preloader").addClass("hidden");let t="Account created on "+e.metadata.creationTime;const o=new Date(e.metadata.creationTime),n=(0,D.default)(new Date,o);t+=` (${n} day${1!=n?"s":""} ago)`,$(".pageAccount .group.createdDate").text(t),null!==m.data&&m.verify(e.uid)}))}t.gmailProvider=new j.GoogleAuthProvider,t.sendVerificationEmail=q,t.getDataAndInit=I;const F=B.Auth.onAuthStateChanged((function(e){return s(this,void 0,void 0,(function*(){console.log(`auth state changed, user ${!!e}`),e?yield V(e):("/account"==window.location.pathname&&window.history.replaceState("","","/login"),x.set(!1)),e?"/login"==window.location.pathname?w.change("account"):"/account"!=window.location.pathname?(w.change(),setTimeout((()=>{S.set(!1)}),62.5)):f.update():(w.change(),setTimeout((()=>{S.set(!1)}),62.5)),E.loadCustomThemeFromUrl(),/challenge_.+/g.test(window.location.pathname)?d.add("Challenge links temporarily disabled. Please use the command line to load the challenge manually",0,7):C.show()}))}));function K(){c.setChangedBeforeDb(!1),F(),$(".pageLogin .preloader").removeClass("hidden"),$(".pageLogin .button").addClass("disabled");const e=$(".pageLogin .login input")[0].value,t=$(".pageLogin .login input")[1].value,o=$(".pageLogin .login #rememberMe input").prop("checked")?j.browserLocalPersistence:j.browserSessionPersistence;(0,j.setPersistence)(B.Auth,o).then((function(){return(0,j.signInWithEmailAndPassword)(B.Auth,e,t).then((e=>s(this,void 0,void 0,(function*(){if(yield V(e.user),w.change("account"),null!==b.notSignedInLastResult){b.setNotSignedInUid(e.user.uid);const t=yield u.default.results.save(b.notSignedInLastResult);if(200!==t.status)return d.add("Failed to save last result: "+t.message,-1);b.clearNotSignedInResult(),d.add("Last test result saved",1)}})))).catch((function(e){let t=e.message;"auth/wrong-password"===e.code?t="Incorrect password.":"auth/user-not-found"===e.code&&(t="User not found."),d.add(t,-1),$(".pageLogin .preloader").addClass("hidden"),$(".pageLogin .button").removeClass("disabled")}))}))}function H(){var e,o;return s(this,void 0,void 0,(function*(){let n;c.setChangedBeforeDb(!1),$(".pageLogin .preloader").removeClass("hidden"),$(".pageLogin .button").addClass("disabled"),F();try{const o=$(".pageLogin .login #rememberMe input").prop("checked")?j.browserLocalPersistence:j.browserSessionPersistence;if(yield(0,j.setPersistence)(B.Auth,o),n=yield(0,j.signInWithPopup)(B.Auth,t.gmailProvider),null===(e=(0,j.getAdditionalUserInfo)(n))||void 0===e?void 0:e.isNewUser){let e=!1,t="";for(;!e;){if(t=prompt("Please provide a new username (cannot be longer than 16 characters, can only contain letters, numbers, underscores, dots and dashes):")||"",!t)return Q(),void $(".pageLogin .preloader").addClass("hidden");const o=yield u.default.users.getNameAvailability(t);if(200!==o.status)return d.add("Failed to check name: "+o.message,-1);e=!0}const o=yield u.default.users.create(t);if(200!==o.status)throw o;if(200===o.status&&(yield(0,j.updateProfile)(n.user,{displayName:t}),yield(0,j.sendEmailVerification)(n.user),y.clear(),d.add("Account created",1,3),$("#menu .icon-button.account .text").text(t),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin .preloader").addClass("hidden"),yield V(n.user),w.change("account"),null!==b.notSignedInLastResult)&&(b.setNotSignedInUid(n.user.uid),200===(yield u.default.results.save(b.notSignedInLastResult)).status)){const e=b.notSignedInLastResult;v.saveLocalResult(e),v.updateLocalStats({time:e.testDuration+e.incompleteTestSeconds-e.afkDuration,started:1})}}else yield V(n.user),w.change("account")}catch(e){console.log(e);const t=h.createErrorMessage(e,"Failed to sign in with Google");return d.add(t,-1),$(".pageLogin .preloader").addClass("hidden"),$(".pageLogin .button").removeClass("disabled"),n&&(null===(o=(0,j.getAdditionalUserInfo)(n))||void 0===o?void 0:o.isNewUser)&&(yield u.default.users.delete(),yield n.user.delete()),void Q()}}))}function z(){return s(this,void 0,void 0,(function*(){_.show(),null!==B.Auth.currentUser&&(0,j.linkWithPopup)(B.Auth.currentUser,t.gmailProvider).then((function(){_.hide(),d.add("Google authentication added",1),g.updateAuthSections()})).catch((function(e){_.hide(),d.add("Failed to add Google authenication: "+e.message,-1)}))}))}function N(){return s(this,void 0,void 0,(function*(){const e=B.Auth.currentUser;if(null!==e)if(e.providerData.find((e=>"password"===e.providerId))){_.show();try{yield(0,j.reauthenticateWithPopup)(e,t.gmailProvider)}catch(e){_.hide();const t=h.createErrorMessage(e,"Failed to reauthenticate");return d.add(t,-1)}(0,j.unlink)(e,"google.com").then((()=>{d.add("Google authentication removed",1),_.hide(),g.updateAuthSections()})).catch((e=>{_.hide(),d.add("Failed to remove Google authentication: "+e.message,-1)}))}else d.add("Password authentication needs to be enabled to remove Google authentication",-1)}))}function Q(){B.Auth.signOut().then((function(){d.add("Signed out",0,2),y.clear(),g.hideAccountSection(),p.update(),w.change("login"),v.setSnapshot(R.defaultSnap),$(".pageLogin .button").removeClass("disabled")})).catch((function(e){d.add(e.message,-1)}))}function U(){return s(this,void 0,void 0,(function*(){$(".pageLogin .button").addClass("disabled"),$(".pageLogin .preloader").removeClass("hidden");const e=$(".pageLogin .register input")[0].value,t=$(".pageLogin .register input")[1].value,o=$(".pageLogin .register input")[2].value,n=$(".pageLogin .register input")[3].value,a=$(".pageLogin .register input")[4].value;if(t!==o)return d.add("Emails do not match",0,3),$(".pageLogin .preloader").addClass("hidden"),void $(".pageLogin .button").removeClass("disabled");if(n!==a)return d.add("Passwords do not match",0,3),$(".pageLogin .preloader").addClass("hidden"),void $(".pageLogin .button").removeClass("disabled");const i=yield u.default.users.getNameAvailability(e);if(200!==i.status)return d.add(i.message,-1),$(".pageLogin .preloader").addClass("hidden"),void $(".pageLogin .button").removeClass("disabled");let s;F();try{s=yield(0,j.createUserWithEmailAndPassword)(B.Auth,t,n);const o=yield u.default.users.create(e,t,s.user.uid);if(200!==o.status)throw o;if(yield(0,j.updateProfile)(s.user,{displayName:e}),yield(0,j.sendEmailVerification)(s.user),y.clear(),$("#menu .icon-button.account .text").text(e),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin .preloader").addClass("hidden"),yield V(s.user),null!==b.notSignedInLastResult&&(b.setNotSignedInUid(s.user.uid),200===(yield u.default.results.save(b.notSignedInLastResult)).status)){const e=b.notSignedInLastResult;v.saveLocalResult(e),v.updateLocalStats({time:e.testDuration+e.incompleteTestSeconds-e.afkDuration,started:1})}w.change("account"),d.add("Account created",1,3)}catch(e){s&&(yield u.default.users.delete(),yield s.user.delete()),console.log(e);const t=h.createErrorMessage(e,"Failed to create account");return d.add(t,-1),$(".pageLogin .preloader").addClass("hidden"),$(".pageLogin .button").removeClass("disabled"),void Q()}}))}t.signIn=K,t.signInWithGoogle=H,t.addGoogleAuth=z,t.removeGoogleAuth=N,t.addPasswordAuth=function(e,o){return s(this,void 0,void 0,(function*(){_.show();const n=B.Auth.currentUser;if(null===n)return;if(n.providerData.find((e=>"google.com"===e.providerId)))try{yield(0,j.reauthenticateWithPopup)(n,t.gmailProvider)}catch(e){_.hide();const t=h.createErrorMessage(e,"Failed to reauthenticate");return d.add(t,-1)}const a=j.EmailAuthProvider.credential(e,o);(0,j.linkWithCredential)(n,a).then((function(){_.hide(),d.add("Password authenication added",1),g.updateAuthSections()})).catch((function(e){_.hide(),d.add("Failed to add password authenication: "+e.message,-1)}))}))},t.signOut=Q,$(".pageLogin #forgotPasswordButton").on("click",(()=>{const e=$(".pageLogin .login input")[0].value||"",t=prompt("Email address",e);t&&(0,j.sendPasswordResetEmail)(B.Auth,t).then((function(){d.add("Email sent",1,2)})).catch((function(e){d.add(e.message,-1)}))})),$(".pageLogin .login input").keyup((e=>{"Enter"===e.key&&(c.setChangedBeforeDb(!1),K())})),$(".pageLogin .login .button.signIn").on("click",(()=>{c.setChangedBeforeDb(!1),K()})),$(".pageLogin .login .button.signInWithGoogle").on("click",(()=>{c.setChangedBeforeDb(!1),H()})),$(".signOut").on("click",(()=>{Q()})),$(".pageLogin .register input").keyup((e=>{$(".pageLogin .register .button").hasClass("disabled")||"Enter"===e.key&&U()})),$(".pageLogin .register .button").on("click",(()=>{$(".pageLogin .register .button").hasClass("disabled")||U()})),$(".pageSettings #addGoogleAuth").on("click",(()=>s(void 0,void 0,void 0,(function*(){z()})))),$(".pageSettings #removeGoogleAuth").on("click",(()=>{N()})),$(document).on("click",".pageAccount .sendVerificationEmail",(()=>{q()}))},394:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;const a=o(9280),i=o(5296);t.log=function(e,t){return n(this,void 0,void 0,(function*(){try{(0,i.logEvent)(a.Analytics,e,t)}catch(e){console.log("Analytics unavailable")}}))}},5369:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.verify=t.clearActive=void 0;const r=i(o(5021)),u=i(o(6030)),d=i(o(5082)),l=i(o(8844)),c=i(o(3902)),p=i(o(2426)),f=p,m=i(o(9881)),h=i(o(9073)),g=i(o(7506));let y=!1;function v(){!g.activeChallenge||y||m.testRestarting||(u.add("Challenge cleared",0),g.setActiveChallenge(null))}t.clearActive=v,t.verify=function(e){try{if(g.activeChallenge){const t=e.afkDuration/e.testDuration*100;if(t>10)return u.add("Challenge failed: AFK time is greater than 10%",0),null;if(g.activeChallenge.requirements){let o=!0;const n=[];for(const a in g.activeChallenge.requirements){if(0==o)return null;const i=g.activeChallenge.requirements[a];if("wpm"==a){const t=Object.keys(i)[0];"exact"==t?Math.round(e.wpm)!=i.exact&&(o=!1,n.push(`WPM not ${i.exact}`)):"min"==t&&e.wpm<i.min&&(o=!1,n.push(`WPM below ${i.min}`))}else if("acc"==a){const t=Object.keys(i)[0];"exact"==t?e.acc!=i.exact&&(o=!1,n.push(`Accuracy not ${i.exact}`)):"min"==t&&e.acc<i.min&&(o=!1,n.push(`Accuracy below ${i.min}`))}else if("afk"==a)"max"==Object.keys(i)[0]&&Math.round(t)>i.max&&(o=!1,n.push(`AFK percentage above ${i.max}`));else if("time"==a)"min"==Object.keys(i)[0]&&Math.round(e.testDuration)<i.min&&(o=!1,n.push(`Test time below ${i.min}`));else if("funbox"==a){const t=i.exact;t!=e.funbox&&(o=!1,n.push(`${t} funbox not active`))}else if("raw"==a)"exact"==Object.keys(i)[0]&&Math.round(e.rawWpm)!=i.exact&&(o=!1,n.push(`Raw WPM not ${i.exact}`));else if("con"==a)"exact"==Object.keys(i)[0]&&Math.round(e.consistency)!=i.exact&&(o=!1,n.push(`Consistency not ${i.exact}`));else if("config"==a)for(const e in i){const t=i[e];p.default[e]!=t&&(o=!1,n.push(`${e} not set to ${t}`))}}return o?(g.activeChallenge.autoRole&&u.add("You will receive a role shortly. Please don't post a screenshot in challenge submissions.",1,5),u.add(`${g.activeChallenge.display} challenge passed!`,1),g.activeChallenge.name):(u.add(`${g.activeChallenge.display} challenge failed: ${n.join(", ")}`,0),null)}return u.add(`${g.activeChallenge.display} challenge passed!`,1),g.activeChallenge.name}return null}catch(e){return console.error(e),u.add(`Something went wrong when verifying challenge: ${e.message}`,0),null}},t.setup=function(e){return s(this,void 0,void 0,(function*(){y=!0,f.setFunbox("none");const t=(yield r.getChallengeList()).filter((t=>t.name===e))[0];let o;try{if(void 0===t)return u.add("Challenge not found",0),d.set(),setTimeout((()=>{$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden")}),250),!1;if("customTime"===t.type)f.setTimeConfig(t.parameters[0],!0),f.setMode("time",!0),f.setDifficulty("normal",!0),"englishMaster"===t.name&&(f.setLanguage("english_10k",!0),f.setNumbers(!0,!0),f.setPunctuation(!0,!0));else if("customWords"===t.type)f.setWordCount(t.parameters[0],!0),f.setMode("words",!0),f.setDifficulty("normal",!0);else if("customText"===t.type)l.setText(t.parameters[0].split(" ")),l.setIsTimeRandom(!1),l.setIsWordRandom(t.parameters[1]),l.setWord(t.parameters[2]),f.setMode("custom",!0),f.setDifficulty("normal",!0);else if("script"===t.type){const e=yield fetch("/challenges/"+t.parameters[0]);let o=(yield e.text()).trim();o=o.replace(/[\n\r\t ]/gm," "),o=o.replace(/ +/gm," "),l.setText(o.split(" ")),l.setIsWordRandom(!1),f.setMode("custom",!0),f.setDifficulty("normal",!0),null!=t.parameters[1]&&f.setTheme(t.parameters[1]),null!=t.parameters[2]&&c.activate(t.parameters[2])}else"accuracy"===t.type?(f.setTimeConfig(0,!0),f.setMode("time",!0),f.setDifficulty("master",!0)):"funbox"===t.type?(f.setFunbox(t.parameters[0],!0),f.setDifficulty("normal",!0),"words"===t.parameters[1]?f.setWordCount(t.parameters[2],!0):"time"===t.parameters[1]&&f.setTimeConfig(t.parameters[2],!0),f.setMode(t.parameters[1],!0),void 0!==t.parameters[3]&&f.setDifficulty(t.parameters[3],!0)):"special"===t.type&&"semimak"===t.name&&(f.setMode("time",!0),f.setTimeConfig(120,!0),f.setLanguage("english_10k",!0),f.setPunctuation(!0,!0),f.setStopOnError("word",!0),f.setLayout("semimak",!0),f.setKeymapLayout("overrideSync",!0),f.setKeymapMode("static",!0));return d.set(),o=t.message,$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden"),void 0===o?u.add(`Challenge '${t.display}' loaded.`,0):u.add("Challenge loaded. "+o,0),g.setActiveChallenge(t),y=!1,!0}catch(e){return u.add("Something went wrong: "+e,-1),!1}}))},h.subscribe((e=>{["difficulty","numbers","punctuation","mode","funbox","paceCaret","showAllLines","showLiveWpm","highlightMode","time","words","keymapMode","keymapLayout","layout"].includes(e)&&v()}))},8185:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateAllChartColors=t.setDefaultFontFamily=t.updateColors=t.miniResult=t.accountActivity=t.accountHistory=t.accountHistoryActiveIndex=t.result=void 0;const u=o(3328),d=r(o(6679)),l=r(o(2341));u.Chart.register(u.BarController,u.BarElement,u.CategoryScale,u.Filler,u.LinearScale,u.LineController,u.LineElement,u.PointElement,u.ScatterController,u.TimeScale,u.TimeSeriesScale,u.Tooltip,d.default,l.default),u.Chart.defaults.animation.duration=0,u.Chart.defaults.elements.line.tension=.3,u.Chart.defaults.elements.line.fill="origin";const c=i(o(6110)),p=i(o(2614)),f=i(o(5021)),m=r(o(2426)),h=i(o(9073)),g=r(o(9546));o(3830);class y extends u.Chart{constructor(e,t){super(e,t)}updateColors(){v(this)}}function v(e){return s(this,void 0,void 0,(function*(){const t=yield p.get("bg"),o=yield p.get("sub"),n=yield p.get("main"),a=yield p.get("error");if(e.data.datasets.every((e=>0===e.data.length)))return;e.data.datasets[0].borderColor=n,e.data.datasets[1].borderColor=o,e.data.datasets[2]&&(e.data.datasets[2].borderColor=a),void 0===e.data.datasets[0].type?"line"===e.config.type?e.data.datasets[0].pointBackgroundColor=n:"bar"===e.config.type&&(e.data.datasets[0].backgroundColor=n):"bar"===e.data.datasets[0].type?e.data.datasets[0].backgroundColor=n:"line"===e.data.datasets[0].type&&(e.data.datasets[0].pointBackgroundColor=n),void 0===e.data.datasets[1].type?"line"===e.config.type?e.data.datasets[1].pointBackgroundColor=o:"bar"===e.config.type&&(e.data.datasets[1].backgroundColor=o):"bar"===e.data.datasets[1].type?e.data.datasets[1].backgroundColor=o:"line"===e.data.datasets[1].type&&(e.data.datasets[1].pointBackgroundColor=o);const i=e.options;Object.keys(i.scales).forEach((e=>{const t=i.scales[e];t.ticks.color=o,t.title.color=o}));try{e.data.datasets[0].trendlineLinear.style=o,e.data.datasets[1].trendlineLinear.style=o}catch(e){}e.options.plugins.annotation.annotations.forEach((e=>{e.borderColor=o,e.label.backgroundColor=o,e.label.color=t})),e.update("none")}))}function b(e){u.Chart.defaults.font.family=e.replace(/_/g," ")}t.result=new y($("#wpmChart"),{type:"line",data:{labels:[],datasets:[{label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:3},pointHoverRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{axis:"y",display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1,callbacks:{afterLabel:function(e){try{$(".wordInputAfter").remove();const t=c.keypressPerSecond[parseInt(e.label)-1].words;[...new Set(t)].forEach((e=>{const t=$($("#resultWordsHistory .words .word")[e]),o=t.attr("input");null!=o&&t.append(`<div class="wordInputAfter">${o.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}</div>`)}))}catch(e){}return""}}}}}}),t.accountHistory=new y($(".pageAccount #accountHistoryChart"),{type:"line",data:{labels:[],datasets:[{yAxisID:"wpm",label:"wpm",fill:!1,data:[],borderColor:"#f44336",borderWidth:2,trendlineLinear:{style:"rgba(255,105,180, .8)",lineStyle:"dotted",width:4}},{yAxisID:"acc",label:"acc",fill:!1,data:[],borderColor:"#cccccc",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",type:"timeseries",bounds:"ticks",display:!1,offset:!0,title:{display:!1,text:"Date"}},wpm:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!0,title:{display:!0,text:"Words per Minute"}},acc:{axis:"y",beginAtZero:!0,max:100,display:!0,position:"right",title:{display:!0,text:"Error rate (100 - accuracy)"},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},enabled:!0,intersect:!1,external:function(e){e&&(e.tooltip.options.displayColors=!1)},callbacks:{title:function(){return""},beforeLabel:function(e){if(0!==e.datasetIndex){const t=e.dataset.data[e.dataIndex];return`error rate: ${f.roundTo2(t.errorRate)}%\nacc: ${f.roundTo2(100-t.errorRate)}%`}const t=e.dataset.data[e.dataIndex];let o=`${m.default.alwaysShowCPM?"cpm":"wpm"}: ${t.wpm}\nraw: ${t.raw}\nacc: ${t.acc}\n\nmode: ${t.mode} `;("time"==t.mode||"words"==t.mode)&&(o+=t.mode2);let n=t.difficulty;return null==n&&(n="normal"),o+=`\ndifficulty: ${n}`,o+=`\npunctuation: ${t.punctuation}\nlanguage: ${t.language}\n\ndate: ${(0,g.default)(new Date(t.timestamp),"dd MMM yyyy HH:mm")}`,o},label:function(){return""},afterLabel:function(e){return t.accountHistoryActiveIndex=e.dataIndex,""}}}}}}),t.accountActivity=new y($(".pageAccount #accountActivityChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Seconds",data:[],trendlineLinear:{style:"rgba(255,105,180, .8)",lineStyle:"dotted",width:2},order:3},{yAxisID:"avgWpm",label:"Average Wpm",data:[],type:"line",order:2,tension:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},type:"time",time:{unit:"day",displayFormats:{day:"d MMM"}},bounds:"ticks",display:!0,title:{display:!1,text:"Date"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Time Typing"}},avgWpm:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,position:"right",title:{display:!0,text:"Average Wpm"},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},callbacks:{title:function(e){const t=e[0].dataset.data[e[0].dataIndex];return(0,g.default)(new Date(t.x),"dd MMM yyyy")},beforeLabel:function(e){const t=e.dataset.data[e.dataIndex];switch(e.datasetIndex){case 0:return`Time Typing: ${f.secondsToString(Math.round(t.y),!0,!0)}\nTests Completed: ${t.amount}`;case 1:return`Average ${m.default.alwaysShowCPM?"Cpm":"Wpm"}: ${f.roundTo2(t.y)}`;default:return""}},label:function(){return""}}}}}}),t.miniResult=new y($(".pageAccount #miniResultChart"),{type:"line",data:{labels:[],datasets:[{label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:3},pointHoverRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1}}}}),t.updateColors=v,t.setDefaultFontFamily=b,t.updateAllChartColors=function(){p.update(),t.accountHistory.updateColors(),t.result.updateColors(),t.accountActivity.updateColors(),t.miniResult.updateColors()},h.subscribe(((e,o)=>{"chartAccuracy"===e&&(t.accountHistory.data.datasets[1].hidden=!m.default.chartAccuracy,t.accountHistory.options.scales.acc.display=m.default.chartAccuracy,t.accountHistory.update()),"chartStyle"===e&&("scatter"==m.default.chartStyle?(t.accountHistory.data.datasets[0].showLine=!1,t.accountHistory.data.datasets[1].showLine=!1):(t.accountHistory.data.datasets[0].showLine=!0,t.accountHistory.data.datasets[1].showLine=!0),t.accountHistory.updateColors()),"fontFamily"===e&&b(o)}))},3473:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(2850)),u=i(o(9881)),d=i(o(5601)),l=i(o(4310)),c=i(o(2426)),p=c,f=i(o(1003)),m=i(o(5021)),h=i(o(617)),g=i(o(7555)),y=i(o(3902)),v=i(o(9710)),b=i(o(3212)),w=i(o(5082)),C=i(o(6030)),S=i(o(8844)),_=i(o(9596)),x=i(o(4610)),T=i(o(7035)),k=i(o(3370)),M=i(o(1022)),P=i(o(249)),O=i(o(7208)),L=i(o(7970)),A=i(o(7836)),W=i(o(3053)),E=i(o(6464)),j=i(o(4375)),B=i(o(940)),D=i(o(6110)),R=i(o(6983));let q=!1,I=!0;const V=document.getElementById("wordsInput");function F(e){e!==V.value&&(V.value=e)}function K(){const e=m.roundTo2(d.calculateAccuracy());isNaN(e)||h.update(e),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&f.highlightKey(R.words.getCurrent().charAt(D.input.current.length).toString().toUpperCase())}function H(){B.get()&&0!=D.input.history.length&&0!=u.currentWordElementIndex&&(D.input.history[R.words.currentIndex-1]==R.words.get(R.words.currentIndex-1)&&!c.default.freedomMode||$($(".word")[R.words.currentIndex-1]).hasClass("hidden")||"on"!==c.default.confidenceMode&&"max"!==c.default.confidenceMode&&(D.input.current=D.input.popHistory(),D.corrected.popHistory(),"nospace"!==c.default.funbox&&"arrows"!==c.default.funbox||(D.input.current=D.input.current.slice(0,-1)),R.words.decreaseCurrentIndex(),u.setCurrentWordElementIndex(u.currentWordElementIndex-1),u.updateActiveElement(!0),y.toggleScript(R.words.getCurrent()),u.updateWordElement(),b.updatePosition(),L.addReplayEvent("backWord")))}function z(){var e;if(!B.get())return;if(""===D.input.current)return;"zen"==c.default.mode&&($("#words .word.active").removeClass("active"),$("#words").append("<div class='word active'></div>"));const t=R.words.getCurrent();if("layoutfluid"===c.default.funbox&&"time"!==c.default.mode){const t=c.default.customLayoutfluid?c.default.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"];let o=0;const n=R.words.length;o=Math.floor((D.input.history.length+1)/(n/t.length)),c.default.layout!==t[o]&&void 0!==t[o]&&C.add(`--- !!! ${t[o]} !!! ---`,0),p.setLayout(t[o]),p.setKeymapLayout(t[o]),f.highlightKey(R.words.getCurrent().charAt(D.input.current.length).toString().toUpperCase()),null===(e=x.groups.layout)||void 0===e||e.updateInput()}q=!0;const o=d.calculateBurst();g.update(Math.round(o)),D.pushBurstToHistory(o);const n=t==D.input.current||"zen"==c.default.mode;if(A.addPower(n,!0),D.incrementAccuracy(n),n)k.handleSpace(!0,t),D.input.pushHistory(),R.words.increaseCurrentIndex(),u.setCurrentWordElementIndex(u.currentWordElementIndex+1),u.updateActiveElement(),y.toggleScript(R.words.getCurrent()),b.updatePosition(),D.incrementKeypressCount(),D.pushKeypressWord(R.words.currentIndex),"nospace"!==c.default.funbox&&"arrows"!==c.default.funbox&&v.playClick(),L.addReplayEvent("submitCorrectWord");else{"nospace"!==c.default.funbox&&"arrows"!==c.default.funbox&&(!c.default.playSoundOnError||c.default.blindMode?v.playClick():v.playError()),D.pushMissedWord(R.words.getCurrent()),D.incrementKeypressErrors();const e=D.input.current.length;if(e<=R.words.getCurrent().length&&(e>=D.corrected.current.length?D.corrected.current+="_":D.corrected.current=D.corrected.current.substring(0,e)+"_"+D.corrected.current.substring(e+1)),"off"!=c.default.stopOnError)return"expert"==c.default.difficulty||"master"==c.default.difficulty?void r.fail("difficulty"):void("word"==c.default.stopOnError&&(q=!1,L.addReplayEvent("incorrectLetter","_"),u.updateWordElement(!0),b.updatePosition()));if(k.handleSpace(!1,t),c.default.blindMode&&"off"!==c.default.highlightMode&&$("#words .word.active letter").addClass("correct"),D.input.pushHistory(),u.highlightBadWord(u.currentWordElementIndex,!c.default.blindMode),R.words.increaseCurrentIndex(),u.setCurrentWordElementIndex(u.currentWordElementIndex+1),u.updateActiveElement(),y.toggleScript(R.words.getCurrent()),b.updatePosition(),D.incrementKeypressCount(),D.pushKeypressWord(R.words.currentIndex),D.updateLastKeypress(),"expert"==c.default.difficulty||"master"==c.default.difficulty)return void r.fail("difficulty");if(R.words.currentIndex==R.words.length)return void r.finish();L.addReplayEvent("submitErrorWord")}let a;a="zen"===c.default.mode?D.input.current.length:R.words.getCurrent().length;const i=m.whorf(c.default.minBurstCustomSpeed,a);if("fixed"===c.default.minBurst&&o<c.default.minBurstCustomSpeed||"flex"===c.default.minBurst&&o<i)r.fail("min burst");else{if(D.corrected.pushHistory(),!c.default.showAllLines||"time"==c.default.mode||S.isWordRandom&&0==S.word||S.isTimeRandom){const e=Math.floor(document.querySelectorAll("#words .word")[u.currentWordElementIndex-1].offsetTop);let t;try{t=Math.floor(document.querySelectorAll("#words .word")[u.currentWordElementIndex].offsetTop)}catch(e){t=0}t>e&&!u.lineTransition&&u.lineJump(e)}"react"===c.default.keymapMode&&f.flashKey(" ",!0),"words"!==c.default.mode&&"custom"!==c.default.mode&&"quote"!==c.default.mode&&"zen"!==c.default.mode||M.update(),"time"!=c.default.mode&&"words"!=c.default.mode&&"custom"!=c.default.mode&&"quote"!=c.default.mode||r.addWord()}}function N(e,t){var o,n,a,i;if(u.resultCalculating||u.resultVisible)return;if("…"===e){for(let e=0;e<3;e++)N(".",t+e);return}if("\n"===e&&"58008"===c.default.funbox&&(e=" "),"\n"!==e&&"\t"!==e&&/\s/.test(e)){if("nospace"===c.default.funbox||"arrows"===c.default.funbox)return;if(z(),!("normal"!==c.default.difficulty||c.default.strictSpace&&"zen"!==c.default.mode||"word"===c.default.stopOnError))return;if(q)return void(q=!1)}if("zen"!==c.default.mode&&"\n"!==R.words.getCurrent()[t]&&"\n"===e)return;if(!B.get()&&!r.startTest())return;P.set(!0),b.stopAnimation();const s=function(e,t){if(!I)return!1;if("zen"==c.default.mode)return!0;const o=R.words.getCurrent()[t];if(o==e)return!0;if("russian"==c.default.language.split("_")[0]){if(("е"===e||"e"===e)&&"ё"==o)return!0;if("ё"===e&&("е"==o||"e"===o))return!0}if("arrows"===c.default.funbox){if(("w"===e||"ArrowUp"===e)&&"↑"==o)return!0;if(("s"===e||"ArrowDown"===e)&&"↓"==o)return!0;if(("a"===e||"ArrowLeft"===e)&&"←"==o)return!0;if(("d"===e||"ArrowRight"===e)&&"→"==o)return!0}return!("’"!==e&&"‘"!==e&&"'"!==e||"’"!=o&&"‘"!==o&&"'"!==o)||!('"'!==e&&"”"!==e&&"“"!=e&&"„"!==e||'"'!=o&&"”"!==o&&"“"!==o&&"„"!==o)||!("–"!==e&&"—"!==e&&"-"!=e||"-"!=o&&"–"!==o&&"—"!==o)}(e,t);if(s&&"zen"!==c.default.mode&&(e=R.words.getCurrent().charAt(t)),!s&&"\n"===e){if(""===D.input.current)return;e=" "}""===D.input.current&&D.setBurstStart(performance.now());const d=D.input.current.substring(0,t)+e+D.input.current.substring(t+1);if(!s&&m.trailingComposeChars.test(d))return D.input.current=d,u.updateWordElement(),void b.updatePosition();if(A.addPower(s),D.incrementAccuracy(s),s||(D.incrementKeypressErrors(),D.pushMissedWord(R.words.getCurrent())),W.updateScore("zen"===c.default.mode?e:R.words.getCurrent()[t],s),s||!c.default.playSoundOnError||c.default.blindMode?v.playClick():v.playError(),!I&&"master"!=c.default.difficulty)return;if(""===D.corrected.current?D.corrected.current+=d:t>=D.corrected.current.length?D.corrected.current+=e:s||(D.corrected.current=D.corrected.current.substring(0,t)+e+D.corrected.current.substring(t+1)),D.incrementKeypressCount(),D.updateLastKeypress(),D.pushKeypressWord(R.words.currentIndex),"master"!==c.default.difficulty&&"letter"==c.default.stopOnError&&!s)return;if(L.addReplayEvent(s?"correctLetter":"incorrectLetter",e),1===D.input.current.length&&0===R.words.currentIndex&&u.setActiveWordTop(null===(o=document.querySelector("#words .active"))||void 0===o?void 0:o.offsetTop),("zen"===c.default.mode&&t<30||"zen"!==c.default.mode&&t<R.words.getCurrent().length+20)&&(D.input.current=d),!s&&"master"==c.default.difficulty)return D.input.pushHistory(),D.corrected.pushHistory(),void r.fail("difficulty");if("react"===c.default.keymapMode&&f.flashKey(e,s),"zen"!=c.default.mode){const e=R.words.getCurrent(),t=R.words.currentIndex;if((e==D.input.current||c.default.quickEnd&&e.length==D.input.current.length&&"off"==c.default.stopOnError)&&t==R.words.length-1)return D.input.pushHistory(),D.corrected.pushHistory(),void r.finish()}const l=null===(n=document.querySelector("#words .word.active"))||void 0===n?void 0:n.offsetTop;if(u.updateWordElement(),!c.default.hideExtraLetters&&l<(null===(a=document.querySelector("#words .word.active"))||void 0===a?void 0:a.offsetTop)&&!u.lineTransition&&D.input.current.length>1)if("zen"==c.default.mode){const e=Math.floor(null===(i=document.querySelectorAll("#words .word")[u.currentWordElementIndex-1])||void 0===i?void 0:i.offsetTop);c.default.showAllLines||u.lineJump(e)}else D.input.current=D.input.current.slice(0,-1),u.updateWordElement();(("nospace"===c.default.funbox||"arrows"===c.default.funbox)&&D.input.current.length===R.words.getCurrent().length||"\n"===e&&s)&&z(),"\n"!==e&&b.updatePosition()}$(document).keydown((e=>s(void 0,void 0,void 0,(function*(){var t;if("loading"==j.get())return e.preventDefault();const o=$("#wordsInput").is(":focus"),n="test"===j.get(),a=!$("#commandLineWrapper").hasClass("hidden"),i=!$("#leaderboardsWrapper").hasClass("hidden"),s=document.querySelectorAll(".popupWrapper");let d=!1;for(const e of s)if(1==!e.classList.contains("hidden")){d=!0;break}const p=n&&!a&&!i&&!d&&!u.resultVisible&&(o||"Enter"!==e.key);if(p&&!o&&"Enter"!==e.key&&(u.focusWords(),c.default.showOutOfFocusWarning&&e.preventDefault()),("Tab"==e.key&&!c.default.swapEscAndTab||"Escape"==e.key&&c.default.swapEscAndTab)&&function(e,t){if(u.resultCalculating&&e.preventDefault(),"test"===j.get()||!t){if($("#customTextPopup .textarea").is(":focus")){e.preventDefault();const t=$("#customTextPopup .textarea")[0],o=t.selectionStart,n=t.selectionEnd;return t.value=t.value.substring(0,o)+"\t"+t.value.substring(n),void(t.selectionStart=t.selectionEnd=o+1)}if(!u.resultCalculating&&$("#commandLineWrapper").hasClass("hidden")&&$("#simplePopupWrapper").hasClass("hidden")&&$("#quoteSubmitPopupWrapper").hasClass("hidden")&&"login"!=j.get())if("test"==j.get())if(c.default.quickTab){if($("#leaderboardsWrapper").hasClass("hidden")||E.hide(),t)return void e.preventDefault();u.resultVisible||!("zen"==c.default.mode&&!e.shiftKey||R.hasTab&&!e.shiftKey)?(e.shiftKey?w.set():w.reset(),e.preventDefault(),B.get()&&"typing"===c.default.repeatQuotes&&"quote"===c.default.mode?r.restart(!0,!1,e):r.restart(!1,!1,e)):(e.preventDefault(),N("\t",D.input.current.length),F(" "+D.input.current))}else u.resultVisible||(R.hasTab&&e.shiftKey||!R.hasTab&&"zen"!==c.default.mode||"zen"===c.default.mode&&e.shiftKey?(e.preventDefault(),$("#restartTestButton").trigger("focus")):(e.preventDefault(),N("\t",D.input.current.length),F(" "+D.input.current)));else c.default.quickTab&&(e.preventDefault(),_.change("test"))}}(e,d),p)if((null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&!u.testRestarting){if(D.spacingDebug&&console.log("spacing debug","keypress",e.key,"length",D.keypressTimings.spacing.array.length),D.recordKeypressSpacing(),D.setKeypressDuration(performance.now()),D.setKeypressNotAfk(),"Backspace"===e.key&&(v.playClick(),/INPUT|SELECT|TEXTAREA/i.test(e.target.tagName)||e.preventDefault(),"max"===c.default.confidenceMode))return void e.preventDefault();if("arrows"!==c.default.funbox&&/Arrow/i.test(e.key))e.preventDefault();else{if(l.type(),"Backspace"===e.key&&0===D.input.current.length&&(H(),D.input.current&&F(" "+D.input.current+" ")),"Enter"===e.key&&(e.shiftKey&&"zen"==c.default.mode?r.finish():e.shiftKey&&("time"==c.default.mode&&0===c.default.time||"words"==c.default.mode&&0===c.default.words)?(D.setBailout(!0),r.finish()):(N("\n",D.input.current.length),F(" "+D.input.current))),"Dead"===e.key&&!m.trailingComposeChars.test(D.input.current)){v.playClick();const e=document.querySelector("#words .word.active"),t=D.input.current.length;null==e||e.querySelectorAll("letter")[t].classList.toggle("dead")}if("off"!==c.default.oppositeShiftMode&&(I=!1!==(yield O.isUsingOppositeShift(e))),"arrows"===c.default.funbox){let t=e.key;["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(t)&&("ArrowLeft"===t&&(t="a"),"ArrowRight"===t&&(t="d"),"ArrowDown"===t&&(t="s"),"ArrowUp"===t&&(t="w"),e.preventDefault(),N(t,D.input.current.length),K(),F(" "+D.input.current))}else if("default"!==c.default.layout&&!(e.ctrlKey||e.altKey&&window.navigator.platform.search("Linux")>-1)){const t=yield T.getCharFromEvent(e);null!==t&&(e.preventDefault(),N(t,D.input.current.length),K(),F(" "+D.input.current))}}}else e.preventDefault()})))),$("#wordsInput").keyup((e=>{var t;if(!(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)||u.testRestarting)return void e.preventDefault();if(u.resultVisible)return;const o=performance.now();if(-1!==D.keypressTimings.duration.current){const e=Math.abs(D.keypressTimings.duration.current-o);D.pushKeypressDuration(e)}D.setKeypressDuration(o),l.stop()})),$("#wordsInput").on("beforeinput",(e=>{var t;(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&""===e.target.value&&(e.target.value=" ")})),$("#wordsInput").on("input",(e=>{var t;if(!(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)||u.testRestarting)return void(e.target.value=" ");D.setKeypressNotAfk();const o=e.target.value.normalize(),n=o.slice(1);if("default"!==c.default.layout&&n.length>=D.input.current.length)F(" "+D.input.current);else{if(0===o.length&&0===D.input.current.length)H();else if(n.length<D.input.current.length)D.input.current=n,u.updateWordElement(),b.updatePosition(),m.trailingComposeChars.test(D.input.current)||L.addReplayEvent("setLetterIndex",D.input.current.length);else if(n!==D.input.current){let e=0;for(;n[e]===D.input.current[e];)e++;for(let t=e;t<n.length;t++)N(n[t],t)}F(" "+D.input.current),K(),setTimeout((()=>{var t;e.target.selectionStart!==e.target.value.length&&(!m.trailingComposeChars.test(e.target.value)||(null!==(t=e.target.selectionStart)&&void 0!==t?t:0)<e.target.value.search(m.trailingComposeChars))&&(e.target.selectionStart=e.target.selectionEnd=e.target.value.length)}),0)}})),$("#wordsInput").on("focus",(e=>{e.target.selectionStart=e.target.selectionEnd=e.target.value.length})),$("#wordsInput").on("copy paste",(e=>{e.preventDefault()}))},9596:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.change=void 0;const r=i(o(5021)),u=i(o(4375)),d=i(o(4610)),l=i(o(1211)),c=i(o(5082)),p=i(o(1518)),f=i(o(9430)),m=i(o(3982)),h=i(o(8548)),g=i(o(5922));function y(e){if(g.get())return void console.log(`change page ${e} stopped`);if(console.log(`change page ${e}`),""===e&&(e="test"),null==e){let t={"/":"test","/login":"login","/settings":"settings","/about":"about","/account":"account"}[window.location.pathname];t||(t="test"),e=t}if(u.get()===e)return void console.log(`page ${e} already active`);const t={loading:h.page,test:p.page,settings:d.page,about:f.page,account:l.page,login:m.page},o=t[u.get()],n=t[e];null==o||o.beforeHide(),g.set(!0),u.set(void 0),$(".page").removeClass("active"),r.swapElements(o.element,n.element,250,(()=>{g.set(!1),u.set(n.name),null==o||o.afterHide(),n.element.addClass("active"),history.pushState(n.pathname,"",n.pathname),null==n||n.afterShow()}),(()=>s(this,void 0,void 0,(function*(){yield null==n?void 0:n.beforeShow()}))))}t.change=y,$(document).on("click","#top .logo",(()=>{y("test")})),$(document).on("click","#top #menu .icon-button",(e=>{if(!$(e.currentTarget).hasClass("leaderboards")){const t=$(e.currentTarget).attr("href");c.set(),y(t.replace("/",""))}return!1})),$(".pageTest .loginTip .link").on("click",(()=>s(void 0,void 0,void 0,(function*(){y("login")}))))},4981:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=void 0;const s=i(o(2426)),r=i(o(2541)),u=i(o(6030)),d=i(o(2850)),l=i(o(7124));t.apply=function(e){var t;null===(t=r.getSnapshot().presets)||void 0===t||t.forEach((t=>{t._id==e&&(s.apply(t.config),l.clear(!0),t.config.tags&&t.config.tags.forEach((e=>{l.set(e,!0,!1)})),d.restart(),u.add("Preset applied",1,2),s.saveFullConfigToLocalStorage())}))}},7313:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(5021),i=o(9073),s={quotes:[],length:0,language:null,groups:[]},r=new class{constructor(){this.quoteCollection=s,this.quoteQueue=[],this.queueIndex=0}getQuotes(e,t){return n(this,void 0,void 0,(function*(){const o=e.replace(/_\d*k$/g,"");if(this.quoteCollection.language!==o)try{const e=yield $.getJSON(`quotes/${o}.json`);if(void 0===e.quotes||0===e.quotes.length)return s;this.quoteCollection={quotes:[],length:e.quotes.length,groups:[],language:e.language},e.quotes.forEach((t=>{const o={text:t.text,source:t.source,length:t.length,id:t.id,language:e.language,group:0};this.quoteCollection.quotes.push(o)})),e.groups.forEach(((e,t)=>{const o=e[0],n=e[1];this.quoteCollection.groups[t]=this.quoteCollection.quotes.filter((e=>e.length>=o&&e.length<=n&&(e.group=t,!0)))})),void 0!==t&&this.updateQuoteQueue(t)}catch(e){return s}return this.quoteCollection}))}getQuoteById(e){return this.quoteCollection.quotes.find((t=>t.id===e))}updateQuoteQueue(e){this.quoteQueue=[],e.forEach((e=>{var t;e<0||null===(t=this.quoteCollection.groups[e])||void 0===t||t.forEach((e=>{this.quoteQueue.push(e)}))})),(0,a.shuffle)(this.quoteQueue),this.queueIndex=0}getRandomQuote(){if(0===this.quoteQueue.length)return null;this.queueIndex>=this.quoteQueue.length&&(this.queueIndex=0,(0,a.shuffle)(this.quoteQueue));const e=this.quoteQueue[this.queueIndex];return this.queueIndex+=1,e}getCurrentQuote(){return 0===this.quoteQueue.length?null:this.quoteQueue[this.queueIndex]}};(0,i.subscribe)(((e,t)=>{"quoteLength"===e&&r.updateQuoteQueue(t)})),t.default=r},6018:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.handleInitialPageClasses=void 0;const s=i(o(9596)),r=i(o(4375)),u=o(9280),d={"/":"pageLoading","/login":"pageLoading","/settings":"pageLoading","/about":"pageLoading","/account":"pageAccount","/verify":"pageLoading"};t.handleInitialPageClasses=function(e){d[e]||(e="/");const t=$(".page."+d[e]);$(t).removeClass("hidden"),$(t).addClass("active");let o="loading";"/account"===e&&(o="account"),r.set(o)},$(window).on("popstate",(e=>{const t=e.originalEvent.state;""==t||"/"==t?s.change("test"):"about"==t?s.change("about"):"account"!=t&&"login"!=t||(u.Auth.currentUser?s.change("account"):s.change("login"))}))},9710:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setVolume=t.playError=t.playClick=t.previewClick=t.init=t.initErrorSound=void 0;const r=s(o(2426)),u=i(o(1766)),d=i(o(9073)),l=o(5021);let c=null,p=null;function f(){null===c&&(c=new u.Howl({src:["../sound/error.wav"]}))}function m(){null===p&&(p={1:[{sounds:[new u.Howl({src:"../sound/click1/click1_1.wav"}),new u.Howl({src:"../sound/click1/click1_1.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click1/click1_2.wav"}),new u.Howl({src:"../sound/click1/click1_2.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click1/click1_3.wav"}),new u.Howl({src:"../sound/click1/click1_3.wav"})],counter:0}],2:[{sounds:[new u.Howl({src:"../sound/click2/click2_1.wav"}),new u.Howl({src:"../sound/click2/click2_1.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click2/click2_2.wav"}),new u.Howl({src:"../sound/click2/click2_2.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click2/click2_3.wav"}),new u.Howl({src:"../sound/click2/click2_3.wav"})],counter:0}],3:[{sounds:[new u.Howl({src:"../sound/click3/click3_1.wav"}),new u.Howl({src:"../sound/click3/click3_1.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click3/click3_2.wav"}),new u.Howl({src:"../sound/click3/click3_2.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click3/click3_3.wav"}),new u.Howl({src:"../sound/click3/click3_3.wav"})],counter:0}],4:[{sounds:[new u.Howl({src:"../sound/click4/click4_1.wav"}),new u.Howl({src:"../sound/click4/click4_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_2.wav"}),new u.Howl({src:"../sound/click4/click4_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_3.wav"}),new u.Howl({src:"../sound/click4/click4_33.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_4.wav"}),new u.Howl({src:"../sound/click4/click4_44.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_5.wav"}),new u.Howl({src:"../sound/click4/click4_55.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_6.wav"}),new u.Howl({src:"../sound/click4/click4_66.wav"})],counter:0}],5:[{sounds:[new u.Howl({src:"../sound/click5/click5_1.wav"}),new u.Howl({src:"../sound/click5/click5_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_2.wav"}),new u.Howl({src:"../sound/click5/click5_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_3.wav"}),new u.Howl({src:"../sound/click5/click5_33.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_4.wav"}),new u.Howl({src:"../sound/click5/click5_44.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_5.wav"}),new u.Howl({src:"../sound/click5/click5_55.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_6.wav"}),new u.Howl({src:"../sound/click5/click5_66.wav"})],counter:0}],6:[{sounds:[new u.Howl({src:"../sound/click6/click6_1.wav"}),new u.Howl({src:"../sound/click6/click6_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click6/click6_2.wav"}),new u.Howl({src:"../sound/click6/click6_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click6/click6_3.wav"}),new u.Howl({src:"../sound/click6/click6_33.wav"})],counter:0}],7:[{sounds:[new u.Howl({src:"../sound/click7/click7_1.wav"}),new u.Howl({src:"../sound/click7/click7_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click7/click7_2.wav"}),new u.Howl({src:"../sound/click7/click7_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click7/click7_3.wav"}),new u.Howl({src:"../sound/click7/click7_33.wav"})],counter:0}]})}function h(e){u.default.Howler.volume(e)}t.initErrorSound=f,t.init=m,t.previewClick=function(e){null===p&&m(),p[e][0].sounds[0].seek(0),p[e][0].sounds[0].play()},t.playClick=function(){if("off"===r.default.playSoundOnClick)return;null===p&&m();const e=(0,l.randomElementFromArray)(p[r.default.playSoundOnClick]);e.counter++,2===e.counter&&(e.counter=0),e.sounds[e.counter].seek(0),e.sounds[e.counter].play()},t.playError=function(){r.default.playSoundOnError&&(null===c&&f(),c.seek(0),c.play())},t.setVolume=h,d.subscribe(((e,t)=>{"playSoundOnClick"===e&&"off"!==t&&m(),"soundVolume"===e&&h(t)}))},7124:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadActiveFromLocalStorage=t.toggle=t.set=t.clear=t.saveActiveToLocalStorage=void 0;const s=i(o(2541)),r=i(o(6203));function u(){var e;const t=[];try{null===(e=s.getSnapshot().tags)||void 0===e||e.forEach((e=>{!0===e.active&&t.push(e._id)})),window.localStorage.setItem("activeTags",JSON.stringify(t))}catch(e){}}function d(e,t=!1){var o;null===(o=s.getSnapshot().tags)||void 0===o||o.forEach((t=>{t._id===e&&(void 0===t.active?t.active=!0:t.active=!t.active)})),r.update(),t||u()}t.saveActiveToLocalStorage=u,t.clear=function(e=!1){var t;const o=s.getSnapshot();o.tags=null===(t=o.tags)||void 0===t?void 0:t.map((e=>(e.active=!1,e))),s.setSnapshot(o),r.update(),e||u()},t.set=function(e,t,o=!1){var n;const a=s.getSnapshot();a.tags=null===(n=a.tags)||void 0===n?void 0:n.map((o=>(o._id===e&&(o.active=t),o))),s.setSnapshot(a),r.update(),o||u()},t.toggle=d,t.loadActiveFromLocalStorage=function(){var e;let t=window.localStorage.getItem("activeTags");if(null!=t&&""!==t){try{t=null!==(e=JSON.parse(t))&&void 0!==e?e:[]}catch(e){t=[]}t.forEach((e=>{d(e,!0)})),u()}}},4094:function(e,t,o){var n,a,i=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&i(t,e,o);return s(t,e),t},u=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCustomBackground=t.applyCustomBackgroundSize=t.clearRandom=t.randomizeTheme=t.clearPreview=t.set=t.preview=t.colorVars=t.randomTheme=void 0;const d=r(o(2614)),l=r(o(8185)),c=r(o(5021)),p=r(o(2426)),f=p,m=r(o(9519)),h=r(o(9073)),g=r(o(2541)),y=r(o(6030)),v=r(o(394));let b=!1;function w(e,o,n=!1){t.colorVars.forEach((e=>{document.documentElement.style.setProperty(e,"")}));let a="serika_dark";a=o?"custom":e,d.reset(),$(".keymap-key").attr("style",""),function(e){return u(this,void 0,void 0,(function*(){return new Promise((t=>{const o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.id="currentTheme",o.onload=()=>{t()},o.href="custom"===e?"themes/serika_dark.css":`themes/${e}.css`,document.querySelector("#currentTheme").replaceWith(o)}))}))}(a).then((()=>{var a,i;if(d.update(),o){let s=p.default.customThemeColors;const r=g.getSnapshot();if(o&&!n&&r){const t=null!==(i=null===(a=r.customThemes.find((t=>t._id===e)))||void 0===a?void 0:a.colors)&&void 0!==i?i:[];t.length>0&&f.setCustomThemeColors(t)}if("custom"!==e&&r){const t=r.customThemes.find((t=>t._id===e));s=null==t?void 0:t.colors}t.colorVars.forEach(((e,t)=>{document.documentElement.style.setProperty(e,s[t])}))}v.log("changedTheme",{theme:e}),n||d.getAll().then((e=>{$(".keymap-key").attr("style",""),l.updateAllChartColors(),function(e,t){u(this,void 0,void 0,(function*(){setTimeout((()=>u(this,void 0,void 0,(function*(){let o,n;if(n=yield d.get("bg"),o=yield d.get("main"),"localhost"===window.location.hostname){const e=o;o=n,n=e}n==o&&(n="#111",o="#eee");const a=document.createElement("canvas");a.width=e,a.height=e;const i=a.getContext("2d");i.beginPath(),i.moveTo(0,t),i.quadraticCurveTo(0,0,t,0),i.lineTo(96,0),i.quadraticCurveTo(e,0,e,t),i.lineTo(e,96),i.quadraticCurveTo(e,e,96,e),i.lineTo(t,e),i.quadraticCurveTo(0,e,0,96),i.fillStyle=n,i.fill(),i.font="900 76.8px Lexend Deca",i.textAlign="center",i.fillStyle=o,i.fillText("mt",65,89.6),$("#favicon").attr("href",a.toDataURL("image/png"))}))),125)}))}(128,32),$("#metaThemeColor").attr("content",e.bg)})),$(".current-theme .text").text(o?"custom":e.replace(/_/g," "))}))}function C(e,t,o=!1){b=!0,w(e,t,!o)}function S(e,t){w(e,t)}function _(){b&&(b=!1,t.randomTheme=null,p.default.customTheme?w("custom",!0):w(p.default.theme,!1))}function x(){null!==t.randomTheme&&(t.randomTheme=null,p.default.customTheme?w("custom",!0):w(p.default.theme,!1))}function T(){"max"==p.default.customBackgroundSize?$(".customBackground img").css({objectFit:""}):$(".customBackground img").css({objectFit:p.default.customBackgroundSize})}function k(){""===p.default.customBackground?($("#words").removeClass("noErrorBorder"),$("#resultWordsHistory").removeClass("noErrorBorder"),$(".customBackground img").remove()):($("#words").addClass("noErrorBorder"),$("#resultWordsHistory").addClass("noErrorBorder"),$(".customBackground").html(`<img src="${p.default.customBackground}" />`),m.apply(),T())}t.randomTheme=null,t.colorVars=["--bg-color","--main-color","--caret-color","--sub-color","--text-color","--error-color","--error-extra-color","--colorful-error-color","--colorful-error-extra-color"],t.preview=C,t.set=S,t.clearPreview=_,t.randomizeTheme=function(){let e;c.getThemesList().then((o=>{var n,a;e="fav"===p.default.randomTheme&&p.default.favThemes.length>0?p.default.favThemes:"light"===p.default.randomTheme?o.filter((e=>c.isColorLight(e.bgColor))).map((e=>e.name)):"dark"===p.default.randomTheme?o.filter((e=>c.isColorDark(e.bgColor))).map((e=>e.name)):"on"===p.default.randomTheme?o.map((e=>e.name)):g.getSnapshot().customThemes.map((e=>e._id));const i=t.randomTheme;if(t.randomTheme=c.randomElementFromArray(e),C(t.randomTheme,"custom"===p.default.randomTheme),i!=t.randomTheme){let e=t.randomTheme.replace(/_/g," ");"custom"===p.default.randomTheme&&(e=(null!==(a=null===(n=g.getSnapshot().customThemes.find((e=>e._id===t.randomTheme)))||void 0===n?void 0:n.name)&&void 0!==a?a:"custom").replace(/_/g," ")),y.add(e,0)}}))},t.clearRandom=x,t.applyCustomBackgroundSize=T,t.applyCustomBackground=k,null===(a=null===(n=window.matchMedia)||void 0===n?void 0:n.call(window,"(prefers-color-scheme: dark)"))||void 0===a||a.addEventListener("change",(e=>{p.default.autoSwitchTheme&&!p.default.customTheme&&(e.matches?S(p.default.themeDark,!1):S(p.default.themeLight,!1))})),h.subscribe(((e,t,o)=>{"customTheme"===e&&(t?S("custom",!0):S(p.default.theme,!1)),"customThemeColors"===e&&(o?C("custom",!0):S("custom",!0)),"theme"===e&&(_(),S(t,!1)),"setThemes"===e&&(_(),t?S("custom",!0):p.default.autoSwitchTheme?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?S(p.default.themeDark,!1):S(p.default.themeLight,!1):S(p.default.theme,!1)),"randomTheme"===e&&"off"===t&&x(),"customBackground"===e&&k(),"customBackgroundSize"===e&&T(),"autoSwitchTheme"===e&&(t?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?S(p.default.themeDark,!1):S(p.default.themeLight,!1):S(p.default.theme,!1)),"themeLight"!==e||!p.default.autoSwitchTheme||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||o||S(p.default.themeLight,!1),"themeDark"===e&&p.default.autoSwitchTheme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&!o&&S(p.default.themeDark,!1)}))},2229:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.set=t.data=void 0;const u=r(o(9063)),d=i(o(6030)),l=i(o(4610)),c=i(o(2541)),p=i(o(8308));t.data=null,t.set=function(e){t.data=e},t.verify=function(e){return s(this,void 0,void 0,(function*(){if(null===t.data)return;d.add("Linking Discord account",0,3),p.show(),t.data.uid=e;const o=yield u.default.users.linkDiscord(t.data);if(p.hide(),200!==o.status)return d.add("Failed to link Discord: "+o.message,-1);d.add("Accounts linked",1);const n=c.getSnapshot();n.discordId=o.data.did,c.setSnapshot(n),l.updateDiscordSection()}))}},2541:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocalStats=t.saveLocalResult=t.saveConfig=t.updateLbMemory=t.saveLocalTagPB=t.getLocalTagPB=t.saveLocalPB=t.getLocalPB=t.getUserAverage10=t.getUserHighestWpm=t.deleteCustomTheme=t.editCustomTheme=t.addCustomTheme=t.getCustomThemeById=t.getUserResults=t.initSnapshot=t.setSnapshot=t.getSnapshot=void 0;const u=r(o(9063)),d=i(o(2734)),l=i(o(6030)),c=i(o(8548)),p=r(o(1457)),f=o(9280),m=o(4126);let h;function g(){return h}function y(e){try{delete e.banned}catch(e){}try{delete e.verified}catch(e){}h=e}function v(){return s(this,void 0,void 0,(function*(){if(null==f.Auth.currentUser)return!1;if(null===h)return!1;if(void 0!==h.results)return!0;{c.updateText("Downloading results..."),c.updateBar(90);const e=yield u.default.results.get();if(200!==e.status)return l.add("Error getting results: "+e.message,-1),!1;const t=e.data;return t.forEach((e=>{void 0===e.bailedOut&&(e.bailedOut=!1),void 0===e.blindMode&&(e.blindMode=!1),void 0===e.lazyMode&&(e.lazyMode=!1),void 0===e.difficulty&&(e.difficulty="normal"),void 0===e.funbox&&(e.funbox="none"),void 0!==e.language&&null!==e.language||(e.language="english"),void 0===e.numbers&&(e.numbers=!1),void 0===e.punctuation&&(e.punctuation=!1)})),h.results=null==t?void 0:t.sort(((e,t)=>t.timestamp-e.timestamp)),!0}}))}t.getSnapshot=g,t.setSnapshot=y,t.initSnapshot=function(){var e,t,o,n,a;return s(this,void 0,void 0,(function*(){const i=m.defaultSnap;try{if(null==f.Auth.currentUser)return!1;const[s,r,d,l]=yield Promise.all([u.default.users.getData(),u.default.configs.get(),u.default.users.getTags(),u.default.presets.get()]);if(200!==s.status)throw{message:`${s.message} (user)`,responseCode:s.status};if(200!==r.status)throw{message:`${r.message} (config)`,responseCode:r.status};if(200!==d.status)throw{message:`${d.message} (tags)`,responseCode:d.status};if(200!==l.status)throw{message:`${l.message} (presets)`,responseCode:l.status};const[c,m,g,y]=[s,r,d,l].map((e=>e.data));if(i.name=c.name,i.personalBests=c.personalBests,i.banned=c.banned,i.verified=c.verified,i.discordId=c.discordId,i.globalStats={time:c.timeTyping,started:c.startedTests,completed:c.completedTests},!0===c.quoteMod&&(i.quoteMod=!0),i.quoteRatings=c.quoteRatings,i.favouriteThemes=void 0===c.favouriteThemes?[]:c.favouriteThemes,(null===(e=c.lbMemory)||void 0===e?void 0:e.time15)||(null===(t=c.lbMemory)||void 0===t?void 0:t.time60)?i.lbMemory={}:c.lbMemory&&(i.lbMemory=c.lbMemory),m){const e=Object.assign({},p.default);for(const t in m.config){const o=m.config[t];e[t]=o}i.config=e}return i.customThemes=null!==(o=c.customThemes)&&void 0!==o?o:[],i.tags=g,i.tags=null===(n=i.tags)||void 0===n?void 0:n.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),i.presets=y,i.presets=null===(a=i.presets)||void 0===a?void 0:a.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),h=i,h}catch(e){throw h=m.defaultSnap,e}}))},t.getUserResults=v,t.getCustomThemeById=function(e){return h.customThemes.find((t=>t._id===e))},t.addCustomTheme=function(e){return s(this,void 0,void 0,(function*(){if(null===h)return!1;if(h.customThemes.length>=10)return l.add("Too many custom themes!",0),!1;const t=yield u.default.users.addCustomTheme(e);if(200!==t.status)return l.add("Error adding custom theme: "+t.message,-1),!1;const o=Object.assign(Object.assign({},e),{_id:t.data.theme._id});return h.customThemes.push(o),!0}))},t.editCustomTheme=function(e,t){return s(this,void 0,void 0,(function*(){if(null===f.Auth.currentUser)return!1;if(null===h)return!1;const o=h.customThemes.find((t=>t._id===e));if(!o)return l.add("Editing failed: Custom theme with id: "+e+" does not exist",-1),!1;const n=yield u.default.users.editCustomTheme(e,t);if(200!==n.status)return l.add("Error editing custom theme: "+n.message,-1),!1;const a=Object.assign(Object.assign({},t),{_id:e});return h.customThemes[h.customThemes.indexOf(o)]=a,!0}))},t.deleteCustomTheme=function(e){return s(this,void 0,void 0,(function*(){if(null===f.Auth.currentUser)return!1;if(null===h)return!1;if(!h.customThemes.find((t=>t._id===e)))return!1;const t=yield u.default.users.deleteCustomTheme(e);return 200!==t.status?(l.add("Error deleting custom theme: "+t.message,-1),!1):(h.customThemes=h.customThemes.filter((t=>t._id!==e)),!0)}))},t.getUserHighestWpm=function(e,t,o,n,a,i){return s(this,void 0,void 0,(function*(){return null===h||void 0===h.results?0:function(){var s;let r=0;return null===(s=h.results)||void 0===s||s.forEach((s=>{s.mode==e&&s.mode2==t&&s.punctuation==o&&s.language==n&&s.difficulty==a&&(s.lazyMode===i||void 0===s.lazyMode&&!1===i)&&s.wpm>r&&(r=s.wpm)})),r}()}))},t.getUserAverage10=function(e,t,o,n,a,i){return s(this,void 0,void 0,(function*(){const s=g();return null===s||null===(yield v())?[0,0]:function(){var r;const u=[];null===(r=s.tags)||void 0===r||r.forEach((e=>{!0===e.active&&u.push(e._id)}));let d=0,l=0,c=0,p=0,f=0,m=0;if(void 0!==s.results)for(const r of s.results)if(r.mode===e&&r.punctuation===o&&r.language===n&&r.difficulty===a&&(r.lazyMode===i||void 0===r.lazyMode&&!1===i)&&(0===u.length||u.some((e=>r.tags.includes(e))))){if(r.mode2!==t&&"quote"!==e)continue;if(m<10&&(c+=r.wpm,p+=r.acc,m++),r.mode2===t&&(d+=r.wpm,l+=r.acc,f++,f>=10))break}return 0===f&&"quote"===e?[c/m,p/m]:[d/f,l/f]}()}))},t.getLocalPB=function(e,t,o,n,a,i,r){return s(this,void 0,void 0,(function*(){return"none"!==r&&"plus_one"!==r&&"plus_two"!==r||null===h?0:function(){let s=0;try{return h.personalBests?(h.personalBests[e][t].forEach((e=>{e.punctuation==o&&e.difficulty==a&&e.language==n&&(e.lazyMode===i||void 0===e.lazyMode&&!1===i)&&(s=e.wpm)})),s):s}catch(e){return s}}()}))},t.saveLocalPB=function(e,t,o,n,a,i,r,u,d,l){return s(this,void 0,void 0,(function*(){"quote"!=e&&null!=h&&function(){let s=!1;void 0===h.personalBests&&(h.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}}),void 0===h.personalBests[e]&&("zen"===e?h.personalBests.zen={zen:[]}:h.personalBests[e]={custom:[]}),void 0===h.personalBests[e][t]&&(h.personalBests[e][t]=[]),h.personalBests[e][t].forEach((e=>{e.punctuation==o&&e.difficulty==a&&e.language==n&&(e.lazyMode===i||void 0===e.lazyMode&&!1===i)&&(s=!0,e.wpm=r,e.acc=u,e.raw=d,e.timestamp=Date.now(),e.consistency=l,e.lazyMode=i)})),s||h.personalBests[e][t].push({language:n,difficulty:a,lazyMode:i,punctuation:o,wpm:r,acc:u,raw:d,timestamp:Date.now(),consistency:l})}()}))},t.getLocalTagPB=function(e,t,o,n,a,i,r){return s(this,void 0,void 0,(function*(){return null===h?0:function(){var s,u;let d=0;const l=(null!==(s=g().tags)&&void 0!==s?s:[]).filter((t=>t._id===e))[0];if(void 0===l)return d;void 0===l.personalBests&&(l.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}});try{(null!==(u=l.personalBests[t][o])&&void 0!==u?u:[]).forEach((e=>{e.punctuation==n&&e.difficulty==i&&e.language==a&&(e.lazyMode===r||void 0===e.lazyMode&&!1===r)&&(d=e.wpm)}))}catch(e){console.log(e)}return d}()}))},t.saveLocalTagPB=function(e,t,o,n,a,i,r,u,d,l,c){return s(this,void 0,void 0,(function*(){"quote"!=t&&null!=h&&function(){var s;const p=null===(s=h.tags)||void 0===s?void 0:s.filter((t=>t._id===e))[0];p.personalBests||(p.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}});try{let e=!1;void 0===p.personalBests[t][o]&&(p.personalBests[t][o]=[]),p.personalBests[t][o].forEach((t=>{t.punctuation==n&&t.difficulty==i&&t.language==a&&(t.lazyMode===r||void 0===t.lazyMode&&!1===r)&&(e=!0,t.wpm=u,t.acc=d,t.raw=l,t.timestamp=Date.now(),t.consistency=c,t.lazyMode=r)})),e||p.personalBests[t][o].push({language:a,difficulty:i,lazyMode:r,punctuation:n,wpm:u,acc:d,raw:l,timestamp:Date.now(),consistency:c})}catch(e){p.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}},"zen"===t?p.personalBests.zen={zen:[]}:p.personalBests[t]={custom:[]},p.personalBests[t][o]=[{language:a,difficulty:i,lazyMode:r,punctuation:n,wpm:u,acc:d,raw:l,timestamp:Date.now(),consistency:c}]}}()}))},t.updateLbMemory=function(e,t,o,n,a=!1){return s(this,void 0,void 0,(function*(){if("time"===e){const i=e,s=t,r=g();void 0===r.lbMemory&&(r.lbMemory={time:{15:{english:0},60:{english:0}}}),void 0===r.lbMemory[i]&&(r.lbMemory[i]={15:{english:0},60:{english:0}}),void 0===r.lbMemory[i][s]&&(r.lbMemory[i][s]={});const d=r.lbMemory[i][s][o];r.lbMemory[i][s][o]=n,a&&d!=n&&(yield u.default.users.updateLeaderboardMemory(e,t,o,n)),y(r)}}))},t.saveConfig=function(e){return s(this,void 0,void 0,(function*(){if(null!==f.Auth.currentUser){d.loading(!0);const t=yield u.default.configs.save(e);200!==t.status&&l.add("Failed to save config: "+t.message,-1),d.loading(!1)}}))},t.saveLocalResult=function(e){const t=g();null!==t&&void 0!==t.results&&(t.results.unshift(e),y(t))},t.updateLocalStats=function(e){const t=g();void 0===t.globalStats&&(t.globalStats={}),null!==t&&void 0!==t.globalStats&&(null==t.globalStats.time?t.globalStats.time=e.time:t.globalStats.time+=e.time,null==t.globalStats.started?t.globalStats.started=e.started:t.globalStats.started+=e.started,null==t.globalStats.completed?t.globalStats.completed=1:t.globalStats.completed+=1),y(t)}},2734:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.loading=void 0;const s=o(9280),r=i(o(5021));t.loading=function(e){e?($("#top #menu .account .icon").html('<i class="fas fa-fw fa-spin fa-circle-notch"></i>'),$("#top #menu .account").css("opacity",1).css("pointer-events","none")):($("#top #menu .account .icon").html('<i class="fas fa-fw fa-user"></i>'),$("#top #menu .account").css("opacity",1).css("pointer-events","auto"))},t.update=function(){null!=s.Auth.currentUser?r.swapElements($("#menu .icon-button.login"),$("#menu .icon-button.account"),250):r.swapElements($("#menu .icon-button.account"),$("#menu .icon-button.login"),250)}},1112:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getList=t.pushCurrent=t.setCurrent=t.defaultCommands=t.updateThemeCommands=t.commandsChallenges=t.themeCommands=t.updateCustomThemeListCommands=t.customThemeListCommands=t.customThemeCommands=t.commandsEnableAds=t.updatePresetCommands=t.updateTagCommands=t.commandsKeymapLayouts=t.current=void 0;const r=i(o(2541)),u=i(o(5021)),d=i(o(6030)),l=i(o(9710)),c=i(o(4094)),p=i(o(5895)),f=i(o(5082)),m=i(o(2426)),h=m,g=i(o(1243)),y=i(o(9881)),v=i(o(2850)),b=i(o(3902)),w=i(o(7124)),C=i(o(4981)),S=i(o(8844)),_=i(o(4610)),x=i(o(5369)),T=i(o(3370)),k=i(o(6110)),M=i(o(6203)),P=i(o(9073)),O=o(9280);function L(){return"custom"===m.default.mode&&S.isWordRandom&&(S.word>=5e3||0==S.word)||"custom"===m.default.mode&&!S.isWordRandom&&!S.isTimeRandom&&S.text.length>=5e3||"custom"===m.default.mode&&S.isTimeRandom&&(S.time>=3600||0==S.time)||"words"===m.default.mode&&m.default.words>=5e3||0===m.default.words||"time"===m.default.mode&&(m.default.time>=3600||0===m.default.time)||"zen"==m.default.mode}t.current=[];const A={title:"Layout emulator...",configKey:"layout",list:[{id:"couldnotload",display:"Could not load the layouts list :("}]};u.getLayoutsList().then((e=>{A.list=[],A.list.push({id:"changeLayoutDefault",display:"off",configValue:"default",exec:()=>{h.setLayout("default"),v.restart()}}),Object.keys(e).forEach((e=>{A.list.push({id:"changeLayout"+u.capitalizeFirstLetterOfEachWord(e),display:"default"===e?"off":e.replace(/_/g," "),configValue:e,exec:()=>{h.setLayout(e),v.restart()}})}))})),t.commandsKeymapLayouts={title:"Change keymap layout...",configKey:"keymapLayout",list:[{id:"couldnotload",display:"Could not load the layouts list :("}]},u.getLayoutsList().then((e=>{t.commandsKeymapLayouts.list=[],t.commandsKeymapLayouts.list.push({id:"changeKeymapLayoutOverrideSync",display:"emulator sync",configValue:"overrideSync",exec:()=>{h.setKeymapLayout("overrideSync"),v.restart()}}),Object.keys(e).forEach((e=>{"default"!=e.toString()&&t.commandsKeymapLayouts.list.push({id:"changeKeymapLayout"+u.capitalizeFirstLetterOfEachWord(e),display:e.replace(/_/g," "),configValue:e,exec:()=>{h.setKeymapLayout(e),v.restart()}})}))}));const W={title:"Language...",configKey:"language",list:[]};u.getLanguageList().then((e=>{e.forEach((e=>{W.list.push({id:"changeLanguage"+u.capitalizeFirstLetterOfEachWord(e),display:e.replace(/_/g," "),configValue:e,exec:()=>{h.setLanguage(e),v.restart()}})}))}));const E={title:"Funbox...",configKey:"funbox",list:[{id:"changeFunboxNone",display:"none",configValue:"none",alias:"off",exec:()=>{b.setFunbox("none",null)&&v.restart()}}]};u.getFunboxList().then((e=>{e.forEach((e=>{E.list.push({id:"changeFunbox"+e.name,display:e.name.replace(/_/g," "),configValue:e.name,exec:()=>{b.setFunbox(e.name,e.type)&&v.restart()}})}))}));const j={title:"Font family...",configKey:"fontFamily",list:[]};u.getFontsList().then((e=>{e.forEach((e=>{j.list.push({id:"changeFont"+e.name.replace(/ /g,"_"),display:void 0!==e.display?e.display:e.name,configValue:e.name,hover:()=>{h.previewFontFamily(e.name)},exec:()=>{h.setFontFamily(e.name.replace(/ /g,"_"))}})})),j.list.push({id:"setFontFamilyCustom",display:"custom...",input:!0,hover:()=>{h.previewFontFamily(m.default.fontFamily)},exec:e=>{e&&h.setFontFamily(e.replace(/\s/g,"_"))}})}));const B={title:"Change tags...",list:[]};function D(){var e,t,o,n;null!==(o=null===(t=null===(e=r.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t?void 0:t.length)&&void 0!==o&&o&&(B.list=[],B.list.push({id:"clearTags",display:"Clear tags",icon:"fa-times",exec:()=>{var e;const t=r.getSnapshot();t.tags=null===(e=t.tags)||void 0===e?void 0:e.map((e=>(e.active=!1,e))),r.setSnapshot(t),M.update(),w.saveActiveToLocalStorage()}}),null===(n=r.getSnapshot().tags)||void 0===n||n.forEach((e=>{let t=e.name;t=!0===e.active?'<i class="fas fa-fw fa-check"></i>'+t:'<i class="fas fa-fw"></i>'+t,B.list.push({id:"toggleTag"+e._id,noIcon:!0,display:t,sticky:!0,exec:()=>{w.toggle(e._id),M.update(),"average"===m.default.paceCaret&&(T.init(),M.update());let t=e.name;t=!0===e.active?'<i class="fas fa-fw fa-check"></i>'+t:'<i class="fas fa-fw"></i>'+t,$("#commandLine").hasClass("allCommands")?$(`#commandLine .suggestions .entry[command='toggleTag${e._id}']`).html('<div class="icon"><i class="fas fa-fw fa-tag"></i></div><div>Tags  > '+t):$(`#commandLine .suggestions .entry[command='toggleTag${e._id}']`).html(t)}})})))}t.updateTagCommands=D;const R={title:"Presets...",list:[]};function q(){const e=r.getSnapshot();e&&e.presets&&0!==e.presets.length&&(R.list=[],e.presets.forEach((e=>{const t=e.name;R.list.push({id:"applyPreset"+e._id,display:t,exec:()=>{_.setEventDisabled(!0),C.apply(e._id),_.setEventDisabled(!1),_.update(),M.update()}})})))}t.updatePresetCommands=q;const I={title:"Repeat quotes...",configKey:"repeatQuotes",list:[{id:"setRepeatQuotesOff",display:"off",configValue:"off",exec:()=>{h.setRepeatQuotes("off")}},{id:"setRepeatQuotesTyping",display:"typing",configValue:"typing",exec:()=>{h.setRepeatQuotes("typing")}}]},V={title:"Live WPM...",configKey:"showLiveWpm",list:[{id:"setLiveWpmOff",display:"off",configValue:!1,exec:()=>{h.setShowLiveWpm(!1)}},{id:"setLiveWpmOn",display:"on",configValue:!0,exec:()=>{h.setShowLiveWpm(!0)}}]},F={title:"Show average...",configKey:"showAverage",list:[{id:"setShowAverageOff",display:"off",configValue:"off",exec:()=>{h.setShowAverage("off")}},{id:"setShowAverageSpeed",display:"wpm",configValue:"wpm",exec:()=>{h.setShowAverage("wpm")}},{id:"setShowAverageAcc",display:"accuracy",configValue:"acc",exec:()=>{h.setShowAverage("acc")}},{id:"setShowAverageBoth",display:"both",configValue:"both",exec:()=>{h.setShowAverage("both")}}]},K={title:"Live accuracy...",configKey:"showLiveAcc",list:[{id:"setLiveAccOff",display:"off",configValue:!1,exec:()=>{h.setShowLiveAcc(!1)}},{id:"setLiveAccOn",display:"on",configValue:!0,exec:()=>{h.setShowLiveAcc(!0)}}]},H={title:"Live burst...",configKey:"showLiveBurst",list:[{id:"setLiveBurstOff",display:"off",configValue:!1,exec:()=>{h.setShowLiveBurst(!1)}},{id:"setLiveBurstOn",display:"on",configValue:!0,exec:()=>{h.setShowLiveBurst(!0)}}]},z={title:"Timer/progress...",configKey:"showTimerProgress",list:[{id:"setTimerProgressOff",display:"off",configValue:!1,exec:()=>{h.setShowTimerProgress(!1)}},{id:"setTimerProgressOn",display:"on",configValue:!0,exec:()=>{h.setShowTimerProgress(!0)}}]},N={title:"Key tips...",configKey:"showKeyTips",list:[{id:"setKeyTipsOff",display:"off",configValue:!1,exec:()=>{h.setKeyTips(!1)}},{id:"setKeyTipsOn",display:"on",configValue:!0,exec:()=>{h.setKeyTips(!0)}}]},Q={title:"Freedom mode...",configKey:"freedomMode",list:[{id:"setfreedomModeOff",display:"off",configValue:!1,exec:()=>{h.setFreedomMode(!1)}},{id:"setfreedomModeOn",display:"on",configValue:!0,exec:()=>{h.setFreedomMode(!0)}}]},U={title:"Strict space...",configKey:"strictSpace",list:[{id:"setStrictSpaceOff",display:"off",configValue:!1,exec:()=>{h.setStrictSpace(!1)}},{id:"setStrictSpaceOn",display:"on",configValue:!0,exec:()=>{h.setStrictSpace(!0)}}]},G={title:"Blind mode...",configKey:"blindMode",list:[{id:"setBlindModeOff",display:"off",configValue:!1,exec:()=>{h.setBlindMode(!1)}},{id:"setBlindModeOn",display:"on",configValue:!0,exec:()=>{h.setBlindMode(!0)}}]},J={title:"Always show words history...",configKey:"alwaysShowWordsHistory",list:[{id:"setAlwaysShowWordsHistoryOff",display:"off",configValue:!1,exec:()=>{h.setAlwaysShowWordsHistory(!1)}},{id:"setAlwaysShowWordsHistoryOn",display:"on",configValue:!0,exec:()=>{h.setAlwaysShowWordsHistory(!0)}}]},Z={title:"Indicate typos...",configKey:"indicateTypos",list:[{id:"setIndicateTyposOff",display:"off",configValue:"off",exec:()=>{h.setIndicateTypos("off")}},{id:"setIndicateTyposBelow",display:"below",configValue:"below",exec:()=>{h.setIndicateTypos("below")}},{id:"setIndicateTyposReplace",display:"replace",configValue:"replace",exec:()=>{h.setIndicateTypos("replace")}}]},Y={title:"Hide extra letters...",configKey:"hideExtraLetters",list:[{id:"setHideExtraLettersOff",display:"off",configValue:!1,exec:()=>{h.setHideExtraLetters(!1)}},{id:"setHideExtraLettersOn",display:"on",configValue:!0,exec:()=>{h.setHideExtraLetters(!0)}}]},X={title:"Quick end...",configKey:"quickEnd",list:[{id:"setQuickEndOff",display:"off",configValue:!1,exec:()=>{h.setQuickEnd(!1)}},{id:"setQuickEndOn",display:"on",configValue:!0,exec:()=>{h.setQuickEnd(!0)}}]},ee={title:"Change opposite shift mode...",configKey:"oppositeShiftMode",list:[{id:"setOppositeShiftModeOff",display:"off",configValue:"off",exec:()=>{h.setOppositeShiftMode("off"),M.update()}},{id:"setOppositeShiftModeOn",display:"on",configValue:"on",exec:()=>{h.setOppositeShiftMode("on"),M.update()}},{id:"setOppositeShiftModeKeymap",display:"keymap",configValue:"keymap",exec:()=>{h.setOppositeShiftMode("keymap"),M.update()}}]},te={title:"Sound on error...",configKey:"playSoundOnError",list:[{id:"setPlaySoundOnErrorOff",display:"off",configValue:!1,exec:()=>{h.setPlaySoundOnError(!1)}},{id:"setPlaySoundOnErrorOn",display:"on",configValue:!0,exec:()=>{h.setPlaySoundOnError(!0),l.playError()}}]},oe={title:"Sound volume...",configKey:"soundVolume",list:[{id:"setSoundVolume0.1",display:"quiet",configValue:"0.1",exec:()=>{h.setSoundVolume("0.1"),l.playClick()}},{id:"setSoundVolume0.5",display:"medium",configValue:"0.5",exec:()=>{h.setSoundVolume("0.5"),l.playClick()}},{id:"setSoundVolume1.0",display:"loud",configValue:"1.0",exec:()=>{h.setSoundVolume("1.0"),l.playClick()}}]},ne={title:"Flip test colors...",configKey:"flipTestColors",list:[{id:"setFlipTestColorsOff",display:"off",configValue:!1,exec:()=>{h.setFlipTestColors(!1)}},{id:"setFlipTestColorsOn",display:"on",configValue:!0,exec:()=>{h.setFlipTestColors(!0)}}]},ae={title:"Smooth line scroll...",configKey:"smoothLineScroll",list:[{id:"setSmoothLineScrollOff",display:"off",configValue:!1,exec:()=>{h.setSmoothLineScroll(!1)}},{id:"setSmoothLineScrollOn",display:"on",configValue:!0,exec:()=>{h.setSmoothLineScroll(!0)}}]},ie={title:"Always show decimal places...",configKey:"alwaysShowDecimalPlaces",list:[{id:"setAlwaysShowDecimalPlacesOff",display:"off",configValue:!1,exec:()=>{h.setAlwaysShowDecimalPlaces(!1)}},{id:"setAlwaysShowDecimalPlacesOn",display:"on",configValue:!0,exec:()=>{h.setAlwaysShowDecimalPlaces(!0)}}]},se={title:"Always show CPM...",configKey:"alwaysShowCPM",list:[{id:"setAlwaysShowCPMOff",display:"off",configValue:!1,exec:()=>{h.setAlwaysShowCPM(!1)}},{id:"setAlwaysShowCPMOn",display:"on",configValue:!0,exec:()=>{h.setAlwaysShowCPM(!0)}}]},re={title:"Start graphs at zero...",configKey:"startGraphsAtZero",list:[{id:"setStartGraphsAtZeroOff",display:"off",configValue:!1,exec:()=>{h.setStartGraphsAtZero(!1)}},{id:"setStartGraphsAtZeroOn",display:"on",configValue:!0,exec:()=>{h.setStartGraphsAtZero(!0)}}]},ue={title:"Lazy mode...",configKey:"lazyMode",list:[{id:"setLazyModeOff",display:"off",configValue:!1,exec:()=>{h.setLazyMode(!1),v.restart()}},{id:"setLazyModeOn",display:"on",configValue:!0,exec:()=>{h.setLazyMode(!0),v.restart()}}]},de={title:"Swap esc and tab...",configKey:"swapEscAndTab",list:[{id:"setSwapEscAndTabOff",display:"off",configValue:!1,exec:()=>{h.setSwapEscAndTab(!1)}},{id:"setSwapEscAndTabOn",display:"on",configValue:!0,exec:()=>{h.setSwapEscAndTab(!0)}}]},le={title:"Show all lines...",configKey:"showAllLines",list:[{id:"setShowAllLinesOff",display:"off",configValue:!1,exec:()=>{h.setShowAllLines(!1)}},{id:"setShowAllLinesOn",display:"on",configValue:!0,exec:()=>{h.setShowAllLines(!0)}}]},ce={title:"Colorful mode...",configKey:"colorfulMode",list:[{id:"setColorfulModeOff",display:"off",configValue:!1,exec:()=>{h.setColorfulMode(!1)}},{id:"setColorfulModeOn",display:"on",configValue:!0,exec:()=>{h.setColorfulMode(!0)}}]},pe={title:"Colorful mode...",configKey:"showOutOfFocusWarning",list:[{id:"setShowOutOfFocusWarningOff",display:"off",configValue:!1,exec:()=>{h.setShowOutOfFocusWarning(!1)}},{id:"setShowOutOfFocusWarningOn",display:"on",configValue:!0,exec:()=>{h.setShowOutOfFocusWarning(!0)}}]},fe={title:"Keymap mode...",configKey:"keymapMode",list:[{id:"setKeymapModeOff",display:"off",configValue:"off",exec:()=>{h.setKeymapMode("off")}},{id:"setKeymapModeStatic",display:"static",configValue:"static",exec:()=>{h.setKeymapMode("static")}},{id:"setKeymapModeNext",display:"next",configValue:"next",exec:()=>{h.setKeymapMode("next")}},{id:"setKeymapModeReact",display:"react",alias:"flash",configValue:"react",exec:()=>{h.setKeymapMode("react")}}]},me={title:"Sound on click...",configKey:"playSoundOnClick",list:[{id:"setSoundOnClickOff",display:"off",configValue:"off",exec:()=>{h.setPlaySoundOnClick("off")}},{id:"setSoundOnClick1",display:"click",configValue:"1",hover:()=>{l.previewClick("1")},exec:()=>{h.setPlaySoundOnClick("1"),l.playClick()}},{id:"setSoundOnClick2",display:"beep",configValue:"2",hover:()=>{l.previewClick("2")},exec:()=>{h.setPlaySoundOnClick("2"),l.playClick()}},{id:"setSoundOnClick3",display:"pop",configValue:"3",hover:()=>{l.previewClick("3")},exec:()=>{h.setPlaySoundOnClick("3"),l.playClick()}},{id:"setSoundOnClick4",display:"nk creams",configValue:"4",hover:()=>{l.previewClick("4")},exec:()=>{h.setPlaySoundOnClick("4"),l.playClick()}},{id:"setSoundOnClick5",display:"typewriter",configValue:"5",hover:()=>{l.previewClick("5")},exec:()=>{h.setPlaySoundOnClick("5"),l.playClick()}},{id:"setSoundOnClick6",display:"osu",configValue:"6",hover:()=>{l.previewClick("6")},exec:()=>{h.setPlaySoundOnClick("6"),l.playClick()}},{id:"setSoundOnClick7",display:"hitmarker",configValue:"7",hover:()=>{l.previewClick("7")},exec:()=>{h.setPlaySoundOnClick("7"),l.playClick()}}]},he={title:"Random theme...",configKey:"randomTheme",list:[{id:"setRandomOff",display:"off",configValue:"off",exec:()=>{h.setRandomTheme("off")}},{id:"setRandomOn",display:"on",configValue:"on",exec:()=>{h.setRandomTheme("on")}},{id:"setRandomFav",display:"fav",configValue:"fav",exec:()=>{h.setRandomTheme("fav")}},{id:"setRandomLight",display:"light",configValue:"light",exec:()=>{h.setRandomTheme("light")}},{id:"setRandomDark",display:"dark",configValue:"dark",exec:()=>{h.setRandomTheme("dark")}},{id:"setRandomCustom",display:"custom",configValue:"custom",exec:()=>{null!==O.Auth.currentUser?h.setRandomTheme("custom"):d.add("Multiple custom themes are available to logged in users only",0)}}]},ge={title:"Difficulty...",configKey:"difficulty",list:[{id:"setDifficultyNormal",display:"normal",configValue:"normal",exec:()=>{h.setDifficulty("normal")}},{id:"setDifficultyExpert",display:"expert",configValue:"expert",exec:()=>{h.setDifficulty("expert")}},{id:"setDifficultyMaster",display:"master",configValue:"master",exec:()=>{h.setDifficulty("master")}}]};function ye(){null!==O.Auth.currentUser&&(t.customThemeListCommands.list=[],r.getSnapshot()&&(r.getSnapshot().customThemes.length<0?d.add("You need to create a custom theme first",0):r.getSnapshot().customThemes.forEach((e=>{t.customThemeListCommands.list.push({id:"setCustomThemeId"+e._id,display:e.name,configValue:e._id,hover:()=>{c.preview(e._id,!0)},exec:()=>{h.setCustomTheme(!0),c.set(e._id,!0)}})}))))}t.commandsEnableAds={title:"Set enable ads...",configKey:"enableAds",list:[{id:"setEnableAdsOff",display:"off",configValue:"off",exec:()=>{h.setEnableAds("off")}},{id:"setEnableAdsOn",display:"on",configValue:"on",exec:()=>{h.setEnableAds("on")}},{id:"setEnableMax",display:"sellout",configValue:"max",exec:()=>{h.setEnableAds("max")}}]},t.customThemeCommands={title:"Custom theme",configKey:"customTheme",list:[{id:"setCustomThemeOff",display:"off",configValue:!1,exec:()=>{h.setCustomTheme(!1)}},{id:"setCustomThemeOn",display:"on",configValue:!0,exec:()=>{h.setCustomTheme(!0)}}]},t.customThemeListCommands={title:"Custom themes list...",list:[]},t.updateCustomThemeListCommands=ye;const ve={title:"Change caret style...",configKey:"caretStyle",list:[{id:"setCaretStyleOff",display:"off",configValue:"off",exec:()=>{h.setCaretStyle("off")}},{id:"setCaretStyleDefault",display:"line",configValue:"default",exec:()=>{h.setCaretStyle("default")}},{id:"setCaretStyleBlock",display:"block",configValue:"block",exec:()=>{h.setCaretStyle("block")}},{id:"setCaretStyleOutline",display:"outline-block",configValue:"outline",exec:()=>{h.setCaretStyle("outline")}},{id:"setCaretStyleUnderline",display:"underline",configValue:"underline",exec:()=>{h.setCaretStyle("underline")}},{id:"setCaretStyleCarrot",display:"carrot",configValue:"carrot",visible:!1,exec:()=>{h.setCaretStyle("carrot")}},{id:"setCaretStyleBanana",display:"banana",configValue:"banana",visible:!1,exec:()=>{h.setCaretStyle("banana")}}]},be={title:"Change pace caret style...",configKey:"paceCaretStyle",list:[{id:"setPaceCaretStyleDefault",display:"line",configValue:"default",exec:()=>{h.setPaceCaretStyle("default")}},{id:"setPaceCaretStyleBlock",display:"block",configValue:"block",exec:()=>{h.setPaceCaretStyle("block")}},{id:"setPaceCaretStyleOutline",display:"outline-block",configValue:"outline",exec:()=>{h.setPaceCaretStyle("outline")}},{id:"setPaceCaretStyleUnderline",display:"underline",configValue:"underline",exec:()=>{h.setPaceCaretStyle("underline")}},{id:"setPaceCaretStyleCarrot",display:"carrot",configValue:"carrot",visible:!1,exec:()=>{h.setPaceCaretStyle("carrot")}},{id:"setPaceCaretStyleBanana",display:"banana",configValue:"banana",visible:!1,exec:()=>{h.setPaceCaretStyle("banana")}}]},we={title:"Repeated pace...",configKey:"repeatedPace",list:[{id:"setRepeatedPaceOff",display:"off",configValue:!1,exec:()=>{h.setRepeatedPace(!1)}},{id:"setRepeatedPaceOn",display:"on",configValue:!0,exec:()=>{h.setRepeatedPace(!0)}}]},$e={title:"Pace caret mode...",configKey:"paceCaret",list:[{id:"setPaceCaretOff",display:"off",configValue:"off",exec:()=>{h.setPaceCaret("off"),v.restart()}},{id:"setPaceCaretPb",display:"pb",configValue:"pb",exec:()=>{h.setPaceCaret("pb"),v.restart()}},{id:"setPaceCaretAverage",display:"average",configValue:"average",exec:()=>{h.setPaceCaret("average"),v.restart()}},{id:"setPaceCaretCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(h.setPaceCaretCustomSpeed(parseInt(e)),h.setPaceCaret("custom"),v.restart())}}]},Ce={title:"Change min wpm mode...",configKey:"minWpm",list:[{id:"setMinWpmOff",display:"off",configValue:"off",exec:()=>{h.setMinWpm("off")}},{id:"setMinWpmCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(h.setMinWpmCustomSpeed(parseInt(e)),h.setMinWpm("custom"))}}]},Se={title:"Change min accuracy mode...",configKey:"minAcc",list:[{id:"setMinAccOff",display:"off",configValue:"off",exec:()=>{h.setMinAcc("off")}},{id:"setMinAccCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(h.setMinAccCustom(parseInt(e)),h.setMinAcc("custom"))}}]},_e={title:"Change min burst mode...",configKey:"minBurst",list:[{id:"setMinBurstOff",display:"off",configValue:"off",exec:()=>{h.setMinBurst("off")}},{id:"setMinBurstFixed",display:"fixed...",configValue:"fixed",input:!0,exec:e=>{e&&(h.setMinBurst("fixed"),h.setMinBurstCustomSpeed(parseInt(e)))}},{id:"setMinBurstFlex",display:"flex...",configValue:"flex",input:!0,exec:e=>{e&&(h.setMinBurst("flex"),h.setMinBurstCustomSpeed(parseInt(e)))}}]},xe={title:"Keymap style...",configKey:"keymapStyle",list:[{id:"setKeymapStyleStaggered",display:"staggered",configValue:"staggered",exec:()=>{h.setKeymapStyle("staggered")}},{id:"setKeymapStyleAlice",display:"alice",configValue:"alice",exec:()=>{h.setKeymapStyle("alice")}},{id:"setKeymapStyleMatrix",display:"matrix",configValue:"matrix",exec:()=>{h.setKeymapStyle("matrix")}},{id:"setKeymapStyleSplit",display:"split",configValue:"split",exec:()=>{h.setKeymapStyle("split")}},{id:"setKeymapStyleSplitMatrix",display:"split matrix",configValue:"split_matrix",exec:()=>{h.setKeymapStyle("split_matrix")}}]},Te={title:"Keymap legend style...",configKey:"keymapLegendStyle",list:[{id:"setKeymapLegendStyleLowercase",display:"lowercase",configValue:"lowercase",exec:()=>{h.setKeymapLegendStyle("lowercase")}},{id:"setKeymapLegendStyleUppercase",display:"uppercase",configValue:"uppercase",exec:()=>{h.setKeymapLegendStyle("uppercase")}},{id:"setKeymapLegendStyleBlank",display:"blank",configValue:"blank",exec:()=>{h.setKeymapLegendStyle("blank")}},{id:"setKeymapLegendStyleDynamic",display:"dynamic",configValue:"dynamic",exec:()=>{h.setKeymapLegendStyle("dynamic")}}]},ke={title:"British english...",configKey:"britishEnglish",list:[{id:"setBritishEnglishOff",display:"off",configValue:!1,exec:()=>{h.setBritishEnglish(!1),v.restart()}},{id:"setBritishEnglishOn",display:"on",configValue:!0,exec:()=>{h.setBritishEnglish(!0),v.restart()}}]},Me={title:"Highlight mode...",configKey:"highlightMode",list:[{id:"setHighlightModeOff",display:"off",configValue:"off",exec:()=>{h.setHighlightMode("off")}},{id:"setHighlightModeLetter",display:"letter",configValue:"letter",exec:()=>{h.setHighlightMode("letter")}},{id:"setHighlightModeWord",display:"word",configValue:"word",exec:()=>{h.setHighlightMode("word")}}]},Pe={title:"Timer/progress style...",configKey:"timerStyle",list:[{id:"setTimerStyleBar",display:"bar",configValue:"bar",exec:()=>{h.setTimerStyle("bar")}},{id:"setTimerStyleText",display:"text",configValue:"text",exec:()=>{h.setTimerStyle("text")}},{id:"setTimerStyleMini",display:"mini",configValue:"mini",exec:()=>{h.setTimerStyle("mini")}}]},Oe={title:"Timer/progress color...",configKey:"timerColor",list:[{id:"setTimerColorBlack",display:"black",configValue:"black",exec:()=>{h.setTimerColor("black")}},{id:"setTimerColorSub",display:"sub",configValue:"sub",exec:()=>{h.setTimerColor("sub")}},{id:"setTimerColorText",display:"text",configValue:"text",exec:()=>{h.setTimerColor("text")}},{id:"setTimerColorMain",display:"main",configValue:"main",exec:()=>{h.setTimerColor("main")}}]},Le={title:"Single list command line...",configKey:"singleListCommandLine",list:[{id:"singleListCommandLineManual",display:"manual",configValue:"manual",exec:()=>{h.setSingleListCommandLine("manual")}},{id:"singleListCommandLineOn",display:"on",configValue:"on",exec:()=>{h.setSingleListCommandLine("on")}}]},Ae={title:"Caps lock warning...",configKey:"capsLockWarning",list:[{id:"capsLockWarningOn",display:"on",configValue:!0,exec:()=>{h.setCapsLockWarning(!0)}},{id:"capsLockWarningOff",display:"off",configValue:!1,exec:()=>{h.setCapsLockWarning(!1)}}]},We={title:"Timer/progress opacity...",configKey:"timerOpacity",list:[{id:"setTimerOpacity.25",display:".25",configValue:.25,exec:()=>{h.setTimerOpacity("0.25")}},{id:"setTimerOpacity.5",display:".5",configValue:.5,exec:()=>{h.setTimerOpacity("0.5")}},{id:"setTimerOpacity.75",display:".75",configValue:.75,exec:()=>{h.setTimerOpacity("0.75")}},{id:"setTimerOpacity1",display:"1",configValue:1,exec:()=>{h.setTimerOpacity("1")}}]},Ee={title:"Change word count...",configKey:"words",list:[{id:"changeWordCount10",display:"10",configValue:10,exec:()=>{h.setMode("words"),h.setWordCount(10),v.restart()}},{id:"changeWordCount25",display:"25",configValue:25,exec:()=>{h.setMode("words"),h.setWordCount(25),v.restart()}},{id:"changeWordCount50",display:"50",configValue:50,exec:()=>{h.setMode("words"),h.setWordCount(50),v.restart()}},{id:"changeWordCount100",display:"100",configValue:100,exec:()=>{h.setMode("words"),h.setWordCount(100),v.restart()}},{id:"changeWordCount200",display:"200",configValue:200,exec:()=>{h.setMode("words"),h.setWordCount(200),v.restart()}},{id:"changeWordCountCustom",display:"custom...",input:!0,exec:e=>{e&&(h.setMode("words"),h.setWordCount(parseInt(e)),v.restart())}}]},je={title:"Change quote length...",configKey:"quoteLength",list:[{id:"changeQuoteLengthAll",display:"all",configValue:[0,1,2,3],exec:()=>{h.setMode("quote"),h.setQuoteLength([0,1,2,3]),v.restart()}},{id:"changeQuoteLengthShort",display:"short",configValue:0,configValueMode:"include",exec:()=>{h.setMode("quote"),h.setQuoteLength(0),v.restart()}},{id:"changeQuoteLengthMedium",display:"medium",configValue:1,configValueMode:"include",exec:()=>{h.setMode("quote"),h.setQuoteLength(1),v.restart()}},{id:"changeQuoteLengthLong",display:"long",configValue:2,configValueMode:"include",exec:()=>{h.setMode("quote"),h.setQuoteLength(2),v.restart()}},{id:"changeQuoteLengthThicc",display:"thicc",configValue:3,configValueMode:"include",exec:()=>{h.setMode("quote"),h.setQuoteLength(3),v.restart()}}]},Be={title:"Change punctuation...",configKey:"punctuation",list:[{id:"changePunctuationOn",display:"on",configValue:!0,exec:()=>{h.setPunctuation(!0),v.restart()}},{id:"changePunctuationOff",display:"off",configValue:!1,exec:()=>{h.setPunctuation(!1),v.restart()}}]},De={title:"Numbers...",configKey:"numbers",list:[{id:"changeNumbersOn",display:"on",configValue:!0,exec:()=>{h.setNumbers(!0),v.restart()}},{id:"changeNumbersOff",display:"off",configValue:!1,exec:()=>{h.setNumbers(!1),v.restart()}}]},Re={title:"Smooth caret...",configKey:"smoothCaret",list:[{id:"changeSmoothCaretOn",display:"on",configValue:!0,exec:()=>{h.setSmoothCaret(!0)}},{id:"changeSmoothCaretOff",display:"off",configValue:!1,exec:()=>{h.setSmoothCaret(!1)}}]},qe={title:"Quick tab...",configKey:"quickTab",list:[{id:"changeQuickTabOn",display:"on",configValue:!0,exec:()=>{h.setQuickTabMode(!0)}},{id:"changeQuickTabOff",display:"off",configValue:!1,exec:()=>{h.setQuickTabMode(!1)}}]},Ie={title:"Change mode...",configKey:"mode",list:[{id:"changeModeTime",display:"time",configValue:"time",exec:()=>{h.setMode("time"),v.restart()}},{id:"changeModeWords",display:"words",configValue:"words",exec:()=>{h.setMode("words"),v.restart()}},{id:"changeModeQuote",display:"quote",configValue:"quote",exec:()=>{h.setMode("quote"),v.restart()}},{id:"changeModeCustom",display:"custom",configValue:"custom",exec:()=>{h.setMode("custom"),v.restart()}},{id:"changeModeZen",display:"zen",configValue:"zen",exec:()=>{h.setMode("zen"),f.set(),v.restart()}}]},Ve={title:"Change time config...",configKey:"time",list:[{id:"changeTimeConfig15",display:"15",configValue:15,exec:()=>{h.setMode("time"),h.setTimeConfig(15),v.restart()}},{id:"changeTimeConfig30",display:"30",configValue:30,exec:()=>{h.setMode("time"),h.setTimeConfig(30),v.restart()}},{id:"changeTimeConfig60",display:"60",configValue:60,exec:()=>{h.setMode("time"),h.setTimeConfig(60),v.restart()}},{id:"changeTimeConfig120",display:"120",configValue:120,exec:()=>{h.setMode("time"),h.setTimeConfig(120),v.restart()}},{id:"changeTimeConfigCustom",display:"custom...",input:!0,exec:e=>{e&&(h.setMode("time"),h.setTimeConfig(parseInt(e)),v.restart())}}]},Fe={title:"Confidence mode...",configKey:"confidenceMode",list:[{id:"changeConfidenceModeOff",display:"off",configValue:"off",exec:()=>{h.setConfidenceMode("off")}},{id:"changeConfidenceModeOn",display:"on",configValue:"on",exec:()=>{h.setConfidenceMode("on")}},{id:"changeConfidenceModeMax",display:"max",configValue:"max",exec:()=>{h.setConfidenceMode("max")}}]},Ke={title:"Stop on error...",configKey:"stopOnError",list:[{id:"changeStopOnErrorOff",display:"off",configValue:"off",exec:()=>{h.setStopOnError("off")}},{id:"changeStopOnErrorLetter",display:"letter",configValue:"letter",exec:()=>{h.setStopOnError("letter")}},{id:"changeStopOnErrorWord",display:"word",configValue:"word",exec:()=>{h.setStopOnError("word")}}]},He={title:"Font size...",configKey:"fontSize",list:[{id:"changeFontSize1",display:"1x",configValue:1,exec:()=>{h.setFontSize("1"),v.restart()}},{id:"changeFontSize125",display:"1.25x",configValue:125,exec:()=>{h.setFontSize("125"),v.restart()}},{id:"changeFontSize15",display:"1.5x",configValue:15,exec:()=>{h.setFontSize("15"),v.restart()}},{id:"changeFontSize2",display:"2x",configValue:2,exec:()=>{h.setFontSize("2"),v.restart()}},{id:"changeFontSize3",display:"3x",configValue:3,exec:()=>{h.setFontSize("3"),v.restart()}},{id:"changeFontSize4",display:"4x",configValue:4,exec:()=>{h.setFontSize("4"),v.restart()}}]},ze={title:"Page width...",configKey:"pageWidth",list:[{id:"setPageWidth100",display:"100",configValue:"100",exec:()=>{h.setPageWidth("100")}},{id:"setPageWidth125",display:"125",configValue:"125",exec:()=>{h.setPageWidth("125")}},{id:"setPageWidth150",display:"150",configValue:"150",exec:()=>{h.setPageWidth("150")}},{id:"setPageWidth200",display:"200",configValue:"200",exec:()=>{h.setPageWidth("200")}},{id:"setPageWidthMax",display:"max",configValue:"max",exec:()=>{h.setPageWidth("max")}}]},Ne={title:"Practice words...",list:[{id:"practiseWordsMissed",display:"missed",noIcon:!0,exec:()=>{g.init(!0,!1),v.restart(!1,!1,void 0,!0)}},{id:"practiseWordsSlow",display:"slow",noIcon:!0,exec:()=>{g.init(!1,!0),v.restart(!1,!1,void 0,!0)}},{id:"practiseWordsBoth",display:"both",noIcon:!0,exec:()=>{g.init(!0,!0),v.restart(!1,!1,void 0,!0)}}]};t.themeCommands={title:"Theme...",configKey:"theme",list:[]},u.getThemesList().then((e=>{e.forEach((e=>{t.themeCommands.list.push({id:"changeTheme"+u.capitalizeFirstLetterOfEachWord(e.name),display:e.name.replace(/_/g," "),configValue:e.name,hover:()=>{c.preview(e.name,!1)},exec:()=>{h.setTheme(e.name)}})}))})),t.commandsChallenges={title:"Load challenge...",list:[]},u.getChallengeList().then((e=>{e.forEach((e=>{t.commandsChallenges.list.push({id:"loadChallenge"+u.capitalizeFirstLetterOfEachWord(e.name),noIcon:!0,display:e.display,exec:()=>{x.setup(e.name),v.restart(!1,!0)}})}))})),t.updateThemeCommands=function(){m.default.favThemes.length>0&&(t.themeCommands.list=[],m.default.favThemes.forEach((e=>{t.themeCommands.list.push({id:"changeTheme"+u.capitalizeFirstLetterOfEachWord(e),display:e.replace(/_/g," "),hover:()=>{c.preview(e,!1)},exec:()=>{h.setTheme(e)}})})),u.getThemesList().then((e=>{e.forEach((e=>{m.default.favThemes.includes(e.name)||t.themeCommands.list.push({id:"changeTheme"+u.capitalizeFirstLetterOfEachWord(e.name),display:e.name.replace(/_/g," "),hover:()=>{c.preview(e.name,!1)},exec:()=>{h.setTheme(e.name)}})}))})))};const Qe={title:"Are you sure...",list:[{id:"copyNo",display:"Nevermind"},{id:"copyYes",display:"Yes, I am sure",exec:()=>{const e=u.getWords();navigator.clipboard.writeText(e).then((()=>{d.add("Copied to clipboard",1)}),(()=>{d.add("Failed to copy!",-1)}))}}]},Ue={title:"Power mode...",configKey:"monkeyPowerLevel",list:[{id:"monkeyPowerLevelOff",display:"off",configValue:"off",exec:()=>h.setMonkeyPowerLevel("off")},{id:"monkeyPowerLevel1",display:"mellow",configValue:"1",exec:()=>h.setMonkeyPowerLevel("1")},{id:"monkeyPowerLevel2",display:"high",configValue:"2",exec:()=>h.setMonkeyPowerLevel("2")},{id:"monkeyPowerLevel3",display:"ultra",configValue:"3",exec:()=>h.setMonkeyPowerLevel("3")},{id:"monkeyPowerLevel4",display:"over 9000",configValue:"4",exec:()=>h.setMonkeyPowerLevel("4")}]};t.defaultCommands={title:"",list:[{id:"changePunctuation",display:"Punctuation...",icon:"!?",subgroup:Be},{id:"changeMode",display:"Mode...",icon:"fa-bars",subgroup:Ie},{id:"changeTimeConfig",display:"Time...",icon:"fa-clock",subgroup:Ve},{id:"changeWordCount",display:"Words...",alias:"words",icon:"fa-font",subgroup:Ee},{id:"changeQuoteLength",display:"Quote length...",icon:"fa-quote-right",alias:"quotes",subgroup:je},{visible:!1,id:"changeTags",display:"Tags...",icon:"fa-tag",subgroup:B,beforeSubgroup:()=>{D()}},{visible:!1,id:"applyPreset",display:"Presets...",icon:"fa-sliders-h",subgroup:R,beforeSubgroup:()=>{q()}},{id:"changeConfidenceMode",display:"Confidence mode...",icon:"fa-backspace",subgroup:Fe},{id:"changeStopOnError",display:"Stop on error...",icon:"fa-hand-paper",subgroup:Ke},{id:"changeNumbers",display:"Numbers...",icon:"15",subgroup:De},{id:"changeSmoothCaret",display:"Smooth caret...",icon:"fa-i-cursor",subgroup:Re},{id:"changeQuickTab",display:"Quick tab...",icon:"fa-redo-alt",subgroup:qe},{id:"changeRepeatQuotes",display:"Repeat quotes...",icon:"fa-sync-alt",subgroup:I},{id:"changeLiveWpm",display:"Live WPM...",icon:"fa-tachometer-alt",subgroup:V},{id:"changeLiveAcc",display:"Live accuracy...",icon:"fa-percentage",subgroup:K},{id:"changeLiveBurst",display:"Live burst...",icon:"fa-fire-alt",subgroup:H},{id:"changeShowTimer",display:"Timer/progress...",icon:"fa-clock",subgroup:z},{id:"changeKeyTips",display:"Key tips...",icon:"fa-question",subgroup:N},{id:"changeFreedomMode",display:"Freedom mode...",subgroup:Q},{id:"changeStrictSpace",display:"Strict space...",icon:"fa-minus",subgroup:U},{id:"changeBlindMode",display:"Blind mode...",icon:"fa-eye-slash",subgroup:G},{id:"changeShowWordsHistory",display:"Always show words history...",icon:"fa-align-left",subgroup:J},{id:"changeIndicateTypos",display:"Indicate typos...",icon:"fa-exclamation",subgroup:Z},{id:"changeHideExtraLetters",display:"Hide extra letters...",icon:"fa-eye-slash",subgroup:Y},{id:"changeQuickEnd",display:"Quick end...",icon:"fa-step-forward",subgroup:X},{id:"singleListCommandLine",display:"Single list command line...",icon:"fa-list",subgroup:Le},{id:"capsLockWarning",display:"Caps lock warning...",icon:"fa-exclamation-triangle",subgroup:Ae},{id:"changeMinWpm",display:"Minimum wpm...",alias:"minimum",icon:"fa-bomb",subgroup:Ce},{id:"changeMinAcc",display:"Minimum accuracy...",alias:"minimum",icon:"fa-bomb",subgroup:Se},{id:"changeMinBurst",display:"Minimum burst...",alias:"minimum",icon:"fa-bomb",subgroup:_e},{id:"changeOppositeShiftMode",display:"Change opposite shift mode...",icon:"fa-exchange-alt",subgroup:ee},{id:"changeSoundOnClick",display:"Sound on click...",icon:"fa-volume-up",subgroup:me},{id:"changeSoundOnError",display:"Sound on error...",icon:"fa-volume-mute",subgroup:te},{id:"changeSoundVolume",display:"Sound volume...",icon:"fa-volume-down",subgroup:oe},{id:"changeFlipTestColors",display:"Flip test colors...",icon:"fa-adjust",subgroup:ne},{id:"changeSmoothLineScroll",display:"Smooth line scroll...",icon:"fa-align-left",subgroup:ae},{id:"changeAlwaysShowDecimal",display:"Always show decimal places...",icon:"00",subgroup:ie},{id:"changeAlwaysShowCPM",display:"Always show CPM...",icon:"fa-tachometer-alt",subgroup:se},{id:"changeStartGraphsAtZero",display:"Start graphs at zero...",icon:"fa-chart-line",subgroup:re},{id:"changeSwapEscAndTab",display:"Swap esc and tab...",icon:"fa-exchange-alt",subgroup:de},{id:"changeLazyMode",display:"Lazy mode...",icon:"fa-couch",subgroup:ue},{id:"changeShowAllLines",display:"Show all lines...",icon:"fa-align-left",subgroup:le},{id:"changeColorfulMode",display:"Colorful mode...",icon:"fa-fill-drip",subgroup:ce},{id:"changeOutOfFocusWarning",display:"Out of focus warning...",icon:"fa-exclamation",subgroup:pe},{id:"setEnableAds",display:"Enable ads...",icon:"fa-ad",subgroup:t.commandsEnableAds},{id:"changeTheme",display:"Theme...",icon:"fa-palette",subgroup:t.themeCommands},{id:"setCustomTheme",display:"Custom theme...",icon:"fa-palette",subgroup:t.customThemeCommands},{id:"setCustomThemeId",display:"Custom themes...",icon:"fa-palette",subgroup:t.customThemeListCommands,beforeSubgroup:()=>ye(),available:()=>null!==O.Auth.currentUser},{id:"changeRandomTheme",display:"Random theme...",icon:"fa-random",subgroup:he},{id:"randomizeTheme",display:"Next random theme",icon:"fa-random",exec:()=>c.randomizeTheme()},{id:"changeDifficulty",display:"Difficulty...",icon:"fa-star",subgroup:ge},{id:"changeCaretStyle",display:"Caret style...",icon:"fa-i-cursor",subgroup:ve},{id:"changePaceCaret",display:"Pace caret mode...",icon:"fa-i-cursor",subgroup:$e},{id:"changePaceCaretStyle",display:"Pace caret style...",icon:"fa-i-cursor",subgroup:be},{id:"changeRepeatedPace",display:"Repeated pace...",icon:"fa-i-cursor",subgroup:we},{id:"changeTimerStyle",display:"Timer/progress style...",icon:"fa-clock",subgroup:Pe},{id:"changeTimerColor",display:"Timer/progress color...",icon:"fa-clock",subgroup:Oe},{id:"changeTimerOpacity",display:"Timer/progress opacity...",icon:"fa-clock",subgroup:We},{id:"changeHighlightMode",display:"Highlight mode...",icon:"fa-highlighter",subgroup:Me},{id:"changeShowAverage",display:"Show average...",icon:"fa-chart-bar",subgroup:F},{id:"changeCustomBackground",display:"Custom background...",icon:"fa-image",defaultValue:"",input:!0,exec:e=>{e&&h.setCustomBackground(e)}},{id:"changeLanguage",display:"Language...",icon:"fa-language",subgroup:W},{id:"changeBritishEnglish",display:"British english...",icon:"fa-language",subgroup:ke},{id:"changeFunbox",display:"Funbox...",alias:"fun box",icon:"fa-gamepad",subgroup:E},{id:"changeLayout",display:"Layout emulator...",icon:"fa-keyboard",subgroup:A},{id:"toggleKeymap",display:"Keymap mode...",icon:"fa-keyboard",alias:"keyboard",subgroup:fe},{id:"changeKeymapStyle",display:"Keymap style...",alias:"keyboard",icon:"fa-keyboard",subgroup:xe},{id:"changeKeymapLegendStyle",display:"Keymap legend style...",alias:"keyboard",icon:"fa-keyboard",subgroup:Te},{id:"changeKeymapLayout",display:"Keymap layout...",alias:"keyboard",icon:"fa-keyboard",subgroup:t.commandsKeymapLayouts},{id:"changeCustomLayoutfluid",display:"Custom layoutfluid...",defaultValue:"qwerty dvorak colemak",input:!0,icon:"fa-tint",exec:e=>{void 0!==e&&(h.setCustomLayoutfluid(e),"layoutfluid"===m.default.funbox&&v.restart())}},{id:"changeFontSize",display:"Font size...",icon:"fa-font",subgroup:He},{id:"changeFontFamily",display:"Font family...",icon:"fa-font",subgroup:j},{id:"changePageWidth",display:"Page width...",icon:"fa-arrows-alt-h",subgroup:ze},{id:"viewTypingPage",display:"View Typing Page",alias:"start begin type test",icon:"fa-keyboard",exec:()=>{$("#top #menu .icon-button.view-start").trigger("click")}},{id:"viewLeaderboards",display:"View Leaderboards Page",icon:"fa-crown",exec:()=>{$("#top #menu .icon-button.view-leaderboards").trigger("click")}},{id:"viewAbout",display:"View About Page",icon:"fa-info",exec:()=>{$("#top #menu .icon-button.view-about").trigger("click")}},{id:"viewSettings",display:"View Settings Page",icon:"fa-cog",exec:()=>{$("#top #menu .icon-button.view-settings").trigger("click")}},{id:"viewQuoteSearchPopup",display:"Search for quotes",icon:"fa-search",exec:()=>{h.setMode("quote"),$("#quote-search-button").trigger("click")},shouldFocusTestUI:!1},{id:"viewAccount",display:"View Account Page",icon:"fa-user",alias:"stats",exec:()=>{$("#top #menu .icon-button.view-account").hasClass("hidden")?$("#top #menu .icon-button.view-login").trigger("click"):$("#top #menu .icon-button.view-account").trigger("click")}},{id:"toggleFullscreen",display:"Toggle Fullscreen",icon:"fa-expand",exec:()=>{u.toggleFullscreen()}},{id:"bailOut",display:"Bail out...",icon:"fa-running",subgroup:{title:"Are you sure...",list:[{id:"bailOutNo",display:"Nevermind",available:()=>L()},{id:"bailOutForSure",display:"Yes, I am sure",exec:()=>{k.setBailout(!0),v.finish()},available:()=>L()}]},visible:!1,available:()=>L()},{id:"loadChallenge",display:"Load challenge...",icon:"fa-award",subgroup:t.commandsChallenges},{id:"joinDiscord",display:"Join the Discord server",icon:"fa-users",exec:()=>{window.open("https://discord.gg/monkeytype")}},{id:"repeatTest",display:"Repeat test",icon:"fa-sync-alt",exec:()=>{v.restart(!0)},available:()=>y.resultVisible},{id:"practiseWords",display:"Practice words...",icon:"fa-exclamation-triangle",subgroup:Ne,available:()=>y.resultVisible},{id:"toggleWordHistory",display:"Toggle word history",icon:"fa-align-left",exec:()=>{y.toggleResultWords()},available:()=>y.resultVisible},{id:"saveScreenshot",display:"Save screenshot",icon:"fa-image",alias:"ss picture",exec:()=>{setTimeout((()=>{y.screenshot()}),500)},available:()=>y.resultVisible},{id:"changeCustomModeText",display:"Change custom text",icon:"fa-align-left",exec:()=>{p.show()}},{id:"toggleMonkey",display:"Toggle Monkey",icon:"fa-egg",visible:!1,exec:()=>{h.setMonkey(!m.default.monkey)}},{id:"copyWordsToClipboard",display:"Copy words to clipboard",icon:"fa-copy",subgroup:!0,exec:()=>{t.current.push(Qe)}},{id:"importSettingsJSON",display:"Import settings JSON",icon:"fa-cog",input:!0,exec:e=>{if(e)try{h.apply(JSON.parse(e)),h.saveFullConfigToLocalStorage(),_.update(),d.add("Done",1)}catch(e){d.add("An error occured while importing settings: "+e,-1)}}},{id:"exportSettingsJSON",display:"Export settings JSON",icon:"fa-cog",input:!0,defaultValue:""},{id:"monkeyPower",display:"Power mode...",alias:"powermode",icon:"fa-egg",visible:!1,subgroup:Ue},{id:"clearSwCache",display:"Clear SW cache",icon:"fa-cog",exec:()=>s(void 0,void 0,void 0,(function*(){const e=yield caches.keys();for(const t of e)yield caches.delete(t);window.location.reload()}))},{id:"getSwCache",display:"Get SW cache",icon:"fa-cog",exec:()=>s(void 0,void 0,void 0,(function*(){alert(yield caches.keys())}))}]},t.current=[t.defaultCommands],t.setCurrent=function(e){t.current=e},t.pushCurrent=function(e){t.current.push(e)};const Ge={commandsChallenges:t.commandsChallenges,commandsLanguages:W,commandsDifficulty:ge,commandsLazyMode:ue,commandsPaceCaret:$e,commandsShowAverage:F,commandsMinWpm:Ce,commandsMinAcc:Se,commandsMinBurst:_e,commandsFunbox:E,commandsConfidenceMode:Fe,commandsStopOnError:Ke,commandsLayouts:A,commandsOppositeShiftMode:ee,commandsTags:B};t.getList=function(e){return Ge[e]},P.subscribe(((e,o)=>{var n;"saveToLocalStorage"===e&&(t.defaultCommands.list.filter((e=>"exportSettingsJSON"==e.id))[0].defaultValue=o),"customBackground"===e&&(t.defaultCommands.list.filter((e=>"changeCustomBackground"==e.id))[0].defaultValue=o),"customLayoutFluid"===e&&(t.defaultCommands.list.filter((e=>"changeCustomLayoutfluid"==e.id))[0].defaultValue=null===(n=o)||void 0===n?void 0:n.replace(/#/g," "))}))},341:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.isSingleListCommandLineActive=void 0;const s=i(o(4094)),r=i(o(2426)),u=r,d=i(o(249)),l=i(o(1112)),c=i(o(9881)),p=i(o(2541)),f=i(o(6030)),m=i(o(394)),h=i(o(5922)),g=o(9280);let y=!1;function v(){return $("#commandLine").hasClass("allCommands")}function b(){$("#commandLine .suggestions").empty();let e="";const t=l.current[l.current.length-1];$.each(t.list,((o,n)=>{var a;if(n.found&&(void 0===n.available||n.available())){let o=null!==(a=n.icon)&&void 0!==a?a:"fa-chevron-right";o=/^fa-/g.test(o)?`<i class="fas fa-fw ${o}"></i>`:`<div class="textIcon">${o}</div>`,t.configKey&&(o=n.configValueMode&&"include"===n.configValueMode&&r.default[t.configKey].includes(n.configValue)||r.default[t.configKey]===n.configValue?'<i class="fas fa-fw fa-check"></i>':'<i class="fas fa-fw"></i>');let i=`<div class="icon">${o}</div>`;n.noIcon&&!v()&&(i=""),e+=`<div class="entry" command="${n.id}">${i}<div>${n.display}</div></div>`}})),$("#commandLine .suggestions").html(e),0==$("#commandLine .suggestions .entry").length?$("#commandLine .separator").css({height:0,margin:0}):$("#commandLine .separator").css({height:"1px","margin-bottom":".5rem"});const o=$("#commandLine .suggestions .entry");if(o.length>0){$(o[0]).addClass("activeKeyboard");try{$.each(t.list,((e,t)=>!t.found||(/theme/gi.test(t.id)&&"toggleCustomTheme"!==t.id||s.randomTheme||s.clearPreview(),/font/gi.test(t.id)||u.previewFontFamily(r.default.fontFamily),t.hover&&t.hover(),!1)))}catch(e){}}$("#commandLine .listTitle").remove()}function w(){const e=$("#commandLine input").val().toLowerCase().split(" ").filter(((e,t)=>e||0==t)),t=l.current[l.current.length-1];if(""===e[0]&&"on"===r.default.singleListCommandLine&&1===l.current.length)return $.each(t.list,((e,t)=>{t.found=!1})),void b();e[0]&&">"==e[0][0]&&(e[0]=e[0].replace(/^>+/,"")),""==e[0]&&1==e.length?$.each(t.list,((e,t)=>{!1!==t.visible&&(t.found=!0)})):$.each(t.list,((t,o)=>{let n=0;$.each(e,((e,t)=>{if(""==t)return;const a=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp("\\b"+a,"g"),s=o.display.toLowerCase().match(i),r=void 0!==o.alias?o.alias.toLowerCase().match(i):null;null!=s&&s.length>0||null!=r&&r.length>0?n++:n--})),n>e.length-1?o.found=!0:o.found=!1})),b()}function C(e=!0){u.previewFontFamily(r.default.fontFamily),s.randomTheme||s.clearPreview(),$("#commandLineWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#commandLineWrapper").addClass("hidden"),$("#commandLine").removeClass("allCommands"),e&&c.focusWords()})),e&&c.focusWords()}function S(e){let o=!1,n=!1,a=!0;const i=l.current[l.current.length-1];let s=!1;$.each(i.list,((i,r)=>{var u;if(r.id==e)if(void 0!==r.shouldFocusTestUI&&(a=r.shouldFocusTestUI),r.input){n=!0;const e=null!==(u=r.display.split("</i>")[1])&&void 0!==u?u:r.display;!function(e,t,o=""){$("#commandLineWrapper").removeClass("hidden"),$("#commandLine").addClass("hidden"),$("#commandInput").removeClass("hidden"),$("#commandInput input").attr("placeholder",t),$("#commandInput input").val(o),$("#commandInput input").trigger("focus"),$("#commandInput input").attr("command",""),$("#commandInput input").attr("command",e),""!=o&&$("#commandInput input").select()}(r.id,e,r.defaultValue)}else r.subgroup?(o=!0,r.beforeSubgroup&&r.beforeSubgroup(),l.current.push(r.subgroup),(0,t.show)()):(r.exec&&r.exec(),!0===r.sticky&&(s=!0))})),o||n||s||(m.log("usedCommandLine",{command:e}),C(a))}function _(e,t,o="",n){var a,i;let s=t.display.replace(/\s?\.\.\.$/g,""),u='<i class="fas fa-fw"></i>';if(void 0!==t.configValue&&r.default[null==n?void 0:n.configKey]===t.configValue&&(u='<i class="fas fa-fw fa-check"></i>'),t.noIcon&&(u=""),o&&(s=o+" > "+u+s),t.subgroup){const o=t;o.beforeSubgroup&&o.beforeSubgroup();try{null===(i=(null===(a=t)||void 0===a?void 0:a.subgroup).list)||void 0===i||i.forEach((o=>{t.configKey=t.subgroup.configKey,_(e,o,s,t)}))}catch(e){}}else{const a=Object.assign({},t);n&&(a.icon=n.icon),o&&(a.display=s),e.push(a)}}function x(){const e=[],o=t.show;return t.show=()=>{},l.defaultCommands.list.forEach((t=>_(e,t))),t.show=o,{title:"All Commands",list:e}}function T(e=!0){const o=x();l.setCurrent([o]),"manual"!=r.default.singleListCommandLine&&$("#commandLine").addClass("allCommands"),e&&(0,t.show)()}t.isSingleListCommandLineActive=v,t.show=()=>{$(".page.pageLoading").hasClass("hidden")&&(d.set(!1),$("#commandLine").removeClass("hidden"),$("#commandInput").addClass("hidden"),$("#commandLineWrapper").hasClass("hidden")&&$("#commandLineWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100),$("#commandLine input").val(""),l.updateThemeCommands(),w(),$("#commandLine input").trigger("focus"))},$("#commandLine input").keyup((e=>{y=!1,$("#commandLineWrapper #commandLine .suggestions .entry").removeClass("activeMouse"),"ArrowUp"===e.key||"ArrowDown"===e.key||"Enter"===e.key||"Tab"===e.key||"AltLeft"==e.code||e.key.length>1&&"Backspace"!==e.key&&"Delete"!==e.key||w()})),$(document).ready((()=>{$(document).on("keydown",(e=>{if(h.get())return e.preventDefault();if("Escape"===e.key||e.key&&"p"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey)&&e.shiftKey||"Tab"===e.key&&r.default.swapEscAndTab){e.preventDefault();const o=document.querySelectorAll(".popupWrapper");let n=!1;for(const e of o)if(1==!e.classList.contains("hidden")){n=!0;break}if(n)return;$("#commandLineWrapper").hasClass("hidden")?"Tab"!==e.key&&r.default.swapEscAndTab||("on"==r.default.singleListCommandLine?T(!1):l.setCurrent([l.defaultCommands]),(0,t.show)()):(l.current.length>1?(l.current.pop(),$("#commandLine").removeClass("allCommands"),(0,t.show)()):C(),u.setFontFamily(r.default.fontFamily,!0))}}))})),$("#commandInput input").on("keydown",(e=>{if("Enter"===e.key){e.preventDefault();const t=$("#commandInput input").attr("command"),o=$("#commandInput input").val(),n=l.current[l.current.length-1];$.each(n.list,((e,n)=>{n.id==t&&(n.exec&&n.exec(o),null!==n.subgroup&&n.subgroup)})),m.log("usedCommandLine",{command:null!=t?t:""}),C()}})),$(document).on("mousemove",(()=>{y||(y=!0)})),$(document).on("mouseenter","#commandLineWrapper #commandLine .suggestions .entry",(e=>{y&&$(e.target).addClass("activeMouse")})),$(document).on("mouseleave","#commandLineWrapper #commandLine .suggestions .entry",(e=>{y&&$(e.target).removeClass("activeMouse")})),$("#commandLineWrapper #commandLine .suggestions").on("mouseover",(e=>{if(!y)return;$("#commandLineWrapper #commandLine .suggestions .entry").removeClass("activeKeyboard");const t=$(e.target).attr("command");try{const e=l.current[l.current.length-1];$.each(e.list,((e,o)=>{o.id==t&&(/theme/gi.test(o.id)&&"toggleCustomTheme"!==o.id||s.randomTheme||s.clearPreview(),/font/gi.test(o.id)||u.previewFontFamily(r.default.fontFamily),o.hover&&o.hover())}))}catch(e){}})),$(document).on("click","#commandLineWrapper #commandLine .suggestions .entry",(e=>{$(".suggestions .entry").removeClass("activeKeyboard"),S($(e.currentTarget).attr("command"))})),$("#commandLineWrapper").on("click",(e=>{"commandLineWrapper"===$(e.target).attr("id")&&(C(),u.setFontFamily(r.default.fontFamily,!0))})),$(document).on("keydown",(e=>{var o,n;if(!$("#commandLineWrapper").hasClass("hidden")){if($("#commandLine input").trigger("focus"),">"==e.key&&"manual"==r.default.singleListCommandLine){if(!v())return void T(!1);if(">"==$("#commandLine input").val())return void e.preventDefault()}if("Backspace"!==e.key&&"Delete"!==e.key||setTimeout((()=>{const e=$("#commandLine input").val();"manual"==r.default.singleListCommandLine&&v()&&">"!==e[0]&&function(e=!0){v()&&($("#commandLine").removeClass("allCommands"),l.setCurrent(l.current.filter((e=>"All Commands"!=e.title))),l.current.length<1&&l.setCurrent([l.defaultCommands])),e&&(0,t.show)()}(!1)}),1),"Enter"===e.key)return e.preventDefault(),void S($(".suggestions .entry.activeKeyboard").attr("command"));if("ArrowUp"===e.key||"ArrowDown"===e.key||"Tab"===e.key){e.preventDefault(),$("#commandLineWrapper #commandLine .suggestions .entry").unbind("mouseenter mouseleave");const t=$(".suggestions .entry");let a,i=-1;$.each(t,((e,t)=>{$(t).hasClass("activeKeyboard")&&(i=e)})),("ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey)&&(t.removeClass("activeKeyboard"),0==i?($(t[t.length-1]).addClass("activeKeyboard"),a=$(t[t.length-1]).attr("command")):($(t[--i]).addClass("activeKeyboard"),a=$(t[i]).attr("command"))),("ArrowDown"===e.key||"Tab"===e.key&&!e.shiftKey)&&(t.removeClass("activeKeyboard"),i+1==t.length?($(t[0]).addClass("activeKeyboard"),a=$(t[0]).attr("command")):($(t[++i]).addClass("activeKeyboard"),a=$(t[i]).attr("command")));try{const e=Math.abs((null===(o=$(".suggestions").offset())||void 0===o?void 0:o.top)-(null===(n=$(".entry.activeKeyboard").offset())||void 0===n?void 0:n.top)-$(".suggestions").scrollTop())-$(".suggestions").outerHeight()/2+$($(".entry")[0]).outerHeight();$(".suggestions").scrollTop(e)}catch(e){e instanceof Error&&console.log("could not scroll suggestions: "+e.message)}try{const e=l.current[l.current.length-1];$.each(e.list,((e,t)=>{t.id==a&&(/theme/gi.test(t.id)&&"toggleCustomTheme"!==t.id||s.randomTheme||s.clearPreview(),/font/gi.test(t.id)||u.previewFontFamily(r.default.fontFamily),t.hover&&t.hover())}))}catch(e){}return!1}}})),$(document).on("click","#commandLineMobileButton",(()=>{"on"==r.default.singleListCommandLine?T(!1):l.setCurrent([l.defaultCommands]),(0,t.show)()})),$(document).on("click","#keymap .r5 .key-space",(()=>{l.setCurrent([l.commandsKeymapLayouts]),(0,t.show)()})),$(document).on("click","#testModesNotice .text-button",(e=>{const o=l.getList($(e.currentTarget).attr("commands"));void 0!==o&&("commandsTags"===$(e.currentTarget).attr("commands")&&l.updateTagCommands(),l.pushCurrent(o),(0,t.show)())})),$(document).on("click","#bottom .leftright .right .current-theme",(e=>{if(e.shiftKey)if(r.default.customTheme)u.setCustomTheme(!1);else{if(null!==g.Auth.currentUser&&p.getSnapshot().customThemes.length<1)return f.add("No custom themes!",0),void u.setCustomTheme(!1);u.setCustomTheme(!0)}else r.default.customTheme&&l.updateCustomThemeListCommands(),l.pushCurrent(r.default.customTheme?l.customThemeListCommands:l.themeCommands),(0,t.show)()})),$(document.body).on("click",".pageAbout .aboutEnableAds",(()=>{l.pushCurrent(l.commandsEnableAds),(0,t.show)()})),$(".supportButtons .button.ads").on("click",(()=>{l.pushCurrent(l.commandsEnableAds),(0,t.show)()}))},9519:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadConfig=t.apply=t.getCSS=void 0;const s=i(o(2426)),r=i(o(6030)),u=i(o(9073)),d={blur:{value:0,default:0},brightness:{value:1,default:1},saturate:{value:1,default:1},opacity:{value:1,default:1}};function l(){let e="";return Object.keys(d).forEach((t=>{const o=t;d[o].value!=d[o].default&&(e+=`${t}(${d[o].value}${"blur"==t?"rem":""}) `)})),e}function c(){const e={filter:l(),width:`calc(100% + ${4*d.blur.value}rem)`,height:`calc(100% + ${4*d.blur.value}rem)`,left:`-${2*d.blur.value}rem`,top:`-${2*d.blur.value}rem`,position:"absolute"};$(".customBackground img").css(e)}function p(){$(".section.customBackgroundFilter .blur .value").html(d.blur.value.toFixed(1)),$(".section.customBackgroundFilter .brightness .value").html(d.brightness.value.toFixed(1)),$(".section.customBackgroundFilter .saturate .value").html(d.saturate.value.toFixed(1)),$(".section.customBackgroundFilter .opacity .value").html(d.opacity.value.toFixed(1))}function f(e){d.blur.value=e[0],d.brightness.value=e[1],d.saturate.value=e[2],d.opacity.value=e[3],p(),$(".section.customBackgroundFilter .blur input").val(d.blur.value),$(".section.customBackgroundFilter .brightness input").val(d.brightness.value),$(".section.customBackgroundFilter .saturate input").val(d.saturate.value),$(".section.customBackgroundFilter .opacity input").val(d.opacity.value)}t.getCSS=l,t.apply=c,t.loadConfig=f,$(".section.customBackgroundFilter .blur input").on("input",(()=>{d.blur.value=parseFloat($(".section.customBackgroundFilter .blur input").val()),p(),c()})),$(".section.customBackgroundFilter .brightness input").on("input",(()=>{d.brightness.value=parseFloat($(".section.customBackgroundFilter .brightness input").val()),p(),c()})),$(".section.customBackgroundFilter .saturate input").on("input",(()=>{d.saturate.value=parseFloat($(".section.customBackgroundFilter .saturate input").val()),p(),c()})),$(".section.customBackgroundFilter .opacity input").on("input",(()=>{d.opacity.value=parseFloat($(".section.customBackgroundFilter .opacity input").val()),p(),c()})),$(".section.customBackgroundFilter  .save.button").on("click",(()=>{const e=Object.keys(d).map((e=>d[e].value));s.setCustomBackgroundFilter(e,!1),r.add("Custom background filters saved",1)})),u.subscribe(((e,t)=>{"customBackgroundFilter"===e&&(f(t.map((e=>parseFloat(e)))),c())}))},1003:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=t.show=t.hide=t.flashKey=t.highlightKey=void 0;const u=r(o(2426)),d=i(o(2614)),l=i(o(1119)),c=i(o(9073)),p=i(o(5021));function f(e=u.default.layout){return s(this,void 0,void 0,(function*(){if(e)try{const t=yield p.getLayoutsList();let o=t[e],n=e;"overrideSync"===u.default.keymapLayout?"default"===u.default.layout?(o=t.qwerty,n="default"):(o=t[u.default.layout],n=u.default.layout):(o=t[u.default.keymapLayout],n=u.default.keymapLayout);const a=o.keymapShowTopRow,i="matrix"===u.default.keymapStyle||"split_matrix"===u.default.keymapStyle;let s="";Object.keys(o.keys).forEach(((e,t)=>{const r=o.keys[e];let d="";if("row1"!==e||a){if("row2"!==e&&"row3"!==e&&"row4"!==e||i||(d+="<div></div>"),"row4"!==e||"iso"===o.type||i||(d+="<div></div>"),"row5"===e){let e=n.replace(/_/g," ");"blank"===u.default.keymapLegendStyle&&(e=""),d+="<div></div>",d+=`<div class="keymap-key key-space">\n          <div class="letter">${e}</div>\n        </div>`,d+='<div class="keymap-split-spacer"></div>',d+='<div class="keymap-key key-split-space">\n          <div class="letter"></div>\n        </div>'}else for(let t=0;t<r.length;t++){if("row2"===e&&12===t)continue;if(("matrix"===u.default.keymapStyle||"split_matrix"===u.default.keymapStyle)&&t>=10)continue;const n=r[t],a="row3"===e&&(3===t||6===t);let i=n[0];"blank"===u.default.keymapLegendStyle?i="":"uppercase"===u.default.keymapLegendStyle&&(i=i.toUpperCase());const s=`<div class="keymap-key" data-key="${n.replace('"',"&quot;")}">\n              <span class="letter">${i}</span>\n              ${a?"<div class='bump'></div>":""}\n          </div>`;let l="";"split"!==u.default.keymapStyle&&"split_matrix"!==u.default.keymapStyle&&"alice"!==u.default.keymapStyle||("row4"!==e||"split"!==u.default.keymapStyle&&"alice"!==u.default.keymapStyle||"iso"!==o.type?5===t&&(l+='<div class="keymap-split-spacer"></div>'):6===t&&(l+='<div class="keymap-split-spacer"></div>')),"alice"===u.default.keymapStyle&&"row4"===e&&("iso"===o.type&&6===t||"iso"!==o.type&&5===t)&&(l+='<div class="extra-key"><span class="letter"></span></div>'),d+=l+s}s+=`<div class="row r${t+1}">${d}</div>`}})),$("#keymap").html(s),$("#keymap").removeClass("staggered"),$("#keymap").removeClass("matrix"),$("#keymap").removeClass("split"),$("#keymap").removeClass("split_matrix"),$("#keymap").removeClass("alice"),$("#keymap").addClass(u.default.keymapStyle)}catch(e){e instanceof Error&&console.log("something went wrong when changing layout, resettings: "+e.message)}}))}t.highlightKey=function(e){if("zen"!==u.default.mode){""===e&&(e=" ");try{let t;null!=$(".active-key")&&$(".active-key").removeClass("active-key"),t=" "==e?"#keymap .key-space, #keymap .key-split-space":'"'==e?`#keymap .keymap-key[data-key*='${e}']`:`#keymap .keymap-key[data-key*="${e}"]`,console.log("highlighting",t),$(t).addClass("active-key")}catch(e){e instanceof Error&&console.log("could not update highlighted keymap key: "+e.message)}}},t.flashKey=function(e,t){return s(this,void 0,void 0,(function*(){if(null==e)return;e=" "==e?"#keymap .key-space, #keymap .key-split-space":'"'==e?`#keymap .keymap-key[data-key*='${e}']`:`#keymap .keymap-key[data-key*="${e}"]`;const o=yield d.getAll();try{t||u.default.blindMode?$(e).stop(!0,!0).css({color:o.bg,backgroundColor:o.main,borderColor:o.main}).animate({color:o.sub,backgroundColor:"transparent",borderColor:o.sub},l.get()?0:500,"easeOutExpo"):$(e).stop(!0,!0).css({color:o.bg,backgroundColor:o.error,borderColor:o.error}).animate({color:o.sub,backgroundColor:"transparent",borderColor:o.sub},l.get()?0:500,"easeOutExpo")}catch(e){}}))},t.hide=function(){$("#keymap").addClass("hidden")},t.show=function(){$("#keymap").removeClass("hidden")},t.refresh=f,c.subscribe((e=>{"layout"===e&&"overrideSync"===u.default.keymapLayout&&f(u.default.keymapLayout),"keymapLayout"!==e&&"keymapStyle"!==e||f()}))},850:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAcc=t.getWPM=t.update=void 0;const u=i(o(2541)),d=i(o(5021)),l=r(o(2426)),c=i(o(6983));let p=0,f=0;t.update=function(){return s(this,void 0,void 0,(function*(){const e=d.getMode2(l.default,c.randomQuote),[t,o]=(yield u.getUserAverage10(l.default.mode,e,l.default.punctuation,l.default.language,l.default.difficulty,l.default.lazyMode)).map(d.roundTo2).map((e=>l.default.alwaysShowDecimalPlaces?Math.round(e):e));p=t,f=o}))},t.getWPM=function(){return p},t.getAcc=function(){return f}},6464:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const u=r(o(9063)),d=i(o(2541)),l=r(o(2426)),c=i(o(5021)),p=i(o(6030)),f=r(o(9546)),m=o(9280);let h={15:[],60:[]},g={15:{},60:{}};const y={15:!1,60:!1};let v;function b(e){15===e?($("#leaderboardsWrapper table.left tbody").empty(),$("#leaderboardsWrapper table.left tfoot").empty()):60===e&&($("#leaderboardsWrapper table.right tbody").empty(),$("#leaderboardsWrapper table.right tfoot").empty())}function w(){const e=new Date,t=60*(14-e.getMinutes()%15)+(60-e.getSeconds());$("#leaderboards .subTitle").text("Next update in: "+c.secondsToString(t,!0))}function C(e){15===e?$("#leaderboardsWrapper .leftTableLoader").removeClass("hidden"):60===e&&$("#leaderboardsWrapper .rightTableLoader").removeClass("hidden")}function S(e){15===e?$("#leaderboardsWrapper .leftTableLoader").addClass("hidden"):60===e&&$("#leaderboardsWrapper .rightTableLoader").addClass("hidden")}function _(e,t){var o;if(!h[e])return;let n;n=15===e?"left":"right";const a=null===(o=d.getSnapshot())||void 0===o?void 0:o.name;let i=h[e].length-50,s=h[e].length;i<0&&(i=0),t&&(i=0,s=t);let r="";for(let t=i;t<s;t++){const o=h[e][t];if(!o)break;if(o.hidden)return;let n="";o.name==a&&(n=' class="me"');const i=new Date(o.timestamp);r+=`\n    <tr ${n}>\n    <td>${1===o.rank?'<i class="fas fa-fw fa-crown"></i>':o.rank}</td>\n    <td>${o.name}</td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*o.wpm:o.wpm).toFixed(2)}<br><div class="sub">${o.acc.toFixed(2)}%</div></td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*o.raw:o.raw).toFixed(2)}<br><div class="sub">${o.consistency&&"-"!==o.consistency?o.consistency.toFixed(2)+"%":"-"}</div></td>\n    <td class="alignRight">time<br><div class="sub">${e}</div></td>\n    <td class="alignRight">${(0,f.default)(i,"dd MMM yyyy")}<br>\n    <div class='sub'>${(0,f.default)(i,"HH:mm")}</div></td>\n  </tr>\n  `}t?$(`#leaderboardsWrapper table.${n} tbody`).prepend(r):$(`#leaderboardsWrapper table.${n} tbody`).append(r)}function x(){$("#leaderboardsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{b(15),b(60),h={15:[],60:[]},g={15:{},60:{}},clearInterval(v),v=void 0,$("#leaderboards .subTitle").text("Next update in: --:--"),$("#leaderboardsWrapper").addClass("hidden")}))}function T(e,t=!1){return s(this,void 0,void 0,(function*(){if(t&&1===h[e][0].rank)return;if(y[e])return;y[e]=!0,C(e);let o,n=h[e][h[e].length-1].rank;t&&(n=h[e][0].rank-50),n<0&&(o=Math.abs(n)-1,n=0);const a=yield u.default.leaderboards.get("english","time",e,n,o),i=a.data;200===a.status&&0!==i.length?(t?h[e].unshift(...i):h[e].push(...i),t&&!o&&(o=49),_(e,o),S(e),y[e]=!1):S(e)}))}function k(e,t){return s(this,void 0,void 0,(function*(){C(e);const o=yield u.default.leaderboards.get("english","time",e,t),n=o.data;b(e),h[e]=[],200===o.status&&0!==n.length?(h[e]=n,_(e),S(e)):S(e)}))}function M(){$("#leaderboardsWrapper").hasClass("hidden")&&(m.Auth.currentUser?($("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").removeClass("disabled"),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").removeClass("disabled")):($("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").addClass("disabled"),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").addClass("disabled")),l.default.alwaysShowCPM?$("#leaderboards table thead tr td:nth-child(3)").html('cpm<br><div class="sub">accuracy</div>'):$("#leaderboards table thead tr td:nth-child(3)").html('wpm<br><div class="sub">accuracy</div>'),$("#leaderboardsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{(function(){s(this,void 0,void 0,(function*(){$("#leaderboardsWrapper .buttons .button").removeClass("active"),$("#leaderboardsWrapper .buttons .button[board=time_15]").addClass("active"),C(15),C(60);const e=[u.default.leaderboards.get("english","time","15",0),u.default.leaderboards.get("english","time","60",0)];m.Auth.currentUser&&e.push(u.default.leaderboards.getRank("english","time","15"),u.default.leaderboards.getRank("english","time","60"));const t=yield Promise.all(e),o=t.find((e=>200!==e.status));if(o)return p.add("Failed to load leaderboards: "+o.message,-1);const[n,a,i,s]=t.map((e=>e.data));h[15]=n,h[60]=a,g[15]=i,g[60]=s,[15,60].forEach((e=>{S(e),b(e),function(e){let t,o;if(t=15===e?"left":"right",$(`#leaderboardsWrapper table.${t} tfoot`).html('\n    <tr>\n      <td><br><br></td>\n      <td colspan="4" style="text-align:center;">Not qualified</>\n      <td><br><br></td>\n    </tr>\n    '),g[e]){let t=c.roundTo2(g[e].rank/g[e].count*100);0==t&&(t=.01),o=`Top ${t}%`}if(g[e]){const n=g[e],a=new Date(n.timestamp);$(`#leaderboardsWrapper table.${t} tfoot`).html(`\n    <tr>\n    <td>${n.rank}</td>\n    <td><span class="top">You</span><br><span class="sub">${o}</span></td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*n.wpm:n.wpm).toFixed(2)}<br><div class="sub">${n.acc.toFixed(2)}%</div></td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*n.raw:n.raw).toFixed(2)}<br><div class="sub">${n.consistency&&"-"!==n.consistency?n.consistency.toFixed(2)+"%":"-"}</div></td>\n    <td class="alignRight">time<br><div class="sub">${e}</div></td>\n    <td class="alignRight">${(0,f.default)(a,"dd MMM yyyy")}<br>\n    <div class='sub'>${(0,f.default)(a,"HH:mm")}</div></td>\n  </tr>\n  `)}}(e),function(e){var t,o,n,a,i;let s;s=15===e?"left":"right";const r=null!==(i=null===(a=null===(n=null===(o=null===(t=d.getSnapshot())||void 0===t?void 0:t.lbMemory)||void 0===o?void 0:o.time)||void 0===n?void 0:n[e])||void 0===a?void 0:a.english)&&void 0!==i?i:0;if(g[e]){const t=r-g[e].rank;t>0?(d.updateLbMemory("time",e,"english",g[e].rank,!0),0!==r&&$(`#leaderboardsWrapper table.${s} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-up"></i>${Math.abs(t)} since you last checked)`)):t<0?(d.updateLbMemory("time",e,"english",g[e].rank,!0),0!==r&&$(`#leaderboardsWrapper table.${s} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-down"></i>${Math.abs(t)} since you last checked)`)):0!==r&&$(`#leaderboardsWrapper table.${s} tfoot tr td .top`).append(" ( = since you last checked)")}}(e),_(e)})),$("#leaderboardsWrapper .leftTableWrapper").removeClass("invisible"),$("#leaderboardsWrapper .rightTableWrapper").removeClass("invisible")}))})(),w(),v=setInterval((()=>{w()}),1e3)})))}t.hide=x,t.show=M,$("#leaderboardsWrapper").on("click",(e=>{"leaderboardsWrapper"===$(e.target).attr("id")&&x()}));let P=!0;$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scroll((e=>{if(!P)return;const t=$(e.currentTarget);Math.round(t.scrollTop())<=50&&T(15,!0)})),$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scroll((e=>{if(!P)return;const t=$(e.currentTarget);Math.round(t[0].scrollHeight-t.scrollTop())<=Math.round(t.outerHeight())+50&&T(15)}));let O=!0;$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scroll((e=>{if(!O)return;const t=$(e.currentTarget);Math.round(t.scrollTop())<=50&&T(60,!0)})),$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scroll((e=>{const t=$(e.currentTarget);Math.round(t[0].scrollHeight-t.scrollTop())<=Math.round(t.outerHeight()+50)&&T(60)})),$("#leaderboardsWrapper #leaderboards .leftTableJumpToTop").on("click",(()=>s(void 0,void 0,void 0,(function*(){P=!1,$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),yield k(15,0),P=!0})))),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").on("click",(()=>s(void 0,void 0,void 0,(function*(){if(void 0===g[15].rank)return;P=!1,yield k(15,g[15].rank-25);const e=$("#leaderboardsWrapper #leaderboards .leftTableWrapper table tbody td").outerHeight();$("#leaderboardsWrapper #leaderboards .leftTableWrapper").animate({scrollTop:e*Math.min(g[15].rank,25)-$("#leaderboardsWrapper #leaderboards .leftTableWrapper").outerHeight()/2.25},0,(()=>{P=!0}))})))),$("#leaderboardsWrapper #leaderboards .rightTableJumpToTop").on("click",(()=>s(void 0,void 0,void 0,(function*(){O=!1,$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),yield k(60,0),O=!0})))),$("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").on("click",(()=>s(void 0,void 0,void 0,(function*(){if(void 0===g[60].rank)return;P=!1,yield k(60,g[60].rank-25);const e=$("#leaderboardsWrapper #leaderboards .rightTableWrapper table tbody td").outerHeight();$("#leaderboardsWrapper #leaderboards .rightTableWrapper").animate({scrollTop:e*Math.min(g[60].rank,25)-$("#leaderboardsWrapper #leaderboards .rightTableWrapper").outerHeight()/2.25},0,(()=>{P=!0}))})))),$(document).on("click","#top #menu .icon-button",(e=>($(e.currentTarget).hasClass("leaderboards")&&M(),!1))),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#leaderboardsWrapper").hasClass("hidden")||(x(),e.preventDefault())}))},8308:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0,t.show=function(){$("#backgroundLoader").stop(!0,!0).fadeIn(125)},t.hide=function(){$("#backgroundLoader").stop(!0,!0).fadeOut(125)}},6203:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const u=i(o(3370)),d=i(o(7506)),l=i(o(2541)),c=i(o(850)),p=r(o(2426)),f=i(o(6983)),m=i(o(9073)),h=o(9280);function g(){var e;return s(this,void 0,void 0,(function*(){let t=!1;if(""===$(".pageTest #testModesNotice").text()&&(t=!0),$(".pageTest #testModesNotice").empty(),d.isRepeated&&"quote"!==p.default.mode&&$(".pageTest #testModesNotice").append('<div class="text-button restart" style="color:var(--error-color);"><i class="fas fa-sync-alt"></i>repeated</div>'),f.hasTab&&$(".pageTest #testModesNotice").append('<div class="text-button"><i class="fas fa-long-arrow-alt-right"></i>shift + tab to restart</div>'),d.activeChallenge&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsChallenges"><i class="fas fa-award"></i>${d.activeChallenge.display}</div>`),"zen"===p.default.mode&&$(".pageTest #testModesNotice").append('<div class="text-button"><i class="fas fa-poll"></i>shift + enter to finish zen </div>'),$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsLanguages"><i class="fas fa-globe-americas"></i>${p.default.language.replace(/_/g," ")}</div>`),"expert"===p.default.difficulty?$(".pageTest #testModesNotice").append('<div class="text-button" commands="commandsDifficulty"><i class="fas fa-star-half-alt"></i>expert</div>'):"master"===p.default.difficulty&&$(".pageTest #testModesNotice").append('<div class="text-button" commands="commandsDifficulty"><i class="fas fa-star"></i>master</div>'),p.default.blindMode&&$(".pageTest #testModesNotice").append('<div class="text-button blind"><i class="fas fa-eye-slash"></i>blind</div>'),p.default.lazyMode&&$(".pageTest #testModesNotice").append('<div class="text-button" commands="commandsLazyMode"><i class="fas fa-couch"></i>lazy</div>'),"off"!==p.default.paceCaret||p.default.repeatedPace&&d.isPaceRepeat){let e="";try{e=` (${Math.round(u.settings.wpm)} wpm)`}catch(e){}$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsPaceCaret"><i class="fas fa-tachometer-alt"></i>${"average"===p.default.paceCaret?"average":"pb"===p.default.paceCaret?"pb":"custom"} pace${e}</div>`)}if("off"!==p.default.showAverage){let e=c.getWPM(),t=c.getAcc();if(p.default.alwaysShowDecimalPlaces||(e=Math.round(e),t=Math.round(t)),h.Auth.currentUser&&e>0){const o=`${["wpm","both"].includes(p.default.showAverage)?p.default.alwaysShowCPM?`${Math.round(5*e)} cpm`:`${e} wpm`:""} ${["acc","both"].includes(p.default.showAverage)?`${t}% acc`:""}`.trim();$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsShowAverage"><i class="fas fa-chart-bar"></i>avg: ${o}</div>`)}}"off"!==p.default.minWpm&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsMinWpm"><i class="fas fa-bomb"></i>min ${p.default.minWpmCustomSpeed} wpm</div>`),"off"!==p.default.minAcc&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsMinAcc"><i class="fas fa-bomb"></i>min ${p.default.minAccCustom}% acc</div>`),"off"!==p.default.minBurst&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsMinBurst"><i class="fas fa-bomb"></i>min ${p.default.minBurstCustomSpeed} burst ${"flex"===p.default.minBurst?"(flex)":""}</div>`),"none"!==p.default.funbox&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsFunbox"><i class="fas fa-gamepad"></i>${p.default.funbox.replace(/_/g," ")}</div>`),"on"===p.default.confidenceMode&&$(".pageTest #testModesNotice").append('<div class="text-button" commands="commandsConfidenceMode"><i class="fas fa-backspace"></i>confidence</div>'),"max"===p.default.confidenceMode&&$(".pageTest #testModesNotice").append('<div class="text-button" commands="commandsConfidenceMode"><i class="fas fa-backspace"></i>max confidence</div>'),"off"!=p.default.stopOnError&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsStopOnError"><i class="fas fa-hand-paper"></i>stop on ${p.default.stopOnError}</div>`),"default"!==p.default.layout&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsLayouts"><i class="fas fa-keyboard"></i>emulating ${p.default.layout.replace(/_/g," ")}</div>`),"off"!==p.default.oppositeShiftMode&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsOppositeShiftMode"><i class="fas fa-exchange-alt"></i>opposite shift${"keymap"===p.default.oppositeShiftMode?" (keymap)":""}</div>`);let o="";try{null===(e=l.getSnapshot().tags)||void 0===e||e.forEach((e=>{!0===e.active&&(o+=e.name+", ")})),""!==o&&$(".pageTest #testModesNotice").append(`<div class="text-button" commands="commandsTags"><i class="fas fa-tag"></i>${o.substring(0,o.length-2)}</div>`)}catch(e){}t&&$(".pageTest #testModesNotice").css("transition","none").css("opacity",0).animate({opacity:1},125,(()=>{$(".pageTest #testModesNotice").css("transition",".125s")}))}))}m.subscribe((e=>{["difficulty","blindMode","stopOnError","paceCaret","minWpm","minAcc","minBurst","confidenceMode","layout","showAverage","alwaysShowCPM"].includes(e)&&g()})),t.update=g},7836:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addPower=t.reset=t.init=void 0;const u=i(o(2614)),d=i(o(1119)),l=r(o(2426)),c={particles:[],rendering:!1},p=1500,f=[6,3];function m(e,t,o){return{x:e,y:t,color:o,alpha:1,prev:{x:e,y:t},vel:{x:p-Math.random()*p*2,y:p-Math.random()*p*2}}}function h(e){c.canvas&&c.deltaTime&&(e.prev.x=e.x,e.prev.y=e.y,e.x+=e.vel.x*c.deltaTime,e.y+=e.vel.y*c.deltaTime,e.x>c.canvas.width?(e.vel.x*=-.3,e.x=c.canvas.width-.3*(e.x-c.canvas.width)):e.x<0&&(e.vel.x*=-.3,e.x*=-.3),e.y>c.canvas.height?(e.vel.y*=-.3,e.y=c.canvas.height-.3*(e.y-c.canvas.height)):e.y<0&&(e.vel.y*=-1,e.y*=-1),e.vel.y+=1e3*c.deltaTime,e.vel.x*=1-.05*c.deltaTime,e.alpha*=1-.6*c.deltaTime)}function g(){if(!c.lastFrame||!c.context2d||!c.canvas)return;c.rendering=!0;const e=Date.now();c.deltaTime=(e-c.lastFrame)/1e3,c.lastFrame=e,c.context2d.clearRect(0,0,c.canvas.width,c.canvas.height);const t=[];for(let e=0;e<c.particles.length;e++){const o=c.particles[e];o.alpha<.1||(h(o),c.context2d.globalAlpha=o.alpha,c.context2d.strokeStyle=o.color,c.context2d.lineWidth=4,c.context2d.beginPath(),c.context2d.moveTo(Math.round(o.prev.x),Math.round(o.prev.y)),c.context2d.lineTo(Math.round(o.x),Math.round(o.y)),c.context2d.stroke(),t.push(o))}c.particles=t,c.particles.length&&!d.get()?requestAnimationFrame(g):(c.context2d.clearRect(0,0,c.canvas.width,c.canvas.height),c.rendering=!1)}function y(e=!1){if(!c.resetTimeOut)return;delete c.resetTimeOut,clearTimeout(c.resetTimeOut);const t=$(document.body);t.css("transition","all .25s, transform 0.8s"),t.css("transform","translate(0,0)"),setTimeout((()=>{t.css("transition","all .25s, transform .05s"),$("html").css("overflow","inherit"),$("html").css("overflow-y","scroll")}),e?0:1e3)}t.init=function(){c.caret=$("#caret"),c.canvas=function(){const e=document.createElement("canvas");return e.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",e.height=window.innerHeight,e.width=window.innerWidth,window.addEventListener("resize",(()=>{e.height=window.innerHeight,e.width=window.innerWidth})),document.body.appendChild(e),e}(),c.context2d=c.canvas.getContext("2d")},t.reset=y,t.addPower=function(e=!0,t=!1){var o,n,a,i,r;return s(this,void 0,void 0,(function*(){if("off"===l.default.monkeyPowerLevel||d.get())return;if(["3","4"].includes(l.default.monkeyPowerLevel)){$("html").css("overflow","hidden");const e=[Math.round(10-10*Math.random()),Math.round(10-10*Math.random())];$(document.body).css("transform",`translate(${e[0]}px, ${e[1]}px)`),c.resetTimeOut&&clearTimeout(c.resetTimeOut),c.resetTimeOut=setTimeout(y,2e3)}const s=null===(o=c.caret)||void 0===o?void 0:o.offset(),p=[null!==(n=null==s?void 0:s.left)&&void 0!==n?n:0,(null!==(a=null==s?void 0:s.top)&&void 0!==a?a:0)+(null!==(r=null===(i=c.caret)||void 0===i?void 0:i.height())&&void 0!==r?r:0)];for(let o=Math.round((f[0]+Math.random()*f[1])*(t?2:1));o>0;o--){const t=["2","4"].includes(l.default.monkeyPowerLevel)?`#${Math.floor(256*Math.random()).toString(16)}${Math.floor(256*Math.random()).toString(16)}${Math.floor(256*Math.random()).toString(16)}`:e?yield u.get("caret"):yield u.get("error");c.particles.push(m(...p,t))}c.rendering||(c.lastFrame=Date.now(),g())}))}},6030:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addBanner=t.add=void 0;const s=i(o(5021));let r=0;class u{constructor(e,t,o,n,a,i,s=(()=>{})){this.type=e,this.message=t,this.level=o,this.duration="banner"===e?n:null==n?-1===o?0:3e3:1e3*n,this.customTitle=a,this.customIcon=i,this.id=r++,this.closeCallback=s}show(){let e="notice",t='<i class="fas fa-fw fa-exclamation"></i>',o="Notice";if(1===this.level?(e="good",t='<i class="fas fa-fw fa-check"></i>',o="Success"):-1===this.level&&(e="bad",t='<i class="fas fa-fw fa-times"></i>',o="Error",console.error(this.message)),null!=this.customTitle&&(o=this.customTitle),"banner"===this.type&&(t='<i class="fas fa-fw fa-bullhorn"></i>'),null!=this.customIcon&&(t=`<i class="fas fa-fw fa-${this.customIcon}"></i>`),"notification"===this.type){const n=$("#notificationCenter .history").height();$("#notificationCenter .history").prepend(`\n          \n          <div class="notif ${e}" id=${this.id}>\n              <div class="icon">${t}</div>\n              <div class="message"><div class="title">${o}</div>${this.message}</div>\n          </div>     \n\n          `);const a=$("#notificationCenter .history").height();$(`#notificationCenter .notif[id='${this.id}']`).remove(),$("#notificationCenter .history").css("margin-top",0).animate({marginTop:a-n},125,(()=>{$("#notificationCenter .history").css("margin-top",0),$("#notificationCenter .history").prepend(`\n          \n                  <div class="notif ${e}" id=${this.id}>\n                      <div class="icon">${t}</div>\n                      <div class="message"><div class="title">${o}</div>${this.message}</div>\n                  </div>     \n\n              `),$(`#notificationCenter .notif[id='${this.id}']`).css("opacity",0).animate({opacity:1},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).css("opacity","")})),$(`#notificationCenter .notif[id='${this.id}']`).on("click",(()=>{this.hide(),this.closeCallback()}))})),$(`#notificationCenter .notif[id='${this.id}']`).hover((()=>{$(`#notificationCenter .notif[id='${this.id}']`).toggleClass("hover")}))}else if("banner"===this.type){let o=`<div class="icon lefticon">${t}</div>`;/^images\/.*/.test(this.customIcon)&&(o=`<div class="image" style="background-image: url(${this.customIcon})"></div>`),$("#bannerCenter").prepend(`\n        <div class="banner ${e}" id="${this.id}">\n        <div class="container">\n          ${o}\n          <div class="text">\n            ${this.message}\n          </div>\n          ${this.duration>=0?'\n          <div class="closeButton">\n            <i class="fas fa-fw fa-times"></i>\n          </div>\n          ':`<div class="righticon">${t}</div>`}\n        </div>\n      </div>\n      `);const n=$("#bannerCenter").height();$("#centerContent").css("padding-top",n+s.convertRemToPixels(2)+"px"),$("#notificationCenter").css("margin-top",n+"px"),this.duration>=0&&$(`#bannerCenter .banner[id='${this.id}'] .closeButton`).on("click",(()=>{this.hide(),this.closeCallback()}))}this.duration>0&&setTimeout((()=>{this.hide()}),this.duration+250)}hide(){if("notification"===this.type)$(`#notificationCenter .notif[id='${this.id}']`).css("opacity",1).animate({opacity:0},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).animate({height:0},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).remove()}))}));else if("banner"===this.type){$(`#bannerCenter .banner[id='${this.id}']`).remove();const e=$("#bannerCenter").height();$("#centerContent").css("padding-top",e+s.convertRemToPixels(2)+"px"),$("#notificationCenter").css("margin-top",e+"px")}}}t.add=function(e,t=0,o,n,a,i){new u("notification",e,t,o,n,a,i).show()},t.addBanner=function(e,t=-1,o="bullhorn",n=!1,a){new u("banner",e,t,n?-1:0,void 0,o,a).show()}},1675:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=r(o(9063)),d=i(o(6030));function l(){var e,t;return null!==(t=JSON.parse(null!==(e=window.localStorage.getItem("confirmedPSAs"))&&void 0!==e?e:"[]"))&&void 0!==t?t:[]}t.show=function(){return s(this,void 0,void 0,(function*(){const e=yield function(){return s(this,void 0,void 0,(function*(){const e=yield u.default.psas.get();return"Server is down for maintenance"===e.message?(d.addBanner("Server is currently under maintenance. <a target= '_blank' href='https://monkeytype.instatus.com/'>Click here</a> for more info.",-1,"bullhorn",!0),[]):e.data}))}();if(null==e||0==e.length)return void window.localStorage.setItem("confirmedPSAs",JSON.stringify([]));const t=l();e.forEach((e=>{var o;t.includes(e._id)&&!1===(null!==(o=e.sticky)&&void 0!==o&&o)||d.addBanner(e.message,e.level,"bullhorn",e.sticky,(()=>{!function(e){const t=l();t.push(e),window.localStorage.setItem("confirmedPSAs",JSON.stringify(t))}(e._id)}))}))}))}},7226:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(4375));let r=!1;$(".scrollToTopButton").on("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),$(window).scroll((()=>{const e=s.get();if("test"!=e&&("about"==e||"settings"==e||"account"==e)){const e=window.scrollY;!r&&e>100?($(".scrollToTopButton").removeClass("invisible"),r=!0):r&&e<100&&($(".scrollToTopButton").addClass("invisible"),r=!1)}}))},2614:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.reset=t.getAll=t.get=void 0;let n={bg:"#323437",main:"#e2b714",caret:"#e2b714",sub:"#646669",text:"#d1d0c5",error:"#ca4754",errorExtra:"#7e2a33",colorfulError:"#ca4754",colorfulErrorExtra:"#7e2a33"};function a(){const e=getComputedStyle(document.body);n.bg=e.getPropertyValue("--bg-color").replace(" ",""),n.main=e.getPropertyValue("--main-color").replace(" ",""),n.caret=e.getPropertyValue("--caret-color").replace(" ",""),n.sub=e.getPropertyValue("--sub-color").replace(" ",""),n.text=e.getPropertyValue("--text-color").replace(" ",""),n.error=e.getPropertyValue("--error-color").replace(" ",""),n.errorExtra=e.getPropertyValue("--error-extra-color").replace(" ",""),n.colorfulError=e.getPropertyValue("--colorful-error-color").replace(" ",""),n.colorfulErrorExtra=e.getPropertyValue("--colorful-error-extra-color").replace(" ","")}t.get=function(e){return o(this,void 0,void 0,(function*(){return n[e]||a(),n[e]}))},t.getAll=function(){return o(this,void 0,void 0,(function*(){return n.bg||a(),n}))},t.reset=function(){n={bg:"",main:"",caret:"",sub:"",text:"",error:"",errorExtra:"",colorfulError:"",colorfulErrorExtra:""}},t.update=a},3246:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=i(o(6030));function u(e){window.localStorage.setItem("lastSeenVersion",e)}t.show=function(e){return s(this,void 0,void 0,(function*(){const t=yield null!==(o=window.localStorage.getItem("lastSeenVersion"))&&void 0!==o?o:"";var o;""!==t?("localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||caches.keys().then((function(e){for(const t of e)caches.delete(t)})),t!==e&&(caches.keys().then((function(e){for(const t of e)caches.delete(t)})),r.addBanner(`Version ${e} has been released. Click the version number in the bottom right to view the changelog.`,1,"code-branch",!1),u(e))):u(e)}))}},8929:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),o(9835),o(9280);const r=i(o(2541)),u=s(o(2426)),d=i(o(5601)),l=i(o(7970)),c=i(o(177)),p=i(o(9359)),f=i(o(6110));o(517);const m=o(3541);o(9366),o(7458),o(2246),o(6216),o(7205),o(2481),o(3473),o(2118),o(4467),o(9430),o(2083),o(7226),o(1330),o(8230);const h=i(o(1211)),g=o.g;g.snapshot=r.getSnapshot,g.config=u.default,g.toggleFilterDebug=h.toggleFilterDebug,g.glarsesMode=m.enable,g.stats=d.getStats,g.replay=l.getReplayExport,g.enableTimerDebug=c.enableTimerDebug,g.getTimerStats=c.getTimerStats,g.toggleUnsmoothedRaw=p.toggleUnsmoothedRaw,g.enableSpacingDebug=f.enableSpacingDebug},9073:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n,a,i){o.forEach((o=>{try{o(e,t,n,a,i)}catch(e){console.error("Config event subscriber threw an error"),console.error(e)}}))}},4095:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n){o.forEach((o=>{try{o(e,t,n)}catch(e){console.error("Timer event subscriber threw an error"),console.error(e)}}))}},9430:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.fill=t.reset=void 0;const u=i(o(5021)),d=r(o(2538));function l(){$(".pageAbout .contributors").empty(),$(".pageAbout .supporters").empty()}function c(){return s(this,void 0,void 0,(function*(){const e=yield u.getSupportersList(),t=yield u.getContributorsList();e.forEach((e=>{$(".pageAbout .supporters").append(`\n      <div>${e}</div>\n    `)})),t.forEach((e=>{$(".pageAbout .contributors").append(`\n      <div>${e}</div>\n    `)}))}))}t.reset=l,t.fill=c,t.page=new d.default("about",$(".page.pageAbout"),"/about",(()=>{}),(()=>s(void 0,void 0,void 0,(function*(){l()}))),(()=>{c()}),(()=>{}))},1211:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.update=t.smoothHistory=t.reset=t.toggleFilterDebug=void 0;const u=i(o(2541)),d=i(o(9861)),l=i(o(2614)),c=i(o(8185)),p=i(o(2426)),f=p,m=i(o(9065)),h=i(o(5632)),g=i(o(60)),y=i(o(8548)),v=i(o(249)),b=i(o(9281)),w=i(o(5899)),C=i(o(6030)),S=r(o(2538)),_=i(o(5021)),x=i(o(4375)),T=r(o(9546));let k=!1;t.toggleFilterDebug=function(){k=!k,k&&console.log("filterDebug is on")};let M=[],P=0;function O(e){var t,o;if(M==[]||0==M.length)return;let n;n=e&&e>P?10*Math.ceil(e/10):P+10;for(let e=P;e<n;e++){const n=M[e];if(!n)continue;let a,i=n.difficulty;null==i&&(i="normal");try{a=p.default.alwaysShowCPM?(5*n.rawWpm).toFixed(2):n.rawWpm.toFixed(2),null==a&&(a="-")}catch(e){a="-"}let s=`<span aria-label="${null===(t=n.language)||void 0===t?void 0:t.replace("_"," ")}" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i></span>`;"normal"===i?s+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="far fa-fw fa-star"></i></span>`:"expert"===i?s+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star-half-alt"></i></span>`:"master"===i&&(s+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i></span>`),n.punctuation&&(s+='<span aria-label="punctuation" data-balloon-pos="up" style="font-weight:900">!?</span>'),n.numbers&&(s+='<span aria-label="numbers" data-balloon-pos="up" style="font-weight:900">15</span>'),n.blindMode&&(s+='<span aria-label="blind mode" data-balloon-pos="up"><i class="fas fa-fw fa-eye-slash"></i></span>'),n.lazyMode&&(s+='<span aria-label="lazy mode" data-balloon-pos="up"><i class="fas fa-fw fa-couch"></i></span>'),"none"!==n.funbox&&void 0!==n.funbox&&(s+=`<span aria-label="${n.funbox.replace(/_/g," ")}" data-balloon-pos="up"><i class="fas fa-gamepad"></i></span>`),void 0===n.chartData?s+='<span class="miniResultChartButton" aria-label="No chart data found" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':"toolong"===n.chartData?s+='<span class="miniResultChartButton" aria-label="Chart history is not available for long tests" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':s+=`<span class="miniResultChartButton" aria-label="View graph" data-balloon-pos="up" filteredResultsId="${e}" style="opacity: 1"><i class="fas fa-chart-line"></i></span>`;let r,d="";void 0!==n.tags&&n.tags.length>0&&(n.tags.forEach((e=>{var t;null===(t=u.getSnapshot().tags)||void 0===t||t.forEach((t=>{e===t._id&&(d+=t.name+", ")}))})),d=d.substring(0,d.length-2)),r=void 0===n.tags?"[]":JSON.stringify(n.tags);let l=`<span id="resultEditTags" resultId="${n._id}" tags='${r}' aria-label="no tags" data-balloon-pos="up" style="opacity: .25"><i class="fas fa-fw fa-tag"></i></span>`;""!==d&&(l=void 0!==n.tags&&n.tags.length>1?`<span id="resultEditTags" resultId="${n._id}" tags='${r}' aria-label="${d}" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i></span>`:`<span id="resultEditTags" resultId="${n._id}" tags='${r}' aria-label="${d}" data-balloon-pos="up"><i class="fas fa-fw fa-tag"></i></span>`);let c="-";n.consistency&&(c=n.consistency.toFixed(2)+"%");let f=null===(o=n.isPb)||void 0===o?void 0:o.toString();f=f?'<i class="fas fa-fw fa-crown"></i>':"";let m="-";m=n.charStats?n.charStats.join("/"):n.correctChars+"/"+n.incorrectChars+"/-/-";const h=new Date(n.timestamp);$(".pageAccount .history table tbody").append(`\n    <tr class="resultRow" id="result-${e}">\n    <td>${f}</td>\n    <td>${(p.default.alwaysShowCPM?5*n.wpm:n.wpm).toFixed(2)}</td>\n    <td>${a}</td>\n    <td>${n.acc.toFixed(2)}%</td>\n    <td>${c}</td>\n    <td>${m}</td>\n    <td>${n.mode} ${n.mode2}</td>\n    <td class="infoIcons">${s}</td>\n    <td>${l}</td>\n    <td>${(0,T.default)(h,"dd MMM yyyy")}<br>\n    ${(0,T.default)(h,"HH:mm")}\n    </td>\n    </tr>`)}P=n,P>=M.length?$(".pageAccount .loadMoreButton").addClass("hidden"):$(".pageAccount .loadMoreButton").removeClass("hidden")}function L(){$(".pageAccount .history table tbody").empty(),c.accountActivity.data.datasets[0].data=[],c.accountActivity.data.datasets[1].data=[],c.accountHistory.data.datasets[0].data=[],c.accountHistory.data.datasets[1].data=[],c.accountActivity.updateColors(),c.accountHistory.updateColors()}t.reset=L;let A=0,W=[],E=[];function j(e){const t=_.smooth(W.map((e=>e.y)),e),o=_.smooth(E.map((e=>e.y)),e),n=W.map(((e,o)=>{const n=Object.assign({},e);return n.y=t[o],n})),a=E.map(((e,t)=>{const n=Object.assign({},e);return n.y=o[t],n}));c.accountHistory.data.datasets[0].data=n,c.accountHistory.data.datasets[1].data=a,(n.length||a.length)&&c.accountHistory.update()}function B(){const e=$(".pageAccount .content .below .smoothing input").val();$(".pageAccount .content .below .smoothing .value").text(e),j(parseInt(e))}function D(){if(null===u.getSnapshot())C.add("Missing account data. Please refresh.",-1),$(".pageAccount .preloader").html("Missing account data. Please refresh.");else if(void 0===u.getSnapshot().results)y.updateBar(45,!0),u.getUserResults().then((e=>{w.addAllFromToday(),e&&(d.updateActive(),D())}));else{console.log("using db snap");try{!function(){var e;y.updateText("Displaying stats..."),y.updateBar(100),console.log("updating account page"),l.update(),c.accountHistory.updateColors(),c.accountActivity.updateColors(),h.update(),g.update(),W=[],E=[];const t=[];P=0;let o=0,n="",a=0,i=0,s=0,r=0,f=0,m=0,w=0,S=0;const T={total:0,count:0,last10Total:0,last10Count:0,max:0};A=0;let L=0,j=0,R=0,q=0;const I={};M=[],$(".pageAccount .history table tbody").empty(),null===(e=u.getSnapshot().results)||void 0===e||e.forEach((e=>{var l,c,h,g,y;try{let t=e.difficulty;if(null==t&&(t="normal"),!d.getFilter("difficulty",t))return void(k&&console.log("skipping result due to difficulty filter",e));if(!d.getFilter("mode",e.mode))return void(k&&console.log("skipping result due to mode filter",e));if("time"==e.mode){let t="custom";if([15,30,60,120].includes(parseInt(e.mode2))&&(t=e.mode2),!d.getFilter("time",t))return void(k&&console.log("skipping result due to time filter",e))}else if("words"==e.mode){let t="custom";if([10,25,50,100,200].includes(parseInt(e.mode2))&&(t=e.mode2),!d.getFilter("words",t))return void(k&&console.log("skipping result due to word filter",e))}if(null!=e.quoteLength){let t;if(0===e.quoteLength?t="short":1===e.quoteLength?t="medium":2===e.quoteLength?t="long":3===e.quoteLength&&(t="thicc"),void 0!==t&&!d.getFilter("quoteLength",t))return void(k&&console.log("skipping result due to quoteLength filter",e))}let o=d.getFilter("language",null!==(l=e.language)&&void 0!==l?l:"english");if("english_expanded"===e.language&&d.getFilter("language","english_1k")&&(o=!0),!o)return void(k&&console.log("skipping result due to language filter",e));let n="off";if(e.punctuation&&(n="on"),!d.getFilter("punctuation",n))return void(k&&console.log("skipping result due to punctuation filter",e));let a="off";if(e.numbers&&(a="on"),!d.getFilter("numbers",a))return void(k&&console.log("skipping result due to numbers filter",e));if("none"===e.funbox||void 0===e.funbox){if(!d.getFilter("funbox","none"))return void(k&&console.log("skipping result due to funbox filter",e))}else if(!d.getFilter("funbox",e.funbox))return void(k&&console.log("skipping result due to funbox filter",e));let i=!0;if(void 0===e.tags||0===e.tags.length)(null===(c=u.getSnapshot().tags)||void 0===c?void 0:c.length)?d.getFilter("tags","none")&&(i=!1):i=!1;else{const t=null===(h=u.getSnapshot().tags)||void 0===h?void 0:h.map((e=>e._id));if(void 0===t)return;e.tags.forEach((e=>{i&&((null==t?void 0:t.includes(e))?d.getFilter("tags",e)&&(i=!1):d.getFilter("tags","none")&&(i=!1))}))}if(i)return void(k&&console.log("skipping result due to tag filter",e));const s=Math.abs(e.timestamp-Date.now())/1e3;let r=!0;if((d.getFilter("date","all")||d.getFilter("date","last_day")&&s<=86400||d.getFilter("date","last_week")&&s<=604800||d.getFilter("date","last_month")&&s<=2592e3||d.getFilter("date","last_3months")&&s<=7776e3)&&(r=!1),r)return void(k&&console.log("skipping result due to date filter",e));M.push(e)}catch(t){C.add("Something went wrong when filtering. Resetting filters.",0),console.log(e),console.error(t),d.reset(),d.updateActive(),D()}const v=new Date(e.timestamp);v.setSeconds(0),v.setMinutes(0),v.setHours(0),v.setMilliseconds(0);const b=v.getTime();Object.keys(I).includes(String(b))?(I[b].amount++,I[b].time+=e.testDuration+e.incompleteTestSeconds-(null!==(g=e.afkDuration)&&void 0!==g?g:0),I[b].totalWpm+=e.wpm):I[b]={amount:1,time:e.testDuration+e.incompleteTestSeconds-(null!==(y=e.afkDuration)&&void 0!==y?y:0),totalWpm:e.wpm};let $=0;if(null==e.testDuration&&"custom"!==e.mode2&&"zen"!==e.mode2?"time"==e.mode?$=e.mode2:"words"==e.mode&&($=e.mode2/e.wpm*60):$=parseFloat(e.testDuration),null!=e.incompleteTestSeconds?$+=e.incompleteTestSeconds:null!=e.restartCount&&e.restartCount>0&&($+=$/4*e.restartCount),A+=$,r<10&&(r++,f+=e.wpm,S+=e.acc,void 0!==e.consistency&&(R+=e.consistency)),s++,void 0!==e.consistency&&(q++,j+=e.consistency,e.consistency>L&&(L=e.consistency)),null!=e.rawWpm&&(T.last10Count<10&&(T.last10Count++,T.last10Total+=e.rawWpm),T.total+=e.rawWpm,T.count++,e.rawWpm>T.max&&(T.max=e.rawWpm)),e.acc>m&&(m=e.acc),w+=e.acc,null!=e.restartCount&&(a+=e.restartCount),W.push({x:e.timestamp,y:p.default.alwaysShowCPM?_.roundTo2(5*e.wpm):e.wpm,wpm:p.default.alwaysShowCPM?_.roundTo2(5*e.wpm):e.wpm,acc:e.acc,mode:e.mode,mode2:e.mode2,punctuation:e.punctuation,language:e.language,timestamp:e.timestamp,difficulty:e.difficulty,raw:p.default.alwaysShowCPM?_.roundTo2(5*e.rawWpm):e.rawWpm}),t.push(e.wpm),E.push({x:e.timestamp,y:100-e.acc,errorRate:100-e.acc}),e.wpm>o){const t=e.punctuation?",<br>with punctuation":"",a=e.numbers?",<br> "+(e.punctuation?"&":"")+"with numbers":"";o=e.wpm,n="custom"==e.mode?e.mode:e.mode+" "+e.mode2+t+a}i+=e.wpm})),p.default.alwaysShowCPM?$(".pageAccount .group.history table thead tr td:nth-child(2)").text("cpm"):$(".pageAccount .group.history table thead tr td:nth-child(2)").text("wpm"),O();const V=[],F=[],K=[];Object.keys(I).forEach((e=>{const t=parseInt(e);V.push({x:t,y:I[t].amount}),F.push({x:t,y:_.roundTo2(I[t].time),amount:I[t].amount}),K.push({x:t,y:_.roundTo2((p.default.alwaysShowCPM?5*I[t].totalWpm:I[t].totalWpm)/I[t].amount)})}));const H=c.accountActivity.options.scales;p.default.alwaysShowCPM?H.avgWpm.title.text="Average Cpm":H.avgWpm.title.text="Average Wpm",c.accountActivity.data.datasets[0].data=F,c.accountActivity.data.datasets[1].data=K;const z=c.accountHistory.options.scales;p.default.alwaysShowCPM?z.wpm.title.text="Characters per Minute":z.wpm.title.text="Words per Minute",c.accountHistory.data.datasets[0].data=W,c.accountHistory.data.datasets[1].data=E;const N=W.map((e=>e.y)),Q=Math.min(...N),U=Math.max(...N);z.wpm.max=Math.floor(U)+(10-Math.floor(U)%10),p.default.startGraphsAtZero?z.wpm.min=0:z.wpm.min=Math.floor(Q),W==[]||0==W.length?($(".pageAccount .group.noDataError").removeClass("hidden"),$(".pageAccount .group.chart").addClass("hidden"),$(".pageAccount .group.dailyActivityChart").addClass("hidden"),$(".pageAccount .group.history").addClass("hidden"),$(".pageAccount .triplegroup.stats").addClass("hidden")):($(".pageAccount .group.noDataError").addClass("hidden"),$(".pageAccount .group.chart").removeClass("hidden"),$(".pageAccount .group.dailyActivityChart").removeClass("hidden"),$(".pageAccount .group.history").removeClass("hidden"),$(".pageAccount .triplegroup.stats").removeClass("hidden")),$(".pageAccount .timeTotalFiltered .val").text(_.secondsToString(Math.round(A),!0,!0)),p.default.alwaysShowCPM?($(".pageAccount .highestWpm .title").text("highest cpm"),$(".pageAccount .highestWpm .val").text(_.roundTo2(5*o))):($(".pageAccount .highestWpm .title").text("highest wpm"),$(".pageAccount .highestWpm .val").text(_.roundTo2(o))),p.default.alwaysShowCPM?($(".pageAccount .averageWpm .title").text("average cpm"),$(".pageAccount .averageWpm .val").text(Math.round(5*i/s))):($(".pageAccount .averageWpm .title").text("average wpm"),$(".pageAccount .averageWpm .val").text(Math.round(i/s))),p.default.alwaysShowCPM?($(".pageAccount .averageWpm10 .title").text("average cpm (last 10 tests)"),$(".pageAccount .averageWpm10 .val").text(Math.round(5*f/r))):($(".pageAccount .averageWpm10 .title").text("average wpm (last 10 tests)"),$(".pageAccount .averageWpm10 .val").text(Math.round(f/r))),p.default.alwaysShowCPM?($(".pageAccount .highestRaw .title").text("highest raw cpm"),$(".pageAccount .highestRaw .val").text(_.roundTo2(5*T.max))):($(".pageAccount .highestRaw .title").text("highest raw wpm"),$(".pageAccount .highestRaw .val").text(_.roundTo2(T.max))),p.default.alwaysShowCPM?($(".pageAccount .averageRaw .title").text("average raw cpm"),$(".pageAccount .averageRaw .val").text(Math.round(5*T.total/T.count))):($(".pageAccount .averageRaw .title").text("average raw wpm"),$(".pageAccount .averageRaw .val").text(Math.round(T.total/T.count))),p.default.alwaysShowCPM?($(".pageAccount .averageRaw10 .title").text("average raw cpm (last 10 tests)"),$(".pageAccount .averageRaw10 .val").text(Math.round(5*T.last10Total/T.last10Count))):($(".pageAccount .averageRaw10 .title").text("average raw wpm (last 10 tests)"),$(".pageAccount .averageRaw10 .val").text(Math.round(T.last10Total/T.last10Count))),$(".pageAccount .highestWpm .mode").html(n),$(".pageAccount .testsTaken .val").text(s),$(".pageAccount .highestAcc .val").text(m+"%"),$(".pageAccount .avgAcc .val").text(Math.round(w/s)+"%"),$(".pageAccount .avgAcc10 .val").text(Math.round(S/r)+"%"),0==j||null==j?($(".pageAccount .avgCons .val").text("-"),$(".pageAccount .avgCons10 .val").text("-")):($(".pageAccount .highestCons .val").text(L+"%"),$(".pageAccount .avgCons .val").text(Math.round(j/q)+"%"),$(".pageAccount .avgCons10 .val").text(Math.round(R/Math.min(r,q))+"%")),$(".pageAccount .testsStarted .val").text(`${s+a}`),$(".pageAccount .testsCompleted .val").text(`${s}(${Math.floor(s/(s+a)*100)}%)`),$(".pageAccount .testsCompleted .avgres").text(`\n      ${(a/s).toFixed(1)} restarts per completed test\n    `);const G=M.map((e=>e.wpm)).reverse(),J=_.findLineByLeastSquares(G),Z=(J[1][1]-J[0][1])*(3600/A),Y=Z>0?"+":"";$(".pageAccount .group.chart .below .text").text(`Speed change per hour spent typing: ${Y+_.roundTo2(p.default.alwaysShowCPM?5*Z:Z)} ${p.default.alwaysShowCPM?"cpm":"wpm"}.`),B(),c.accountActivity.updateColors(),y.updateBar(100,!0),setTimeout((()=>{"account"==x.get()&&b.show()}),125),v.set(!1),_.swapElements($(".pageAccount .preloader"),$(".pageAccount .content"),250)}()}catch(e){console.error(e),C.add(`Something went wrong: ${e}`,-1)}}}function R(e,t,o=null){if($("td").removeClass("header-sorted"),$("td").children("i").remove(),$(t).addClass("header-sorted"),M.length<2)return;const n=e;let a=!0;null!==o?1==o?$(t).append('<i class="fas fa-sort-down" aria-hidden="true"></i>'):(a=!1,$(t).append('<i class="fas fa-sort-up" aria-hidden="true"></i>')):parseInt(M[0][n])<=parseInt(M[M.length-1][n])?(a=!0,$(t).append('<i class="fas fa-sort-down" aria-hidden="true"></i>')):(a=!1,$(t).append('<i class="fas fa-sort-up", aria-hidden="true"></i>'));const i=[],s=[];for(;i.length<M.length;){let e=Number.MAX_VALUE,t=-1,o=-1;for(let i=0;i<M.length;i++)a?M[i][n]>=t&&!s.includes(i)&&(t=M[i][n],o=i):M[i][n]<=e&&!s.includes(i)&&(e=M[i][n],o=i);i.push(M[o]),s.push(o)}M=i,$(".pageAccount .history table tbody").empty(),P=0,O()}t.smoothHistory=j,t.update=D,$(".pageAccount .toggleAccuracyOnChart").on("click",(()=>{f.setChartAccuracy(!p.default.chartAccuracy)})),$(".pageAccount .toggleChartStyle").on("click",(()=>{"line"==p.default.chartStyle?f.setChartStyle("scatter"):f.setChartStyle("line")})),$(".pageAccount .loadMoreButton").on("click",(()=>{O()})),$(".pageAccount #accountHistoryChart").on("click",(()=>{var e,t,o;const n=c.accountHistoryActiveIndex;if(O(n),!window)return;const a=null!==(e=$(window).height())&&void 0!==e?e:0,i=(null!==(o=null===(t=$(`#result-${n}`).offset())||void 0===t?void 0:t.top)&&void 0!==o?o:0)-a/2;$([document.documentElement,document.body]).animate({scrollTop:i},500),$(".resultRow").removeClass("active"),$(`#result-${n}`).addClass("active")})),$(document).on("click",".pageAccount .miniResultChartButton",(e=>{var t;console.log("updating");const o=$(e.currentTarget).attr("filteredResultsId");void 0!==o&&(m.updateData(M[parseInt(o)].chartData),m.show(),m.updatePosition(e.pageX-(null!==(t=$(".pageAccount .miniResultChartWrapper").outerWidth())&&void 0!==t?t:0),e.pageY+30))})),$(document).on("click",".history-wpm-header",(()=>{R("wpm",".history-wpm-header")})),$(document).on("click",".history-raw-header",(()=>{R("rawWpm",".history-raw-header")})),$(document).on("click",".history-acc-header",(()=>{R("acc",".history-acc-header")})),$(document).on("click",".history-correct-chars-header",(()=>{R("correctChars",".history-correct-chars-header")})),$(document).on("click",".history-incorrect-chars-header",(()=>{R("incorrectChars",".history-incorrect-chars-header")})),$(document).on("click",".history-consistency-header",(()=>{R("consistency",".history-consistency-header")})),$(document).on("click",".history-date-header",(()=>{R("timestamp",".history-date-header")})),$(document).on("click",".buttonsAndTitle .buttons .button",(()=>{R("timestamp",".history-date-header",!0)})),$(".pageAccount .topFilters .button, .pageAccount .filterButtons .button ").click((()=>{setTimeout((()=>{D()}),0)})),$(".pageAccount .content .below .smoothing input").on("input",(()=>{B()})),$(".pageAccount .content .group.aboveHistory .exportCSV").on("click",(()=>{_.downloadResultsCSV(M)})),t.page=new S.default("account",$(".page.pageAccount"),"/account",(()=>{b.hide()}),(()=>s(void 0,void 0,void 0,(function*(){L()}))),(()=>{D()}),(()=>{}))},8548:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.showBar=t.updateText=t.updateBar=void 0;const u=i(o(5021)),d=r(o(2538));t.updateBar=function(e,t){const o=t?100:1e3;$(".pageLoading .fill, .pageAccount .fill").stop(!0,!0).animate({width:e+"%"},o)},t.updateText=function(e){$(".pageLoading .text, .pageAccount .text").text(e)},t.showBar=function(){return new Promise((e=>{u.swapElements($(".pageLoading .icon"),$(".pageLoading .barWrapper"),125,(()=>{e()})),u.swapElements($(".pageAccount .icon"),$(".pageAccount .barWrapper"),125,(()=>{e()}))}))},t.page=new d.default("loading",$(".page.pageLoading"),"/",(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>{}),(()=>{}))},3982:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const a=n(o(2538));t.page=new a.default("login",$(".page.pageLogin"),"/login",(()=>{}),(()=>{}),(()=>{}),(()=>{}))},2538:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n,a,i,s){this.name=e,this.element=t,this.pathname=o,this.beforeHide=n,this.afterHide=a,this.beforeShow=i,this.afterShow=s}}},4610:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.setEventDisabled=t.update=t.showAccountSection=t.updateAuthSections=t.updateDiscordSection=t.hideAccountSection=t.fillSettingsPage=t.reset=t.groups=void 0;const u=r(o(8330)),d=i(o(2426)),l=d,c=i(o(9710)),p=i(o(5021)),f=i(o(2541)),m=i(o(3902)),h=i(o(7124)),g=i(o(4981)),y=i(o(8573)),v=i(o(6030)),b=i(o(537)),w=i(o(9073)),C=i(o(4375)),S=i(o(8612)),_=r(o(2538)),x=o(9280);function T(){$(".pageSettings .section.themes .favThemes.buttons").empty(),$(".pageSettings .section.themes .allThemes.buttons").empty(),$(".pageSettings .section.themes .allCustomThemes.buttons").empty(),$(".pageSettings .section.languageGroups .buttons").empty(),$(".pageSettings select").empty().select2("destroy"),$(".pageSettings .section.funbox .buttons").empty(),$(".pageSettings .section.fontFamily .buttons").empty()}t.groups={},t.reset=T;let k=!1;function M(){return s(this,void 0,void 0,(function*(){d.default.showKeyTips?$(".pageSettings .tip").removeClass("hidden"):$(".pageSettings .tip").addClass("hidden");const e=$(".pageSettings .section.language select").empty();(yield p.getLanguageGroups()).forEach((t=>{let o=`<optgroup label="${t.name}">`;t.languages.forEach((e=>{o+=`<option value="${e}">\n        ${e.replace(/_/g," ")}\n      </option>`})),o+="</optgroup>",e.append(o)})),e.select2({width:"100%"});const o=$(".pageSettings .section.layout select").empty();o.append("<option value='default'>off</option>"),Object.keys(yield p.getLayoutsList()).forEach((e=>{o.append(`<option value='${e}'>${e.replace(/_/g," ")}</option>`)})),o.select2({width:"100%"});const n=$(".pageSettings .section.keymapLayout select").empty();n.append("<option value='overrideSync'>emulator sync</option>"),Object.keys(yield p.getLayoutsList()).forEach((e=>{"default"!=e.toString()&&n.append(`<option value='${e}'>${e.replace(/_/g," ")}</option>`)})),n.select2({width:"100%"});const a=$(".pageSettings .section.autoSwitchThemeInputs select.light").empty(),i=$(".pageSettings .section.autoSwitchThemeInputs select.dark").empty();for(const e of yield p.getThemesList())a.append(`<option value='${e.name}'>${e.name.replace(/_/g," ")}</option>`),i.append(`<option value='${e.name}'>${e.name.replace(/_/g," ")}</option>`);a.select2({width:"100%"}),i.select2({width:"100%"}),$(".pageSettings .section.autoSwitchThemeInputs select.light").val(d.default.themeLight).trigger("change.select2"),$(".pageSettings .section.autoSwitchThemeInputs select.dark").val(d.default.themeDark).trigger("change.select2");const r=$(".pageSettings .section.funbox .buttons").empty();r.append("<div class=\"funbox button\" funbox='none'>none</div>"),p.getFunboxList().then((e=>{e.forEach((e=>{"mirror"===e.name?r.append(`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit" type="${e.type}" style="transform:scaleX(-1);">${e.name.replace(/_/g," ")}</div>`):r.append(`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit" type="${e.type}">${e.name.replace(/_/g," ")}</div>`)}))}));let f=!0;const m=$(".pageSettings .section.fontFamily .buttons").empty();p.getFontsList().then((e=>{e.forEach((e=>{d.default.fontFamily===e.name&&(f=!1),m.append(`<div class="button${d.default.fontFamily===e.name?" active":""}" style="font-family:${void 0!==e.display?e.display:e.name}" fontFamily="${e.name.replace(/ /g,"_")}" tabindex="0"\n        onclick="this.blur();">${void 0!==e.display?e.display:e.name}</div>`)})),m.append(f?`<div class="button no-auto-handle custom active" onclick="this.blur();">Custom (${d.default.fontFamily.replace(/_/g," ")})</div>`:'<div class="button no-auto-handle custom" onclick="this.blur();">Custom</div>')})),$(".pageSettings .section.customBackgroundSize input").val(d.default.customBackground),$(".pageSettings .section.customLayoutfluid input").val(d.default.customLayoutfluid.replace(/#/g," ")),D(!0),k?Object.keys(t.groups).forEach((e=>{t.groups[e].updateInput()})):(yield function(){return s(this,void 0,void 0,(function*(){yield l.loadPromise,t.groups.smoothCaret=new u.default("smoothCaret",l.setSmoothCaret,"button"),t.groups.difficulty=new u.default("difficulty",l.setDifficulty,"button"),t.groups.quickTab=new u.default("quickTab",l.setQuickTabMode,"button"),t.groups.showLiveWpm=new u.default("showLiveWpm",l.setShowLiveWpm,"button",(()=>{t.groups.keymapMode.updateInput()})),t.groups.showLiveAcc=new u.default("showLiveAcc",l.setShowLiveAcc,"button"),t.groups.showLiveBurst=new u.default("showLiveBurst",l.setShowLiveBurst,"button"),t.groups.showTimerProgress=new u.default("showTimerProgress",l.setShowTimerProgress,"button"),t.groups.showAverage=new u.default("showAverage",l.setShowAverage,"button"),t.groups.keymapMode=new u.default("keymapMode",l.setKeymapMode,"button",(()=>{t.groups.showLiveWpm.updateInput()}),(()=>{"off"===d.default.keymapMode?($(".pageSettings .section.keymapStyle").addClass("hidden"),$(".pageSettings .section.keymapLayout").addClass("hidden"),$(".pageSettings .section.keymapLegendStyle").addClass("hidden")):($(".pageSettings .section.keymapStyle").removeClass("hidden"),$(".pageSettings .section.keymapLayout").removeClass("hidden"),$(".pageSettings .section.keymapLegendStyle").removeClass("hidden"))})),t.groups.keymapMatrix=new u.default("keymapStyle",l.setKeymapStyle,"button"),t.groups.keymapLayout=new u.default("keymapLayout",l.setKeymapLayout,"select"),t.groups.keymapLegendStyle=new u.default("keymapLegendStyle",l.setKeymapLegendStyle,"button"),t.groups.showKeyTips=new u.default("showKeyTips",l.setKeyTips,"button",void 0,(()=>{d.default.showKeyTips?$(".pageSettings .tip").removeClass("hidden"):$(".pageSettings .tip").addClass("hidden")})),t.groups.freedomMode=new u.default("freedomMode",l.setFreedomMode,"button",(()=>{t.groups.confidenceMode.updateInput()})),t.groups.strictSpace=new u.default("strictSpace",l.setStrictSpace,"button"),t.groups.oppositeShiftMode=new u.default("oppositeShiftMode",l.setOppositeShiftMode,"button"),t.groups.confidenceMode=new u.default("confidenceMode",l.setConfidenceMode,"button",(()=>{t.groups.freedomMode.updateInput(),t.groups.stopOnError.updateInput()})),t.groups.indicateTypos=new u.default("indicateTypos",l.setIndicateTypos,"button"),t.groups.hideExtraLetters=new u.default("hideExtraLetters",l.setHideExtraLetters,"button"),t.groups.blindMode=new u.default("blindMode",l.setBlindMode,"button"),t.groups.quickEnd=new u.default("quickEnd",l.setQuickEnd,"button"),t.groups.repeatQuotes=new u.default("repeatQuotes",l.setRepeatQuotes,"button"),t.groups.enableAds=new u.default("enableAds",l.setEnableAds,"button"),t.groups.alwaysShowWordsHistory=new u.default("alwaysShowWordsHistory",l.setAlwaysShowWordsHistory,"button"),t.groups.britishEnglish=new u.default("britishEnglish",l.setBritishEnglish,"button"),t.groups.singleListCommandLine=new u.default("singleListCommandLine",l.setSingleListCommandLine,"button"),t.groups.capsLockWarning=new u.default("capsLockWarning",l.setCapsLockWarning,"button"),t.groups.flipTestColors=new u.default("flipTestColors",l.setFlipTestColors,"button"),t.groups.swapEscAndTab=new u.default("swapEscAndTab",l.setSwapEscAndTab,"button"),t.groups.showOutOfFocusWarning=new u.default("showOutOfFocusWarning",l.setShowOutOfFocusWarning,"button"),t.groups.colorfulMode=new u.default("colorfulMode",l.setColorfulMode,"button"),t.groups.startGraphsAtZero=new u.default("startGraphsAtZero",l.setStartGraphsAtZero,"button"),t.groups.autoSwitchTheme=new u.default("autoSwitchTheme",l.setAutoSwitchTheme,"button"),t.groups.randomTheme=new u.default("randomTheme",l.setRandomTheme,"button"),t.groups.stopOnError=new u.default("stopOnError",l.setStopOnError,"button",(()=>{t.groups.confidenceMode.updateInput()})),t.groups.soundVolume=new u.default("soundVolume",l.setSoundVolume,"button"),t.groups.playSoundOnError=new u.default("playSoundOnError",l.setPlaySoundOnError,"button",(()=>{d.default.playSoundOnError&&c.playError()})),t.groups.playSoundOnClick=new u.default("playSoundOnClick",l.setPlaySoundOnClick,"button",(()=>{"off"!==d.default.playSoundOnClick&&c.playClick()})),t.groups.showAllLines=new u.default("showAllLines",l.setShowAllLines,"button"),t.groups.paceCaret=new u.default("paceCaret",l.setPaceCaret,"button"),t.groups.repeatedPace=new u.default("repeatedPace",l.setRepeatedPace,"button"),t.groups.minWpm=new u.default("minWpm",l.setMinWpm,"button"),t.groups.minAcc=new u.default("minAcc",l.setMinAcc,"button"),t.groups.minBurst=new u.default("minBurst",l.setMinBurst,"button"),t.groups.smoothLineScroll=new u.default("smoothLineScroll",l.setSmoothLineScroll,"button"),t.groups.lazyMode=new u.default("lazyMode",l.setLazyMode,"button"),t.groups.layout=new u.default("layout",l.setLayout,"select"),t.groups.language=new u.default("language",l.setLanguage,"select"),t.groups.fontSize=new u.default("fontSize",l.setFontSize,"button"),t.groups.pageWidth=new u.default("pageWidth",l.setPageWidth,"button"),t.groups.caretStyle=new u.default("caretStyle",l.setCaretStyle,"button"),t.groups.paceCaretStyle=new u.default("paceCaretStyle",l.setPaceCaretStyle,"button"),t.groups.timerStyle=new u.default("timerStyle",l.setTimerStyle,"button"),t.groups.highlightMode=new u.default("highlightMode",l.setHighlightMode,"button"),t.groups.timerOpacity=new u.default("timerOpacity",l.setTimerOpacity,"button"),t.groups.timerColor=new u.default("timerColor",l.setTimerColor,"button"),t.groups.fontFamily=new u.default("fontFamily",l.setFontFamily,"button",void 0,(()=>{const e=$(".pageSettings .section.fontFamily .buttons .custom");0===$(".pageSettings .section.fontFamily .buttons .active").length?(e.addClass("active"),e.text(`Custom (${d.default.fontFamily.replace(/_/g," ")})`)):e.text("Custom")})),t.groups.alwaysShowDecimalPlaces=new u.default("alwaysShowDecimalPlaces",l.setAlwaysShowDecimalPlaces,"button"),t.groups.alwaysShowCPM=new u.default("alwaysShowCPM",l.setAlwaysShowCPM,"button"),t.groups.customBackgroundSize=new u.default("customBackgroundSize",l.setCustomBackgroundSize,"button")}))}(),k=!0),D(!1),yield y.refreshButtons(),yield l.loadPromise}))}function P(){if(null==x.Auth.currentUser)$(".pageSettings .section.discordIntegration").addClass("hidden");else{if(null==f.getSnapshot())return;$(".pageSettings .section.discordIntegration").removeClass("hidden"),null==f.getSnapshot().discordId?($(".pageSettings .section.discordIntegration .buttons").removeClass("hidden"),$(".pageSettings .section.discordIntegration .info").addClass("hidden")):($(".pageSettings .section.discordIntegration .buttons").addClass("hidden"),$(".pageSettings .section.discordIntegration .info").removeClass("hidden"))}}function O(){$(".pageSettings .section.passwordAuthSettings .button").addClass("hidden"),$(".pageSettings .section.googleAuthSettings .button").addClass("hidden");const e=x.Auth.currentUser;if(!e)return;const t=e.providerData.find((e=>"password"===e.providerId)),o=e.providerData.find((e=>"google.com"===e.providerId));t?($(".pageSettings .section.passwordAuthSettings #emailPasswordAuth").removeClass("hidden"),$(".pageSettings .section.passwordAuthSettings #passPasswordAuth").removeClass("hidden")):$(".pageSettings .section.passwordAuthSettings #addPasswordAuth").removeClass("hidden"),o?($(".pageSettings .section.googleAuthSettings #removeGoogleAuth").removeClass("hidden"),t?$(".pageSettings .section.googleAuthSettings #removeGoogleAuth").removeClass("disabled"):$(".pageSettings .section.googleAuthSettings #removeGoogleAuth").addClass("disabled")):$(".pageSettings .section.googleAuthSettings #addGoogleAuth").removeClass("hidden")}function L(){$(".pageSettings .section.funbox .button").removeClass("active"),$(`.pageSettings .section.funbox .button[funbox='${d.default.funbox}']`).addClass("active")}function A(){var e;if(null!==x.Auth.currentUser&&null!==f.getSnapshot()){const t=$(".pageSettings .section.tags .tagsList").empty();null===(e=f.getSnapshot().tags)||void 0===e||e.forEach((e=>{t.append(`\n\n      <div class="buttons tag" id="${e._id}">\n        <div class="button tagButton ${e.active?"active":""}" active="${e.active}">\n          <div class="title">${e.name}</div>\n        </div>\n        <div class="clearPbButton button">\n          <i class="fas fa-crown fa-fw"></i>\n        </div>\n        <div class="editButton button">\n          <i class="fas fa-pen fa-fw"></i>\n        </div>\n        <div class="removeButton button">\n          <i class="fas fa-trash fa-fw"></i>\n        </div>\n      </div>\n\n      `)})),$(".pageSettings .section.tags").removeClass("hidden")}else $(".pageSettings .section.tags").addClass("hidden")}function W(){var e;if(null!==x.Auth.currentUser&&null!==f.getSnapshot()){const t=$(".pageSettings .section.presets .presetsList").empty();null===(e=f.getSnapshot().presets)||void 0===e||e.forEach((e=>{t.append(`\n      <div class="buttons preset" id="${e._id}">\n        <div class="button presetButton">\n          <div class="title">${e.name}</div>\n        </div>\n        <div class="editButton button">\n          <i class="fas fa-pen fa-fw"></i>\n        </div>\n        <div class="removeButton button">\n          <i class="fas fa-trash fa-fw"></i>\n        </div>\n      </div>\n      \n      `)})),$(".pageSettings .section.presets").removeClass("hidden")}else $(".pageSettings .section.presets").addClass("hidden")}function E(){Object.keys(t.groups).forEach((e=>{t.groups[e].updateInput()})),A(),W(),L(),y.updateActiveTab(!0),y.setCustomInputs(!0),P(),O(),$(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val(d.default.paceCaretCustomSpeed),$(".pageSettings .section.minWpm input.customMinWpmSpeed").val(d.default.minWpmCustomSpeed),$(".pageSettings .section.minAcc input.customMinAcc").val(d.default.minAccCustom),$(".pageSettings .section.minBurst input.customMinBurst").val(d.default.minBurstCustomSpeed),d.default.autoSwitchTheme?$(".pageSettings .section.autoSwitchThemeInputs").removeClass("hidden"):$(".pageSettings .section.autoSwitchThemeInputs").addClass("hidden"),""!==d.default.customBackground?$(".pageSettings .section.customBackgroundFilter").removeClass("hidden"):$(".pageSettings .section.customBackgroundFilter").addClass("hidden")}function j(e){$(`.pageSettings .settingsGroup.${e}`).stop(!0,!0).slideToggle(250).toggleClass("slideup"),$(`.pageSettings .settingsGroup.${e}`).hasClass("slideup")?$(`.pageSettings .sectionGroupTitle[group=${e}] .fas`).stop(!0,!0).animate({deg:-90},{duration:250,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}):$(`.pageSettings .sectionGroupTitle[group=${e}] .fas`).stop(!0,!0).animate({deg:0},{duration:250,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}})}t.fillSettingsPage=M,t.hideAccountSection=function(){$(".sectionGroupTitle[group='account']").addClass("hidden"),$(".settingsGroup.account").addClass("hidden"),$(".pageSettings .section.needsAccount").addClass("hidden")},t.updateDiscordSection=P,t.updateAuthSections=O,t.showAccountSection=function(){$(".sectionGroupTitle[group='account']").removeClass("hidden"),$(".settingsGroup.account").removeClass("hidden"),$(".pageSettings .section.needsAccount").removeClass("hidden"),A(),W(),P()},t.update=E,$(document).on("focusout",".pageSettings .section.paceCaret input.customPaceCaretSpeed",(()=>{l.setPaceCaretCustomSpeed(parseInt($(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val()))})),$(document).on("click",".pageSettings .section.paceCaret .button.save",(()=>{l.setPaceCaretCustomSpeed(parseInt($(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val()))})),$(document).on("focusout",".pageSettings .section.minWpm input.customMinWpmSpeed",(()=>{l.setMinWpmCustomSpeed(parseInt($(".pageSettings .section.minWpm input.customMinWpmSpeed").val()))})),$(document).on("click",".pageSettings .section.minWpm .button.save",(()=>{l.setMinWpmCustomSpeed(parseInt($(".pageSettings .section.minWpm input.customMinWpmSpeed").val()))})),$(document).on("focusout",".pageSettings .section.minAcc input.customMinAcc",(()=>{l.setMinAccCustom(parseInt($(".pageSettings .section.minAcc input.customMinAcc").val()))})),$(document).on("click",".pageSettings .section.minAcc .button.save",(()=>{l.setMinAccCustom(parseInt($(".pageSettings .section.minAcc input.customMinAcc").val()))})),$(document).on("focusout",".pageSettings .section.minBurst input.customMinBurst",(()=>{l.setMinBurstCustomSpeed(parseInt($(".pageSettings .section.minBurst input.customMinBurst").val()))})),$(document).on("click",".pageSettings .section.minBurst .button.save",(()=>{l.setMinBurstCustomSpeed(parseInt($(".pageSettings .section.minBurst input.customMinBurst").val()))})),$(document).on("click",".pageSettings .section.funbox .button",(e=>{const t=$(e.currentTarget).attr("funbox"),o=$(e.currentTarget).attr("type");m.setFunbox(t,o),L()})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .tagButton",(e=>{const t=e.currentTarget,o=$(t).parent(".tag").attr("id");h.toggle(o),$(t).toggleClass("active")})),$(document).on("click",".pageSettings .section.presets .presetsList .preset .presetButton",(e=>{const t=e.currentTarget,o=$(t).parent(".preset").attr("id");console.log("Applying Preset"),B=!0,g.apply(o),B=!1,E()})),$("#importSettingsButton").on("click",(()=>{b.show("import")})),$("#exportSettingsButton").on("click",(()=>{const e=JSON.stringify(d.default);navigator.clipboard.writeText(e).then((function(){v.add("JSON Copied to clipboard",0)}),(function(){b.show("export")}))})),$(".pageSettings .sectionGroupTitle").on("click",(e=>{j($(e.currentTarget).attr("group"))})),$(".pageSettings .section.apeKeys #showApeKeysPopup").on("click",(()=>{S.show()})),$(".pageSettings .section.customBackgroundSize .inputAndButton .save").on("click",(()=>{l.setCustomBackground($(".pageSettings .section.customBackgroundSize .inputAndButton input").val())})),$(".pageSettings .section.customBackgroundSize .inputAndButton input").keypress((e=>{"Enter"===e.key&&l.setCustomBackground($(".pageSettings .section.customBackgroundSize .inputAndButton input").val())})),$(".pageSettings .section.customLayoutfluid .inputAndButton .save").on("click",(()=>{l.setCustomLayoutfluid($(".pageSettings .section.customLayoutfluid .inputAndButton input").val()).then((e=>{e&&v.add("Custom layoutfluid saved",1)}))})),$(".pageSettings .section.customLayoutfluid .inputAndButton .input").keypress((e=>{"Enter"===e.key&&l.setCustomLayoutfluid($(".pageSettings .section.customLayoutfluid .inputAndButton input").val()).then((e=>{e&&v.add("Custom layoutfluid saved",1)}))})),$(".quickNav .links a").on("click",(e=>{const t=e.target.innerText;$(`.pageSettings .settingsGroup.${t}`).hasClass("slideup")&&j(t)})),$(document).on("change",".pageSettings .section.autoSwitchThemeInputs select.light",(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||l.setThemeLight(t.val())})),$(document).on("change",".pageSettings .section.autoSwitchThemeInputs select.dark",(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||l.setThemeDark(t.val())}));let B=!1;function D(e){B=e}t.setEventDisabled=D,w.subscribe((e=>{"fullConfigChange"===e&&D(!0),"fullConfigChangeFinished"===e&&D(!1),B||"saveToLocalStorage"===e||"settings"===C.get()&&"theme"!==e&&E()})),t.page=new _.default("settings",$(".page.pageSettings"),"/settings",(()=>{}),(()=>s(void 0,void 0,void 0,(function*(){T()}))),(()=>s(void 0,void 0,void 0,(function*(){yield M(),E()}))),(()=>{}))},1518:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const u=r(o(2426)),d=i(o(5601)),l=i(o(9881)),c=i(o(5082)),p=i(o(3929)),f=i(o(2850)),m=i(o(3902)),h=r(o(2538));t.page=new h.default("test",$(".page.pageTest"),"/",(()=>s(void 0,void 0,void 0,(function*(){f.restart(),m.clear(),p.hide(),$("#wordsInput").focusout()}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>{p.show(),d.resetIncomplete(),c.set(),f.restart(void 0,void 0,void 0,void 0,!0),m.activate(u.default.funbox)}),(()=>{l.focusWords()}))},8612:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const u=r(o(9063)),d=i(o(8308)),l=i(o(6030)),c=r(o(9546));let p={};function f(){const e=p;if(!e)return;const t=$("#apeKeysPopupWrapper table tbody");t.empty();const o=Object.keys(e);0!==o.length?o.forEach((o=>{const n=e[o];t.append(`\n      <tr keyId="${o}">\n        <td>\n          <div class="icon-button">\n            ${n.enabled?'<i class="fas fa-check-square"></i>':'<i class="far fa-fw fa-square"></i>'}\n          </div>\n        </td>\n        <td>${n.name}</td>\n        <td>${(0,c.default)(new Date(n.createdOn),"dd MMM yyyy HH:mm")}</td>\n        <td>${(0,c.default)(new Date(n.modifiedOn),"dd MMM yyyy HH:mm")}</td>\n        <td>${-1===n.lastUsedOn?"-":(0,c.default)(new Date(n.lastUsedOn),"dd MMM yyyy HH:mm")}</td>\n        <td>\n          <div class="keyButtons">\n            <div class="button edit">\n              <i class="fas fa-fw fa-pen"></i>\n            </div>\n            <div class="button delete">\n              <i class="fas fa-fw fa-trash-alt"></i>\n            </div>\n          </div>\n        </td>\n      </tr>\n    `)})):t.append("<tr><td colspan='6' style='text-align: center;'>No keys found</td></tr>")}function m(){$("#apeKeysPopupWrapper").hasClass("hidden")||$("#apeKeysPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#apeKeysPopupWrapper").addClass("hidden")}))}t.hide=m,t.show=function(){return s(this,void 0,void 0,(function*(){$("#apeKeysPopupWrapper").hasClass("hidden")&&(yield function(){return s(this,void 0,void 0,(function*(){d.show();const e=yield u.default.apeKeys.get();d.hide(),200===e.status?p=e.data:l.add("Error getting ape keys: "+e.message,-1)}))}(),f(),$("#apeKeysPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#apeKeysPopup textarea").trigger("focus").select()})))}))},$("#apeKeysPopupWrapper").on("mousedown",(e=>{"apeKeysPopupWrapper"===$(e.target).attr("id")&&m()})),$("#apeKeysPopup .generateApeKey").on("click",(()=>{m()})),$(document).on("click","#apeKeysPopup table .keyButtons .button",(()=>{m()})),$(document).on("click","#apeKeysPopup table .icon-button",(e=>s(void 0,void 0,void 0,(function*(){const t=$(e.target).closest("tr").attr("keyId"),o=null==p?void 0:p[t];if(!o||!p)return;d.show();const n=yield u.default.apeKeys.update(t,{enabled:!o.enabled});if(d.hide(),200!==n.status)return l.add("Failed to update key: "+n.message,-1);p[t].enabled=!o.enabled,f(),o.enabled?l.add("Key active",1):l.add("Key inactive",1)}))))},2246:()=>{$(document.body).on("click","#contactPopupButton",(()=>{$("#contactPopupWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)})),$(document.body).on("click","#contactPopupWrapper",(e=>{"contactPopupWrapper"===$(e.target).attr("id")&&$("#contactPopupWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#contactPopupWrapper").addClass("hidden")}))}))},563:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const s=i(o(2426)),r=i(o(5082)),u=i(o(2850)),d=i(o(6030));function l(e){const t=[...e.toLowerCase().matchAll(/((-\s*)?\d+(\.\d+)?\s*[hms]?)/g)].map((e=>{const t=e[0],o=parseFloat(t.replace(/\s+/g,""));return t.includes("h")?3600*o:t.includes("m")?60*o:o})).reduce(((e,t)=>e+t),0);return Math.floor(t)}function c(){const e=l($("#customTestDurationPopup input").val());let t="";t=e<0?"NEGATIVE TIME":0==e?"Infinite test":"Total time: "+function(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=e%3600%60,a=[];return t>0&&a.push(`${t} hour${1===t?"":"s"}`),o>0&&a.push(`${o} minute${1===o?"":"s"}`),n>0&&a.push(`${n} second${1===n?"":"s"}`),3===a.length?`${a[0]}, ${a[1]} and ${a[2]}`:2===a.length?`${a[0]} and ${a[1]}`:`${a[0]}`}(e),$("#customTestDurationPopup .preview").text(t)}function p(){$("#customTestDurationPopupWrapper").hasClass("hidden")&&$("#customTestDurationPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#customTestDurationPopup input").trigger("focus").select()})),c()}function f(){$("#customTestDurationPopupWrapper").hasClass("hidden")||$("#customTestDurationPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#customTestDurationPopupWrapper").addClass("hidden")}))}function m(){const e=l($("#customTestDurationPopup input").val());null!==e&&!isNaN(e)&&e>=0?(s.setTimeConfig(e),r.set(),u.restart(),e>=1800?d.add("Stay safe and take breaks!",0):0==e&&d.add("Infinite time! Make sure to use Bail Out from the command line to save your result.",0,7)):d.add("Custom time must be at least 1",0),f()}t.show=p,t.hide=f,$("#customTestDurationPopupWrapper").on("click",(e=>{"customTestDurationPopupWrapper"===$(e.target).attr("id")&&f()})),$("#customTestDurationPopup input").keyup((e=>{c(),"Enter"===e.key&&m()})),$("#customTestDurationPopup .button").on("click",(()=>{m()})),$(document).on("click","#top .config .time .text-button",(e=>{"custom"==$(e.currentTarget).attr("timeConfig")&&p()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#customTestDurationPopupWrapper").hasClass("hidden")||(f(),e.preventDefault())}))},5895:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isVisible=t.hide=t.show=void 0;const s=i(o(8844)),r=i(o(5082)),u=i(o(2850)),d=i(o(5369)),l=i(o(2426)),c=l,p=i(o(5021)),f=i(o(9957)),m=i(o(6030)),h=i(o(2239)),g="#customTextPopupWrapper",y="#customTextPopup";function v(){$(g).hasClass("hidden")&&($(`${y} .checkbox input`).prop("checked")?$(`${y} .inputs .randomInputFields`).removeClass("hidden"):$(`${y} .inputs .randomInputFields`).addClass("hidden"),$(g).stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{let e=s.text.join(s.delimiter);e=e.replace(/\n /g,"\n"),$(`${y} textarea`).val(e),$(`${y} .wordcount input`).val(-1===s.word?"":s.word),$(`${y} .time input`).val(-1===s.time?"":s.time),$(`${y} textarea`).trigger("focus")}))),setTimeout((()=>{$(`${y} textarea`).trigger("focus")}),150)}function b(){$(g).hasClass("hidden")||$(g).stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$(g).addClass("hidden")}))}t.show=v,$(`${y} .delimiterCheck input`).change((()=>{let e;if(e=$(`${y} .delimiterCheck input`).prop("checked")?"|":" ",$(`${y} textarea`).val()!=s.text.join(s.delimiter)){let t=$(`${y} textarea`).val().split(s.delimiter).join(e);t=t.replace(/\n /g,"\n"),$(`${y} textarea`).val(t)}else{let t=s.text.join(e);t=t.replace(/\n /g,"\n"),$(`${y} textarea`).val(t)}s.setDelimiter(e)})),t.hide=b,t.isVisible=function(){return!$(g).hasClass("hidden")},$(g).mousedown((e=>{"customTextPopupWrapper"===$(e.target).attr("id")&&b()})),$(`${y} .inputs .checkbox input`).change((()=>{$(`${y} .checkbox input`).prop("checked")?$(`${y} .inputs .randomInputFields`).removeClass("hidden"):$(`${y} .inputs .randomInputFields`).addClass("hidden")})),$(`${y} textarea`).on("keypress",(e=>{"Enter"===e.code&&e.ctrlKey&&$(`${y} .button.apply`).click()})),$(`${y} .randomInputFields .wordcount input`).on("keypress",(()=>{$(`${y} .randomInputFields .time input`).val("")})),$(`${y} .randomInputFields .time input`).on("keypress",(()=>{$(`${y} .randomInputFields .wordcount input`).val("")})),$(`${y} .buttonsTop .showSavedTexts`).on("click",(()=>{h.show()})),$(`${y} .buttonsTop .saveCustomText`).on("click",(()=>{b()})),$(document).on("click",`${y} .button.apply`,(()=>{!function(){let e=$(`${y} textarea`).val().normalize();e=e.trim(),e=e.replace(/\\\\t/gm,"\t"),e=e.replace(/\\\\n/gm,"\n"),e=e.replace(/\\t/gm,"\t"),e=e.replace(/\\n/gm,"\n"),e=e.replace(/ +/gm," "),e=e.replace(/( *(\r\n|\r|\n) *)/g,"\n "),$(`${y} .typographyCheck input`).prop("checked")&&(e=p.cleanTypographySymbols(e)),e=e.replace(/[\u2060]/g,""),s.setText(e.split(s.delimiter)),s.setWord(parseInt($(`${y} .wordcount input`).val())||-1),s.setTime(parseInt($(`${y} .time input`).val())||-1),s.setIsWordRandom($(`${y} .checkbox input`).prop("checked")&&s.word>-1),s.setIsTimeRandom($(`${y} .checkbox input`).prop("checked")&&s.time>-1),!$(`${y} .checkbox input`).prop("checked")||s.isTimeRandom||s.isWordRandom?$(`${y} .checkbox input`).prop("checked")&&s.isTimeRandom&&s.isWordRandom?m.add("You need to pick between word count or time in seconds to start a random custom test.",0,5):((s.isWordRandom&&0===s.word||s.isTimeRandom&&0===s.time)&&m.add("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,7),d.clearActive(),r.set(),"custom"!==l.default.mode&&c.setMode("custom"),u.restart(),b()):m.add("You need to specify word count or time in seconds to start a random custom test.",0,5)}()})),$(document).on("click",`${y} .wordfilter`,(()=>{f.show()})),$(document).on("click","#top .config .customText .text-button",(()=>{v()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#customTextPopupWrapper").hasClass("hidden")||(b(),e.preventDefault())}))},1799:(e,t)=>{function o(){$("#customThemeShareWrapper").hasClass("hidden")||($("#customThemeShareWrapper input").val(""),$("#customThemeShareWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#customThemeShareWrapper").addClass("hidden")})))}Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0,t.show=function(e){$("#customThemeShareWrapper").hasClass("hidden")&&($("#customThemeShareWrapper input").val(e),$("#customThemeShareWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#customThemeShare input").trigger("focus"),$("#customThemeShare input").select(),$("#customThemeShare input").trigger("focus")})))},$("#customThemeShareWrapper").on("click",(e=>{"customThemeShareWrapper"===$(e.target).attr("id")&&o()})),$("#customThemeShare .button").on("click",(()=>{o()}))},3218:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const s=i(o(2426)),r=i(o(5082)),u=i(o(2850)),d=i(o(6030));function l(){$("#customWordAmountPopupWrapper").hasClass("hidden")&&$("#customWordAmountPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#customWordAmountPopup input").trigger("focus").select()}))}function c(){$("#customWordAmountPopupWrapper").hasClass("hidden")||$("#customWordAmountPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#customWordAmountPopupWrapper").addClass("hidden")}))}function p(){const e=parseInt($("#customWordAmountPopup input").val());null!==e&&!isNaN(e)&&e>=0?(s.setWordCount(e),r.set(),u.restart(),e>2e3?d.add("Stay safe and take breaks!",0):0==e&&d.add("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,7)):d.add("Custom word amount must be at least 1",0),c()}t.show=l,t.hide=c,$("#customWordAmountPopupWrapper").on("click",(e=>{"customWordAmountPopupWrapper"===$(e.target).attr("id")&&c()})),$("#customWordAmountPopup input").on("keypress",(e=>{"Enter"===e.key&&p()})),$("#customWordAmountPopup .button").on("click",(()=>{p()})),$(document).on("click","#top .config .wordCount .text-button",(e=>{"custom"==$(e.currentTarget).attr("wordCount")&&l()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#customWordAmountPopupWrapper").hasClass("hidden")||(c(),e.preventDefault())}))},7205:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=r(o(9063)),d=i(o(2541)),l=i(o(2426)),c=i(o(8308)),p=i(o(4610)),f=i(o(6030));function m(e,t,o){"add"===e?($("#presetWrapper #presetEdit").attr("action","add"),$("#presetWrapper #presetEdit .title").html("Create new preset"),$("#presetWrapper #presetEdit .button").html('<i class="fas fa-plus"></i>'),$("#presetWrapper #presetEdit input.text").val(""),$("#presetWrapper #presetEdit input.text").removeClass("hidden"),$("#presetWrapper #presetEdit label").addClass("hidden")):"edit"===e&&t&&o?($("#presetWrapper #presetEdit").attr("action","edit"),$("#presetWrapper #presetEdit").attr("presetid",t),$("#presetWrapper #presetEdit .title").html("Edit preset"),$("#presetWrapper #presetEdit .button").html('<i class="fas fa-pen"></i>'),$("#presetWrapper #presetEdit input.text").val(o),$("#presetWrapper #presetEdit input.text").removeClass("hidden"),$("#presetWrapper #presetEdit label input").prop("checked",!1),$("#presetWrapper #presetEdit label").removeClass("hidden")):"remove"===e&&t&&($("#presetWrapper #presetEdit").attr("action","remove"),$("#presetWrapper #presetEdit").attr("presetid",t),$("#presetWrapper #presetEdit .title").html("Remove preset "+o),$("#presetWrapper #presetEdit .button").html('<i class="fas fa-check"></i>'),$("#presetWrapper #presetEdit input.text").addClass("hidden"),$("#presetWrapper #presetEdit label").addClass("hidden")),$("#presetWrapper").hasClass("hidden")&&$("#presetWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#presetWrapper #presetEdit input").trigger("focus")}))}function h(){$("#presetWrapper").hasClass("hidden")||($("#presetWrapper #presetEdit").attr("action",""),$("#presetWrapper #presetEdit").attr("tagid",""),$("#presetWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#presetWrapper").addClass("hidden")})))}function g(){return s(this,void 0,void 0,(function*(){const e=$("#presetWrapper #presetEdit").attr("action"),t=$("#presetWrapper #presetEdit input").val(),o=$("#presetWrapper #presetEdit").attr("presetId"),n=$("#presetWrapper #presetEdit label input").prop("checked");let a={};if(n&&"edit"===e||"add"===e){a=l.getConfigChanges();const e=(d.getSnapshot().tags||[]).filter((e=>e.active)).map((e=>e._id));a.tags=e}const i=d.getSnapshot().presets||[];if(h(),c.show(),"add"===e){const e=yield u.default.presets.add(t,a);200!==e.status?f.add("Failed to add preset: "+e.message,-1):(f.add("Preset added",1,2),i.push({name:t,config:a,_id:e.data.presetId}))}else if("edit"===e){const e=yield u.default.presets.edit(o,t,a);if(200!==e.status)f.add("Failed to edit preset: "+e.message,-1);else{f.add("Preset updated",1);const e=i.filter((e=>e._id===o))[0];e.name=t,n&&(e.config=a)}}else if("remove"===e){const e=yield u.default.presets.delete(o);200!==e.status?f.add("Failed to remove preset: "+e.message,-1):(f.add("Preset removed",1),i.forEach(((e,t)=>{e._id===o&&i.splice(t,1)})))}p.update(),c.hide()}))}t.show=m,$("#presetWrapper").on("click",(e=>{"presetWrapper"===$(e.target).attr("id")&&h()})),$("#presetWrapper #presetEdit .button").on("click",(()=>{g()})),$("#presetWrapper #presetEdit input").on("keypress",(e=>{"Enter"===e.key&&g()})),$(document).on("click",".pageSettings .section.presets .addPresetButton",(()=>{m("add")})),$(document).on("click",".pageSettings .section.presets .editButton",(e=>{m("edit",$(e.currentTarget).parent(".preset").attr("id"),$(e.currentTarget).siblings(".button").children(".title").text())})),$(document).on("click",".pageSettings .section.presets .removeButton",(e=>{m("remove",$(e.currentTarget).parent(".preset").attr("id"),$(e.currentTarget).siblings(".button").children(".title").text())}))},8230:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=r(o(9063)),d=i(o(9861)),l=i(o(2541)),c=i(o(6030)),p=i(o(8308)),f=i(o(4610)),m=i(o(6122));function h(e,t,o){"add"===e?($("#tagsWrapper #tagsEdit").attr("action","add"),$("#tagsWrapper #tagsEdit .title").html("Add new tag"),$("#tagsWrapper #tagsEdit .button").html('<i class="fas fa-plus"></i>'),$("#tagsWrapper #tagsEdit input").val(""),$("#tagsWrapper #tagsEdit input").removeClass("hidden")):"edit"===e&&t&&o?($("#tagsWrapper #tagsEdit").attr("action","edit"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Edit tag name"),$("#tagsWrapper #tagsEdit .button").html('<i class="fas fa-pen"></i>'),$("#tagsWrapper #tagsEdit input").val(o),$("#tagsWrapper #tagsEdit input").removeClass("hidden")):"remove"===e&&t&&o?($("#tagsWrapper #tagsEdit").attr("action","remove"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Remove tag "+o),$("#tagsWrapper #tagsEdit .button").html('<i class="fas fa-check"></i>'),$("#tagsWrapper #tagsEdit input").addClass("hidden")):"clearPb"===e&&t&&o&&($("#tagsWrapper #tagsEdit").attr("action","clearPb"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Clear PB for tag "+o),$("#tagsWrapper #tagsEdit .button").html('<i class="fas fa-check"></i>'),$("#tagsWrapper #tagsEdit input").addClass("hidden")),$("#tagsWrapper").hasClass("hidden")&&$("#tagsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#tagsWrapper #tagsEdit input").trigger("focus")}))}function g(){$("#tagsWrapper").hasClass("hidden")||($("#tagsWrapper #tagsEdit").attr("action",""),$("#tagsWrapper #tagsEdit").attr("tagid",""),$("#tagsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#tagsWrapper").addClass("hidden")})))}function y(){var e,t,o,n;return s(this,void 0,void 0,(function*(){const a=$("#tagsWrapper #tagsEdit").attr("action"),i=$("#tagsWrapper #tagsEdit input").val(),s=$("#tagsWrapper #tagsEdit").attr("tagid");if(g(),p.show(),"add"===a){const t=yield u.default.users.createTag(i);200!==t.status?c.add("Failed to add tag: "+t.message,-1):(c.add("Tag added",1),null===(e=l.getSnapshot().tags)||void 0===e||e.push({name:t.data.name,_id:t.data._id}),m.updateButtons(),f.update(),d.updateTags())}else if("edit"===a){const e=yield u.default.users.editTag(s,i);200!==e.status?c.add("Failed to edit tag: "+e.message,-1):(c.add("Tag updated",1),null===(t=l.getSnapshot().tags)||void 0===t||t.forEach((e=>{e._id===s&&(e.name=i)})),m.updateButtons(),f.update(),d.updateTags())}else if("remove"===a){const e=yield u.default.users.deleteTag(s);200!==e.status?c.add("Failed to remove tag: "+e.message,-1):(c.add("Tag removed",1),null===(o=l.getSnapshot().tags)||void 0===o||o.forEach(((e,t)=>{var o;e._id===s&&(null===(o=l.getSnapshot().tags)||void 0===o||o.splice(t,1))})),m.updateButtons(),f.update(),d.updateTags())}else if("clearPb"===a){const e=yield u.default.users.deleteTagPersonalBest(s);200!==e.status?c.add("Failed to clear tag pb: "+e.message,-1):(c.add("Tag PB cleared",1),null===(n=l.getSnapshot().tags)||void 0===n||n.forEach((e=>{e._id===s&&(e.personalBests={time:{},words:{},custom:{custom:[]},zen:{zen:[]},quote:{custom:[]}})})),m.updateButtons(),f.update(),d.updateTags())}p.hide()}))}t.show=h,$("#tagsWrapper").on("click",(e=>{"tagsWrapper"===$(e.target).attr("id")&&g()})),$("#tagsWrapper #tagsEdit .button").on("click",(()=>{y()})),$("#tagsWrapper #tagsEdit input").on("keypress",(e=>{"Enter"===e.key&&y()})),$(document).on("click",".pageSettings .section.tags .addTagButton",(()=>{h("add")})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .editButton",(e=>{h("edit",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .clearPbButton",(e=>{h("clearPb",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .removeButton",(e=>{h("remove",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())}))},537:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const s=i(o(2426)),r=i(o(6030));function u(){if(!$("#settingsImportWrapper").hasClass("hidden")){if(""!==$("#settingsImportWrapper input").val()){try{s.apply(JSON.parse($("#settingsImportWrapper input").val()))}catch(e){r.add("An error occured while importing settings: "+e,-1)}s.saveFullConfigToLocalStorage()}$("#settingsImportWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#settingsImportWrapper").addClass("hidden")}))}}t.show=function(e,t){$("#settingsImportWrapper").hasClass("hidden")&&($("#settingsImportWrapper").attr("mode",e),"export"===e?($("#settingsImportWrapper .button").addClass("hidden"),$("#settingsImportWrapper input").val(null!=t?t:"")):"import"===e&&$("#settingsImportWrapper .button").removeClass("hidden"),$("#settingsImportWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#settingsImportWrapper input").trigger("focus"),$("#settingsImportWrapper input").select(),$("#settingsImportWrapper input").trigger("focus")})))},$("#settingsImport .button").on("click",(()=>{u()})),$("#settingsImportWrapper").on("click",(e=>{"settingsImportWrapper"===$(e.target).attr("id")&&u()}))},1330:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=i(o(2850)),u=s(o(2426)),d=i(o(2426)),l=i(o(5082)),c=i(o(3218)),p=i(o(563)),f=i(o(4694)),m=i(o(5895)),h=i(o(9073)),g=$("#mobileTestConfigPopup");function y(){g.find(".button").removeClass("active"),g.find(`.modeGroup .button[mode='${u.default.mode}']`).addClass("active"),g.find(".timeGroup").addClass("hidden"),g.find(".wordsGroup").addClass("hidden"),g.find(".quoteGroup").addClass("hidden"),g.find(".customGroup").addClass("hidden"),g.find(`.${u.default.mode}Group`).removeClass("hidden"),u.default.punctuation?g.find(".punctuation").addClass("active"):g.find(".punctuation").removeClass("active"),u.default.numbers?g.find(".numbers").addClass("active"):g.find(".numbers").removeClass("active"),"time"===u.default.mode?(g.find(`.timeGroup .button[time='${u.default.time}']`).addClass("active"),g.find(".punctuation").removeClass("disabled"),g.find(".numbers").removeClass("disabled")):"words"===u.default.mode?(g.find(`.wordsGroup .button[words='${u.default.words}']`).addClass("active"),g.find(".punctuation").removeClass("disabled"),g.find(".numbers").removeClass("disabled")):"quote"===u.default.mode?(g.find(`.quoteGroup .button[quote='${u.default.quoteLength}']`).addClass("active"),g.find(".punctuation").addClass("disabled"),g.find(".numbers").addClass("disabled")):"zen"===u.default.mode?(g.find(".punctuation").addClass("disabled"),g.find(".numbers").addClass("disabled")):"custom"===u.default.mode&&(g.find(".punctuation").removeClass("disabled"),g.find(".numbers").removeClass("disabled"))}function v(){$("#mobileTestConfigPopupWrapper").hasClass("hidden")||$("#mobileTestConfigPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#mobileTestConfigPopupWrapper").addClass("hidden")}))}t.update=y,$("#mobileTestConfigPopupWrapper").on("click",(e=>{"mobileTestConfigPopupWrapper"===$(e.target).attr("id")&&v()})),$("#top .mobileConfig").on("click",(()=>{$("#mobileTestConfigPopupWrapper").hasClass("hidden")&&(y(),$("#mobileTestConfigPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100))})),g.find(".wordsGroup .button").on("click",(e=>{const t=$(e.currentTarget).attr("words");if("custom"==t)v(),c.show();else if(void 0!==t){const e=parseInt(t);d.setWordCount(e),l.set(),r.restart()}})),g.find(".timeGroup .button").on("click",(e=>{const t=$(e.currentTarget).attr("time");if("custom"==t)v(),p.show();else if(void 0!==t){const e=parseInt(t);d.setTimeConfig(e),l.set(),r.restart()}})),g.find(".quoteGroup .button").on("click",(e=>{var t;let o=null!==(t=$(e.currentTarget).attr("quote"))&&void 0!==t?t:0;-2==o?(v(),f.show()):(-1==o&&(o=[0,1,2,3]),d.setQuoteLength(o,!1,e.shiftKey),l.set(),r.restart())})),g.find(".customChange").on("click",(()=>{v(),m.show()})),g.find(".punctuation").on("click",(()=>{d.setPunctuation(!u.default.punctuation),l.set(),r.restart()})),g.find(".numbers").on("click",(()=>{d.setNumbers(!u.default.numbers),l.set(),r.restart()})),g.find(".modeGroup .button").on("click",(e=>{if($(e.currentTarget).hasClass("active"))return;const t=$(e.currentTarget).attr("mode");d.setMode(t),l.set(),r.restart()})),$("#mobileTestConfigPopup .button").on("click",(()=>{y()})),h.subscribe((e=>{"mode"===e&&y()}))},2083:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(2541)),u=s(o(9546));function d(e){$("#pbTablesPopupWrapper").hasClass("hidden")&&(function(e){$("#pbTablesPopup table tbody").empty(),$($("#pbTablesPopup table thead tr td")[0]).text(e);const t=r.getSnapshot(),o=void 0===t.personalBests?void 0:t.personalBests[e];if(void 0===o)return;const n=[];let a;Object.keys(o).forEach((function(e){let t=o[e];t=t.sort((function(e,t){return t.wpm-e.wpm})),t.forEach((function(t){t.mode2=e,n.push(t)}))})),n.forEach((e=>{let t='-<br><span class="sub">-</span>';const o=new Date(e.timestamp);e.timestamp&&(t=(0,u.default)(o,"dd MMM yyyy")+"<br><div class='sub'>"+(0,u.default)(o,"HH:mm")+"</div>"),$("#pbTablesPopup table tbody").append(`\n      <tr>\n        <td>${a===e.mode2?"":e.mode2}</td>\n        <td>\n          ${e.wpm}\n          <br />\n          <span class="sub">${e.acc?e.acc+"%":"-"}</span>\n        </td>\n        <td>\n          ${e.raw?e.raw:"-"}\n          <br />\n          <span class="sub">${e.consistency?e.consistency+"%":"-"}</span>\n        </td>\n        <td>${e.difficulty}</td>\n        <td>${e.language?e.language.replace(/_/g," "):"-"}</td>\n        <td>${e.punctuation?'<i class="fas fa-check"></i>':""}</td>\n        <td>${e.lazyMode?'<i class="fas fa-check"></i>':""}</td>\n        <td>${t}</td>\n      </tr>\n    `),a=e.mode2}))}(e),$("#pbTablesPopup .title").text(`All ${e} personal bests`),$("#pbTablesPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100))}$("#pbTablesPopupWrapper").on("click",(e=>{"pbTablesPopupWrapper"===$(e.target).attr("id")&&($("#pbTablesPopupWrapper").hasClass("hidden")||$("#pbTablesPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#pbTablesPopupWrapper").addClass("hidden"),$("#pbTablesPopup table tbody").empty()})))})),$(".pageAccount .button.showAllTimePbs").on("click",(()=>{d("time")})),$(".pageAccount .button.showAllWordsPbs").on("click",(()=>{d("words")}))},5760:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=r(o(9063)),d=i(o(8308)),l=i(o(6030)),c=r(o(9546));let p=[];function f(){$("#quoteApprovePopupWrapper .quotes").empty(),p.forEach(((e,t)=>{const o=$(`\n      <div class="quote" id="${t}" dbid="${e._id}">\n        <textarea class="text">${e.text}</textarea>\n        <input type="text" class="source" placeholder="Source" value="${e.source}">\n        <div class="buttons">\n          <div class="icon-button disabled undo" aria-label="Undo changes" data-balloon-pos="left"><i class="fas fa-fw fa-undo-alt"></i></div>\n          <div class="icon-button refuse" aria-label="Refuse quote" data-balloon-pos="left"><i class="fas fa-fw fa-times"></i></div>\n          <div class="icon-button approve" aria-label="Approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-check"></i></div>\n          <div class="icon-button edit hidden" aria-label="Edit and approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-pen"></i></div>\n        </div>\n        <div class="bottom">\n          <div class="length ${e.text.length<60?"red":""}">Quote length: ${e.text.length}</div>\n          <div class="language">Language: ${e.language}</div>\n          <div class="timestamp">Submitted on: ${(0,c.default)(new Date(e.timestamp),"dd MMM yyyy HH:mm")}</div>\n        </div>\n      </div>\n    `);$("#quoteApprovePopupWrapper .quotes").append(o)}))}function m(e){var t;const o=null===(t=$(`#quoteApprovePopup .quote[id=${e}] .text`).val())||void 0===t?void 0:t.length;$(`#quoteApprovePopup .quote[id=${e}] .length`).text("Quote length: "+o),o<60?$(`#quoteApprovePopup .quote[id=${e}] .length`).addClass("red"):$(`#quoteApprovePopup .quote[id=${e}] .length`).removeClass("red")}function h(){return s(this,void 0,void 0,(function*(){d.show();const e=yield u.default.quotes.get();if(d.hide(),200!==e.status)return l.add("Failed to get new quotes: "+e.message,-1);p=e.data,f()}))}function g(){$("#quoteApprovePopupWrapper").hasClass("hidden")||$("#quoteApprovePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#quoteApprovePopupWrapper").addClass("hidden"),$("#quoteApprovePopupWrapper .quotes").empty()}))}function y(e){$(e).closest(".quote").find(".icon-button").removeClass("disabled"),$(e).closest(".quote").find(".edit").hasClass("hidden")&&$(e).closest(".quote").find(".undo").addClass("disabled")}t.show=function(e=!1){return s(this,void 0,void 0,(function*(){$("#quoteApprovePopupWrapper").hasClass("hidden")&&(p=[],h(),$("#quoteApprovePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:100))}))},t.hide=g,$("#quoteApprovePopupWrapper").on("mousedown",(e=>{"quoteApprovePopupWrapper"===$(e.target).attr("id")&&g()})),$("#quoteApprovePopupWrapper .button.refreshList").on("click",(()=>{$("#quoteApprovePopupWrapper .quotes").empty(),h()})),$(document).on("click","#quoteApprovePopup .quote .undo",(e=>s(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .text`).val(p[t].text),$(`#quoteApprovePopup .quote[id=${t}] .source`).val(p[t].source),$(`#quoteApprovePopup .quote[id=${t}] .undo`).addClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).removeClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).addClass("hidden"),m(t)})))),$(document).on("click","#quoteApprovePopup .quote .approve",(e=>s(void 0,void 0,void 0,(function*(){var t;if(!confirm("Are you sure?"))return;const o=parseInt($(e.target).closest(".quote").attr("id")),n=$(e.target).closest(".quote").attr("dbid"),a=e.target;$(a).closest(".quote").find(".icon-button").addClass("disabled"),$(a).closest(".quote").find("textarea, input").prop("disabled",!0),d.show();const i=yield u.default.quotes.approveSubmission(n);if(d.hide(),200!==i.status)return y(a),$(a).closest(".quote").find("textarea, input").prop("disabled",!1),l.add("Failed to approve quote: "+i.message,-1);l.add(null!==(t="Quote approved. "+i.message)&&void 0!==t?t:"",1),p.splice(o,1),f()})))),$(document).on("click","#quoteApprovePopup .quote .refuse",(e=>s(void 0,void 0,void 0,(function*(){if(!confirm("Are you sure?"))return;const t=parseInt($(e.target).closest(".quote").attr("id")),o=$(e.target).closest(".quote").attr("dbid"),n=e.target;$(n).closest(".quote").find(".icon-button").addClass("disabled"),$(n).closest(".quote").find("textarea, input").prop("disabled",!0),d.show();const a=yield u.default.quotes.rejectSubmission(o);if(d.hide(),200!==a.status)return y(n),$(n).closest(".quote").find("textarea, input").prop("disabled",!1),l.add("Failed to refuse quote: "+a.message,-1);l.add("Quote refused.",1),p.splice(t,1),f()})))),$(document).on("click","#quoteApprovePopup .quote .edit",(e=>s(void 0,void 0,void 0,(function*(){var t;if(!confirm("Are you sure?"))return;const o=parseInt($(e.target).closest(".quote").attr("id")),n=$(e.target).closest(".quote").attr("dbid"),a=$(`#quoteApprovePopup .quote[id=${o}] .text`).val(),i=$(`#quoteApprovePopup .quote[id=${o}] .source`).val(),s=e.target;$(s).closest(".quote").find(".icon-button").addClass("disabled"),$(s).closest(".quote").find("textarea, input").prop("disabled",!0),d.show();const r=yield u.default.quotes.approveSubmission(n,a,i);if(d.hide(),200!==r.status)return y(s),$(s).closest(".quote").find("textarea, input").prop("disabled",!1),l.add("Failed to approve quote: "+r.message,-1);l.add(null!==(t="Quote edited and approved. "+r.message)&&void 0!==t?t:"",1),p.splice(o,1),f()})))),$(document).on("input","#quoteApprovePopup .quote .text",(e=>s(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .undo`).removeClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).addClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).removeClass("hidden"),m(t)})))),$(document).on("input","#quoteApprovePopup .quote .source",(e=>s(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .undo`).removeClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).addClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).removeClass("hidden")}))))},8800:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearQuoteStats=t.show=t.getQuoteStats=void 0;const u=r(o(9063)),d=i(o(2541)),l=i(o(6983)),c=i(o(8308)),p=i(o(6030));let f=0,m=null,h=null;function g(e){return e.totalRating&&e.ratings?Math.round(e.totalRating/e.ratings*10)/10:0}function y(e){return s(this,void 0,void 0,(function*(){if(!e)return;h=e;const t=yield u.default.quotes.getRating(h);if(c.hide(),200===t.status)return t.data?(m=t.data,m&&!m.average&&(m.average=g(m)),m):{};p.add("Failed to get quote ratings: "+t.message,-1)}))}function v(e){const t=e||f;$("#quoteRatePopup .star").removeClass("active");for(let e=1;e<=t;e++)$(`#quoteRatePopup .star[rating=${e}]`).addClass("active")}function b(e,t=!0){var o,n;if($("#quoteRatePopupWrapper").hasClass("hidden")){t&&($("#quoteRatePopup .quote .text").text("-"),$("#quoteRatePopup .quote .source .val").text("-"),$("#quoteRatePopup .quote .id .val").text("-"),$("#quoteRatePopup .quote .length .val").text("-"),$("#quoteRatePopup .ratingCount .val").text("-"),$("#quoteRatePopup .ratingAverage .val").text("-")),h=e,f=0;const a=d.getSnapshot(),i=null===(n=null===(o=null==a?void 0:a.quoteRatings)||void 0===o?void 0:o[h.language])||void 0===n?void 0:n[h.id];i&&(f=i),v(),function(){if(!h)return;let e;0==h.group?e="short":1==h.group?e="medium":2==h.group?e="long":3==h.group&&(e="thicc"),$("#quoteRatePopup .quote .text").text(h.text),$("#quoteRatePopup .quote .source .val").text(h.source),$("#quoteRatePopup .quote .id .val").text(h.id),$("#quoteRatePopup .quote .length .val").text(e),function(){var e,t,o;s(this,void 0,void 0,(function*(){m||(yield y()),$("#quoteRatePopup .ratingCount .val").text(null!==(e=null==m?void 0:m.ratings)&&void 0!==e?e:"0"),$("#quoteRatePopup .ratingAverage .val").text(null!==(o=null===(t=null==m?void 0:m.average)||void 0===t?void 0:t.toFixed(1))&&void 0!==o?o:"-")}))}()}(),$("#quoteRatePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)}}function w(){$("#quoteRatePopupWrapper").hasClass("hidden")||$("#quoteRatePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#quoteRatePopupWrapper").addClass("hidden")}))}t.getQuoteStats=y,t.show=b,t.clearQuoteStats=function(){m=null},$("#quoteRatePopupWrapper").on("click",(e=>{"quoteRatePopupWrapper"===$(e.target).attr("id")&&w()})),$("#quoteRatePopup .stars .star").hover((e=>{v(parseInt($(e.currentTarget).attr("rating")))})),$("#quoteRatePopup .stars .star").on("click",(e=>{const t=parseInt($(e.currentTarget).attr("rating"));f=t})),$("#quoteRatePopup .stars .star").mouseout((()=>{$("#quoteRatePopup .star").removeClass("active"),v()})),$("#quoteRatePopup .submitButton").on("click",(()=>{!function(){var e,t,o;s(this,void 0,void 0,(function*(){if(0===f)return p.add("Please select a rating");if(!h)return;w();const n=yield u.default.quotes.addRating(h,f);if(c.hide(),200!==n.status)return p.add("Failed to submit quote rating: "+n.message,-1);const a=d.getSnapshot(),i=null!==(e=a.quoteRatings)&&void 0!==e?e:{};if(null===(t=null==i?void 0:i[h.language])||void 0===t?void 0:t[h.id]){const e=i[h.language][h.id],t=f-e;i[h.language][h.id]=f,m={ratings:null==m?void 0:m.ratings,totalRating:isNaN(null==m?void 0:m.totalRating)?0:(null==m?void 0:m.totalRating)+t,quoteId:h.id,language:h.language},p.add("Rating updated",1)}else i[h.language]||(i[h.language]={}),i[h.language][h.id]=f,(null==m?void 0:m.ratings)&&m.totalRating?(m.ratings++,m.totalRating+=f):m={ratings:1,totalRating:f,quoteId:h.id,language:h.language},p.add("Rating submitted",1);a.quoteRatings=i,d.setSnapshot(a),m.average=g(m),$(".pageTest #result #rateQuoteButton .rating").text(null===(o=m.average)||void 0===o?void 0:o.toFixed(1)),$(".pageTest #result #rateQuoteButton .icon").removeClass("far"),$(".pageTest #result #rateQuoteButton .icon").addClass("fas")}))}()})),$(".pageTest #rateQuoteButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){b(l.randomQuote)}))))},2662:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=r(o(9063)),d=r(o(2426)),l=i(o(6983)),c=i(o(8308)),p=i(o(6030)),f=r(o(7313)),m={previousPopupShowCallback:void 0,quoteToReport:void 0},h={quoteId:-1,previousPopupShowCallback:()=>{},noAnim:!1};function g(e=h){var t;return s(this,void 0,void 0,(function*(){if($("#quoteReportPopupWrapper").hasClass("hidden")){const{quoteId:o,previousPopupShowCallback:n,noAnim:a}=e;m.previousPopupShowCallback=n;const{quotes:i}=yield f.default.getQuotes(d.default.language);m.quoteToReport=i.find((e=>e.id===o)),$("#quoteReportPopup .quote").text(null===(t=m.quoteToReport)||void 0===t?void 0:t.text),$("#quoteReportPopup .reason").val("Grammatical error"),$("#quoteReportPopup .comment").val(""),$("#quoteReportPopup .characterCount").text("-"),$("#quoteReportPopup .reason").select2({minimumResultsForSearch:1/0}),$("#quoteReportPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},a?0:100,(()=>{$("#quoteReportPopup textarea").trigger("focus").select()}))}}))}function y(){return s(this,void 0,void 0,(function*(){if(!$("#quoteReportPopupWrapper").hasClass("hidden")){const e=!!m.previousPopupShowCallback;$("#quoteReportPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:100,(()=>{grecaptcha.reset(1),$("#quoteReportPopupWrapper").addClass("hidden"),m.previousPopupShowCallback&&m.previousPopupShowCallback()}))}}))}t.show=g,t.hide=y,$("#quoteReportPopupWrapper").on("mousedown",(e=>{"quoteReportPopupWrapper"===$(e.target).attr("id")&&y()})),$("#quoteReportPopup .comment").on("input",(()=>{setTimeout((()=>{const e=$("#quoteReportPopup .comment").val().length;$("#quoteReportPopup .characterCount").text(e),e>250?$("#quoteReportPopup .characterCount").addClass("red"):$("#quoteReportPopup .characterCount").removeClass("red")}),1)})),$("#quoteReportPopup .submit").on("click",(()=>s(void 0,void 0,void 0,(function*(){yield function(){var e;return s(this,void 0,void 0,(function*(){const t=grecaptcha.getResponse(1);if(!t)return p.add("Please complete the captcha.");const o=null===(e=m.quoteToReport)||void 0===e?void 0:e.id.toString(),n=d.default.language,a=$("#quoteReportPopup .reason").val(),i=$("#quoteReportPopup .comment").val(),s=t;if(!o)return p.add("Please select a quote.");if(!a)return p.add("Please select a valid report reason.");const r=i.length-250;if(r>0)return p.add(`Report comment is ${r} character(s) too long.`);c.show();const l=yield u.default.quotes.report(o,n,a,i,s);if(c.hide(),200!==l.status)return p.add("Failed to report quote: "+l.message,-1);p.add("Report submitted. Thank you!",1),y()}))}()})))),$(".pageTest #reportQuoteButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e;g({quoteId:null===(e=l.randomQuote)||void 0===e?void 0:e.id,noAnim:!1})}))))},4694:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.hide=t.show=t.setSelectedId=t.selectedId=void 0;const u=i(o(9881)),d=i(o(2426)),l=d,c=i(o(2541)),p=i(o(5082)),f=i(o(6030)),m=i(o(8295)),h=i(o(5760)),g=i(o(2662)),y=o(134),v=o(2731),b=o(2018),w=r(o(7313)),C=o(9280);t.selectedId=1,t.setSelectedId=function(e){t.selectedId=e};const S={};function _(e,t){return 0===t.length?e:(0,b.splitByAndKeep)(e,'.,"/#!$%^&*;:{}=-_`~() '.split("")).map((e=>t.find((t=>e.startsWith(t)))?`<span class="highlight">${e}</span>`:e)).join("")}function x(e){return s(this,void 0,void 0,(function*(){const{quotes:t}=yield w.default.getQuotes(d.default.language),o=function(e,t,o){if(e in S)return S[e];const n=(0,y.buildSearchService)(t,(e=>`${e.text} ${e.id} ${e.source}`));return S[e]=n,n}(d.default.language,t),{results:n,matchedQueryTerms:a}=o.query(e),i=function(e){const t=$("#quoteSearchPopup .quoteLengthFilter").val();if(0===t.length)return e;const o=t.map((e=>parseInt(e,10)));return e.filter((e=>o.includes(e.group)))}(""===e?t:n),s=$("#quoteSearchResults");s.empty(),i.slice(0,100).forEach((e=>{const t=function(e,t){let o;o=e.length<101?"short":e.length<301?"medium":e.length<601?"long":"thicc";const n=!C.Auth.currentUser;return`\n  <div class="searchResult" id="${e.id}">\n    <div class="text">\n      ${_(e.text,t)}\n    </div>\n    <div class="id">\n      <div class="sub">id</div>\n      <span class="quote-id">\n        ${_(e.id.toString(),t)}\n      </span>\n    </div>\n    <div class="length">\n      <div class="sub">length</div>\n      ${o}\n    </div>\n    <div class="source">\n      <div class="sub">source</div>\n      ${_(e.source,t)}</div>\n    <div class="icon-button report ${n&&"hidden"}" aria-label="Report quote" data-balloon-pos="left">\n      <i class="fas fa-flag report"></i>\n    </div>\n  </div>\n  `}(e,a);s.append(t)}));const r=i.length>100?"<span style='opacity: 0.5'>(only showing 100)</span>":"";$("#extraResults").html(`${i.length} results ${r}`)}))}function T(e=!0){var t;return s(this,void 0,void 0,(function*(){if($("#quoteSearchPopupWrapper").hasClass("hidden")){e&&$("#quoteSearchPopup input").val("");const o=$("#quoteSearchPopup input").val();C.Auth.currentUser?$("#quoteSearchPopup #gotoSubmitQuoteButton").removeClass("hidden"):$("#quoteSearchPopup #gotoSubmitQuoteButton").addClass("hidden"),(null===(t=c.getSnapshot())||void 0===t?void 0:t.quoteMod)?$("#quoteSearchPopup #goToApproveQuotes").removeClass("hidden"):$("#quoteSearchPopup #goToApproveQuotes").addClass("hidden"),$("#quoteSearchPopup .quoteLengthFilter").select2({placeholder:"Filter by length",maximumSelectionLength:1/0,multiple:!0,width:"100%",data:[{id:0,text:"short",selected:!1},{id:1,text:"medium",selected:!1},{id:2,text:"long",selected:!1},{id:3,text:"thicc",selected:!1}]}),$("#quoteSearchPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{e&&$("#quoteSearchPopup input").trigger("focus").select(),x(o)}))}}))}function k(e=!1,t=!0){$("#quoteSearchPopupWrapper").hasClass("hidden")||$("#quoteSearchPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:100,(()=>{$("#quoteSearchPopupWrapper").addClass("hidden"),t&&(u.focusWords(),$("#quoteSearchPopup .quoteLengthFilter").val([]),$("#quoteSearchPopup .quoteLengthFilter").trigger("change"))}))}t.show=T,t.hide=k,t.apply=function(e){let o;return isNaN(e)&&(e=parseInt(document.getElementById("searchBox").value)),null!==e&&!isNaN(e)&&e>=0?(l.setQuoteLength(-2,!1),t.selectedId=e,p.set(),o=!0):(f.add("Quote ID must be at least 1",0),o=!1),k(),o};const M=(0,v.debounce)((()=>{x(document.getElementById("searchBox").value)}));$("#quoteSearchPopup .searchBox").on("keyup",(e=>{"Escape"!==e.code&&M()})),$("#quoteSearchPopup .quoteLengthFilter").on("change",M),$("#quoteSearchPopupWrapper").on("click",(e=>{"quoteSearchPopupWrapper"===$(e.target).attr("id")&&k()})),$(document).on("click","#quoteSearchPopup #gotoSubmitQuoteButton",(()=>{k(!0),m.show(!0)})),$(document).on("click","#quoteSearchPopup #goToApproveQuotes",(()=>{k(!0),h.show(!0)})),$(document).on("click","#quoteSearchPopup .report",(e=>s(void 0,void 0,void 0,(function*(){const t=e.target.closest(".searchResult").id,o=parseInt(t);k(!0,!1),g.show({quoteId:o,noAnim:!0,previousPopupShowCallback:()=>{T(!1)}})})))),$(document).on("click","#top .config .quoteLength .text-button",(e=>{var t;-2==(null!==(t=$(e.currentTarget).attr("quoteLength"))&&void 0!==t?t:0)&&T()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#quoteSearchPopupWrapper").hasClass("hidden")||(k(),e.preventDefault())}))},8295:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=r(o(9063)),d=i(o(8308)),l=i(o(6030));function c(){return s(this,void 0,void 0,(function*(){const e=$("#quoteSubmitPopup #submitQuoteText").val(),t=$("#quoteSubmitPopup #submitQuoteSource").val(),o=$("#quoteSubmitPopup #submitQuoteLanguage").val(),n=$("#quoteSubmitPopup #g-recaptcha-response").val();if(!e||!t||!o)return l.add("Please fill in all fields",0);d.show();const a=yield u.default.quotes.submit(e,t,o,n);if(d.hide(),200!==a.status)return l.add("Failed to submit quote: "+a.message,-1);l.add("Quote submitted.",1),$("#quoteSubmitPopup #submitQuoteText").val(""),$("#quoteSubmitPopup #submitQuoteSource").val(""),$("#quoteSubmitPopup .characterCount").removeClass("red"),$("#quoteSubmitPopup .characterCount").text("-"),grecaptcha.reset()}))}function p(){$("#quoteSubmitPopupWrapper").hasClass("hidden")||$("#quoteSubmitPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#quoteSubmitPopupWrapper").addClass("hidden")}))}t.show=function(e=!1){return s(this,void 0,void 0,(function*(){l.add("Quote submission is disabled temporarily due to a large submission queue.",0,5)}))},t.hide=p,$("#quoteSubmitPopupWrapper").on("mousedown",(e=>{"quoteSubmitPopupWrapper"===$(e.target).attr("id")&&p()})),$(document).on("click","#quoteSubmitPopup #submitQuoteButton",(()=>{c()})),$("#quoteSubmitPopup textarea").on("input",(()=>{setTimeout((()=>{var e;const t=null===(e=$("#quoteSubmitPopup textarea").val())||void 0===e?void 0:e.length;$("#quoteSubmitPopup .characterCount").text(t),t<60?$("#quoteSubmitPopup .characterCount").addClass("red"):$("#quoteSubmitPopup .characterCount").removeClass("red")}),1)})),$("#quoteSubmitPopup input").on("keydown",(e=>{"Enter"===e.key&&c()}))},6122:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateButtons=void 0;const u=r(o(9063)),d=i(o(2541)),l=i(o(8308)),c=i(o(6030));function p(){$("#resultEditTagsPanelWrapper").hasClass("hidden")||$("#resultEditTagsPanelWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#resultEditTagsPanelWrapper").addClass("hidden")}))}t.updateButtons=function(){var e;$("#resultEditTagsPanel .buttons").empty(),null===(e=d.getSnapshot().tags)||void 0===e||e.forEach((e=>{$("#resultEditTagsPanel .buttons").append(`<div class="button tag" tagid="${e._id}">${e.name}</div>`)}))},$(document).on("click",".pageAccount .group.history #resultEditTags",(e=>{var t,o;if(null===(t=d.getSnapshot().tags)||void 0===t?void 0:t.length){const t=$(e.target).parents("span").attr("resultid"),n=$(e.target).parents("span").attr("tags");$("#resultEditTagsPanel").attr("resultid",t),$("#resultEditTagsPanel").attr("tags",n),(o=JSON.parse(n))!==[]&&$.each($("#resultEditTagsPanel .buttons .button"),((e,t)=>{var n;const a=null!==(n=$(t).attr("tagid"))&&void 0!==n?n:"";o.includes(a)?$(t).addClass("active"):$(t).removeClass("active")})),$("#resultEditTagsPanelWrapper").hasClass("hidden")&&$("#resultEditTagsPanelWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)}})),$(document).on("click","#resultEditTagsPanelWrapper .button.tag",(e=>{$(e.target).toggleClass("active")})),$("#resultEditTagsPanelWrapper").on("click",(e=>{"resultEditTagsPanelWrapper"===$(e.target).attr("id")&&p()})),$("#resultEditTagsPanel .confirmButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e;const t=$("#resultEditTagsPanel").attr("resultid"),o=[];$.each($("#resultEditTagsPanel .buttons .button"),((e,t)=>{var n;const a=null!==(n=$(t).attr("tagid"))&&void 0!==n?n:"";$(t).hasClass("active")&&o.push(a)})),l.show(),p();const n=yield u.default.results.updateTags(t,o);if(l.hide(),200!==n.status)return c.add("Failed to update result tags: "+n.message,-1);c.add("Tags updated.",1,2),null===(e=d.getSnapshot().results)||void 0===e||e.forEach((e=>{e._id===t&&(e.tags=o)}));let a,i="";o.length>0&&(o.forEach((e=>{var t;null===(t=d.getSnapshot().tags)||void 0===t||t.forEach((t=>{e===t._id&&(i+=t.name+", ")}))})),i=i.substring(0,i.length-2)),a=void 0===o?"[]":JSON.stringify(o),$(`.pageAccount #resultEditTags[resultid='${t}']`).attr("tags",a),o.length>0?($(`.pageAccount #resultEditTags[resultid='${t}']`).css("opacity",1),$(`.pageAccount #resultEditTags[resultid='${t}']`).attr("aria-label",i)):($(`.pageAccount #resultEditTags[resultid='${t}']`).css("opacity",.25),$(`.pageAccount #resultEditTags[resultid='${t}']`).attr("aria-label","no tags"))}))))},2239:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=i(o(8844));function u(e=!1){$("#savedTextsPopupWrapper").addClass("hidden"),e||$("#customTextPopupWrapper").removeClass("hidden")}t.show=function(){return s(this,void 0,void 0,(function*(){const e=r.getCustomTextNames(),t=$("#savedTextsPopup .list").empty();let o="";if(0===e.length)o+="<div>No saved custom texts found</div>";else for(const t of e)o+=`<div class="savedText">\n      <div class="button name">${t}</div>\n      <div class="button delete">\n      <i class="fas fa-fw fa-trash"></i>\n      </div>\n      </div>`;t.html(o),$("#savedTextsPopupWrapper").removeClass("hidden"),$("#customTextPopupWrapper").addClass("hidden")}))},$(document).on("click","#savedTextsPopupWrapper .list .savedText .button.name",(e=>{!function(e){const t=r.getCustomText(e);$("#customTextPopupWrapper textarea").val(t.join(r.delimiter))}($(e.target).text()),u()})),$(document).on("click","#savedTextsPopupWrapper .list .savedText .button.delete",(()=>{u(!0)})),$("#savedTextsPopupWrapper").mousedown((e=>{"savedTextsPopupWrapper"===$(e.target).attr("id")&&u()}))},2481:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.list=void 0;const u=r(o(9063)),d=i(o(517)),l=i(o(2541)),c=i(o(2426)),p=i(o(8308)),f=i(o(6030)),m=i(o(4610)),h=i(o(8612)),g=i(o(8573)),y=i(o(8844)),v=i(o(5895)),b=i(o(2239)),w=o(9280),C=o(2974);let S=null;t.list={};class _{constructor(e,t,o,n=[],a="",i="Confirm",s,r,u){this.parameters=[],this.id=e,this.type=t,this.execFn=(e,...t)=>s(e,...t),this.title=o,this.inputs=n,this.text=a,this.wrapper=$("#simplePopupWrapper"),this.element=$("#simplePopup"),this.buttonText=i,this.beforeInitFn=e=>r(e),this.beforeShowFn=e=>u(e),this.canClose=!0}reset(){this.element.html('\n    <div class="title"></div>\n    <div class="inputs"></div>\n    <div class="text"></div>\n    <div class="button"></div>')}init(){const e=this.element;e.find("input").val(""),this.reset(),e.attr("popupId",this.id),e.find(".title").text(this.title),e.find(".text").text(this.text),this.initInputs(),""===this.buttonText?e.find(".button").remove():e.find(".button").text(this.buttonText),""===this.text?e.find(".text").addClass("hidden"):e.find(".text").removeClass("hidden")}initInputs(){const e=this.element;this.inputs.length>0?("number"===this.type?this.inputs.forEach((t=>{e.find(".inputs").append(`\n            <input\n              type="number"\n              min="1"\n              value="${t.initVal}"\n              placeholder="${t.placeholder}"\n              class="${t.hidden?"hidden":""}"\n              ${t.hidden?"":"required"}\n              autocomplete="off"\n            >\n          `)})):"text"===this.type&&this.inputs.forEach((t=>{t.type?"textarea"===t.type?e.find(".inputs").append(`\n                <textarea\n                  placeholder="${t.placeholder}"\n                  class="${t.hidden?"hidden":""}"\n                  ${t.hidden?"":"required"}\n                  ${t.disabled?"disabled":""}\n                  autocomplete="off"\n                >${t.initVal}</textarea>\n              `):"checkbox"===t.type?e.find(".inputs").append(`\n                <label class="checkbox">\n                  <input type="checkbox">\n                  <div class="customTextCheckbox"></div>\n                  ${t.label}\n                </label>\n              `):e.find(".inputs").append(`\n              <input\n              type="${t.type}"\n              value="${t.initVal}"\n              placeholder="${t.placeholder}"\n              class="${t.hidden?"hidden":""}"\n              ${t.hidden?"":"required"}\n              ${t.disabled?"disabled":""}\n              autocomplete="off"\n              >\n              `):e.find(".inputs").append(`\n              <input\n                type="text"\n                value="${t.initVal}"\n                placeholder="${t.placeholder}"\n                class="${t.hidden?"hidden":""}"\n                ${t.hidden?"":"required"}\n                ${t.disabled?"disabled":""}\n                autocomplete="off"\n              >\n            `)})),e.find(".inputs").removeClass("hidden")):e.find(".inputs").addClass("hidden")}exec(){if(!this.canClose)return;const e=[];$.each($("#simplePopup input"),((t,o)=>{$(o).is(":checkbox")?e.push($(o).is(":checked")?"true":"false"):e.push($(o).val())})),this.execFn(this,...e),this.hide()}show(e=[]){S=this,this.parameters=e,this.beforeInitFn(this),this.init(),this.beforeShowFn(this),this.wrapper.stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$($("#simplePopup").find("input")[0]).trigger("focus")}))}hide(){this.canClose&&(S=null,this.wrapper.stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{this.wrapper.addClass("hidden")})))}}function x(){if(S)return S.hide();$("#simplePopupWrapper").stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{$("#simplePopupWrapper").addClass("hidden")}))}t.hide=x,$("#simplePopupWrapper").mousedown((e=>{if("simplePopupWrapper"===$(e.target).attr("id")){if(S)return S.hide();$("#simplePopupWrapper").stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{$("#simplePopupWrapper").addClass("hidden")}))}})),$(document).on("click","#simplePopupWrapper .button",(()=>{var e;const o=null!==(e=$("#simplePopup").attr("popupId"))&&void 0!==e?e:"";t.list[o].exec()})),$(document).on("keyup","#simplePopupWrapper input",(e=>{var o;if("Enter"===e.key){e.preventDefault();const n=null!==(o=$("#simplePopup").attr("popupId"))&&void 0!==o?o:"";t.list[n].exec()}})),t.list.updateEmail=new _("updateEmail","text","Update Email",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New email",initVal:""},{placeholder:"Confirm new email",initVal:""}],"","Update",((e,t,o,n)=>s(void 0,void 0,void 0,(function*(){try{const e=w.Auth.currentUser;if(null===e)return;if(o!==n)return void f.add("Emails don't match",0);if("password"===e.providerData[0].providerId){const o=C.EmailAuthProvider.credential(e.email,t);yield(0,C.reauthenticateWithCredential)(e,o)}p.show();const a=yield u.default.users.updateEmail(o,e.email);if(p.hide(),200!==a.status)return f.add("Failed to update email: "+a.message,-1);f.add("Email updated",1),setTimeout((()=>{window.location.reload()}),1e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=w.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.updateName=new _("updateName","text","Update Name",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New name",type:"text",initVal:""}],"","Update",((e,t,o)=>s(void 0,void 0,void 0,(function*(){try{const e=w.Auth.currentUser;if(null===e)return;if("password"===e.providerData[0].providerId){const o=C.EmailAuthProvider.credential(e.email,t);yield(0,C.reauthenticateWithCredential)(e,o)}else"google.com"===e.providerData[0].providerId&&(yield(0,C.reauthenticateWithPopup)(e,d.gmailProvider));p.show();const n=yield u.default.users.getNameAvailability(o);if(200!==n.status)return p.hide(),f.add("Failed to check name: "+n.message,-1);const a=yield u.default.users.updateName(o);if(200!==a.status)return p.hide(),f.add("Failed to update name: "+a.message,-1);f.add("Name updated",1),l.getSnapshot().name=o,$("#menu .icon-button.account .text").text(o)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}p.hide()}))),(e=>{const t=w.Auth.currentUser;null!==t&&"google.com"===t.providerData[0].providerId&&(e.inputs[0].hidden=!0,e.buttonText="Reauthenticate to update")}),(e=>{})),t.list.updatePassword=new _("updatePassword","text","Update Password",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New password",type:"password",initVal:""},{placeholder:"Confirm new password",type:"password",initVal:""}],"","Update",((e,t,o,n)=>s(void 0,void 0,void 0,(function*(){try{const e=w.Auth.currentUser;if(null===e)return;const a=C.EmailAuthProvider.credential(e.email,t);if(o!==n)return void f.add("New passwords don't match",0);p.show(),yield(0,C.reauthenticateWithCredential)(e,a),yield(0,C.updatePassword)(e,o),p.hide(),f.add("Password updated",1),setTimeout((()=>{window.location.reload()}),1e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=w.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.addPasswordAuth=new _("addPasswordAuth","text","Add Password Authentication",[{placeholder:"email",type:"email",initVal:""},{placeholder:"confirm email",type:"email",initVal:""},{placeholder:"new password",type:"password",initVal:""},{placeholder:"confirm new password",type:"password",initVal:""}],"","Add",((e,t,o,n,a)=>s(void 0,void 0,void 0,(function*(){t===o?n===a?yield d.addPasswordAuth(t,n):f.add("Passwords don't match",0):f.add("Emails don't match",0)}))),(()=>{}),(e=>{})),t.list.deleteAccount=new _("deleteAccount","text","Delete Account",[{placeholder:"Password",type:"password",initVal:""}],"This is the last time you can change your mind. After pressing the button everything is gone.","Delete",((e,t)=>s(void 0,void 0,void 0,(function*(){var e;try{const o=w.Auth.currentUser;if(null===o)return;if("password"===o.providerData[0].providerId){const e=C.EmailAuthProvider.credential(o.email,t);yield(0,C.reauthenticateWithCredential)(o,e)}else"google.com"===o.providerData[0].providerId&&(yield(0,C.reauthenticateWithPopup)(o,d.gmailProvider));p.show(),f.add("Deleting stats...",0);const n=yield u.default.users.delete();if(p.hide(),200!==n.status)return f.add("Failed to delete user stats: "+n.message,-1);p.show(),f.add("Deleting results...",0);const a=yield u.default.results.deleteAll();if(p.hide(),200!==a.status)return f.add("Failed to delete user results: "+a.message,-1);f.add("Deleting login information...",0),yield null===(e=w.Auth.currentUser)||void 0===e?void 0:e.delete(),f.add("Goodbye",1,5),setTimeout((()=>{location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=w.Auth.currentUser;null!==t&&"google.com"===t.providerData[0].providerId&&(e.inputs=[],e.buttonText="Reauthenticate to delete")}),(e=>{})),t.list.clearTagPb=new _("clearTagPb","text","Clear Tag PB",[],"Are you sure you want to clear this tags PB?","Clear",(e=>s(void 0,void 0,void 0,(function*(){var t;const o=e.parameters[0];p.show();const n=yield u.default.users.deleteTagPersonalBest(o);if(p.hide(),200!==n.status)return f.add("Failed to delete tag's PB: "+n.message);if(1===n.data.resultCode){const e=null===(t=l.getSnapshot().tags)||void 0===t?void 0:t.filter((e=>e._id===o))[0];if(void 0===e)return;e.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}},$(`.pageSettings .section.tags .tagsList .tag[id="${o}"] .clearPbButton`).attr("aria-label","No PB found"),f.add("Tag PB cleared.",0)}else f.add("Something went wrong: "+n.message,-1)}))),(e=>{e.text=`Are you sure you want to clear PB for tag ${e.parameters[1]}?`}),(e=>{})),t.list.applyCustomFont=new _("applyCustomFont","text","Custom font",[{placeholder:"Font name",initVal:""}],"Make sure you have the font installed on your computer before applying.","Apply",((e,t)=>{var o;""!==t&&(null===(o=m.groups.fontFamily)||void 0===o||o.setValue(t.replace(/\s/g,"_")))}),(()=>{}),(e=>{})),t.list.resetPersonalBests=new _("resetPersonalBests","text","Reset Personal Bests",[{placeholder:"Password",type:"password",initVal:""}],"","Reset",((e,t)=>s(void 0,void 0,void 0,(function*(){try{const e=w.Auth.currentUser;if(null===e)return;if("password"===e.providerData[0].providerId){const o=C.EmailAuthProvider.credential(e.email,t);yield(0,C.reauthenticateWithCredential)(e,o)}else"google.com"===e.providerData[0].providerId&&(yield(0,C.reauthenticateWithPopup)(e,d.gmailProvider));p.show();const o=yield u.default.users.deletePersonalBests();if(p.hide(),200!==o.status)return f.add("Failed to reset personal bests: "+o.message,-1);f.add("Personal bests have been reset",1),l.getSnapshot().personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}}}catch(e){p.hide(),f.add(e,-1)}}))),(e=>{const t=w.Auth.currentUser;null!==t&&"google.com"===t.providerData[0].providerId&&(e.inputs=[],e.buttonText="Reauthenticate to reset")}),(e=>{})),t.list.resetSettings=new _("resetSettings","text","Reset Settings",[],"Are you sure you want to reset all your settings?","Reset",(()=>{c.reset()}),(()=>{}),(e=>{})),t.list.unlinkDiscord=new _("unlinkDiscord","text","Unlink Discord",[],"Are you sure you want to unlink your Discord account?","Unlink",(()=>s(void 0,void 0,void 0,(function*(){p.show();const e=yield u.default.users.unlinkDiscord();if(p.hide(),200!==e.status)return f.add("Failed to unlink Discord: "+e.message,-1);f.add("Accounts unlinked",1),l.getSnapshot().discordId=void 0,m.updateDiscordSection()}))),(()=>{}),(e=>{})),t.list.generateApeKey=new _("generateApeKey","text","Generate new key",[{placeholder:"Name",initVal:""}],"","Generate",((e,o)=>s(void 0,void 0,void 0,(function*(){p.show();const e=yield u.default.apeKeys.generate(o,!1);if(p.hide(),200!==e.status)return f.add("Failed to generate key: "+e.message,-1);{const o=e.data;t.list.viewApeKey.show([o.apeKey])}}))),(()=>{}),(e=>{})),t.list.viewApeKey=new _("viewApeKey","text","Ape Key",[{type:"textarea",disabled:!0,placeholder:"Key",initVal:""}],"This is your new Ape Key. Please keep it safe. You will only see it once!","Close",(e=>{h.show()}),(e=>{e.inputs[0].initVal=e.parameters[0]}),(e=>{e.canClose=!1,$("#simplePopup textarea").css("height","110px"),$("#simplePopup .button").addClass("hidden"),setTimeout((()=>{e.canClose=!0,$("#simplePopup .button").removeClass("hidden")}),3e3)})),t.list.deleteApeKey=new _("deleteApeKey","text","Delete Ape Key",[],"Are you sure?","Delete",(e=>s(void 0,void 0,void 0,(function*(){p.show();const t=yield u.default.apeKeys.delete(e.parameters[0]);if(p.hide(),200!==t.status)return f.add("Failed to delete key: "+t.message,-1);f.add("Key deleted",1),h.show()}))),(e=>{}),(e=>{})),t.list.editApeKey=new _("editApeKey","text","Edit Ape Key",[{placeholder:"Name",initVal:""}],"","Edit",((e,t)=>s(void 0,void 0,void 0,(function*(){p.show();const o=yield u.default.apeKeys.update(e.parameters[0],{name:t});if(p.hide(),200!==o.status)return f.add("Failed to update key: "+o.message,-1);f.add("Key updated",1),h.show()}))),(e=>{}),(e=>{})),t.list.saveCustomText=new _("saveCustomText","text","Save custom text",[{placeholder:"Name",initVal:""}],"","Save",((e,t)=>{const o=$("#customTextPopup textarea").val().normalize();y.setCustomText(t,o),f.add("Custom text saved",1),v.show()}),(()=>{}),(()=>{})),t.list.deleteCustomText=new _("deleteCustomText","text","Delete custom text",[],"Are you sure?","Delete",(e=>{y.deleteCustomText(e.parameters[0]),f.add("Custom text deleted",1),b.show()}),(e=>{e.text=`Are you sure you want to delete custom text ${e.parameters[0]}?`}),(()=>{})),t.list.updateCustomTheme=new _("updateCustomTheme","text","Update Custom Theme",[{type:"text",placeholder:"Name",initVal:""},{type:"checkbox",initVal:"false",label:"Update custom theme to current colors"}],"","Update",((e,t,o)=>s(void 0,void 0,void 0,(function*(){const n=l.getSnapshot().customThemes.find((t=>t._id===e.parameters[0]));if(void 0===n)return void f.add("Custom theme does not exist!",-1);let a=[];"true"===o?$.each($(".pageSettings .customTheme .customThemeEdit [type='color']"),((e,t)=>{a.push($(t).attr("value"))})):a=n.colors;const i={name:t,colors:a};p.show(),yield l.editCustomTheme(n._id,i),p.hide(),c.setCustomThemeColors(a),f.add("Custom theme updated",1),g.refreshButtons()}))),(e=>{const t=l.getSnapshot().customThemes.find((t=>t._id===e.parameters[0]));t&&(e.inputs[0].initVal=t.name)}),(e=>{})),t.list.deleteCustomTheme=new _("deleteCustomTheme","text","Delete Custom Theme",[],"Are you sure?","Delete",(e=>s(void 0,void 0,void 0,(function*(){p.show(),yield l.deleteCustomTheme(e.parameters[0]),p.hide(),f.add("Custom theme deleted",1),g.refreshButtons()}))),(e=>{}),(e=>{})),$(".pageSettings .section.discordIntegration #unlinkDiscordButton").on("click",(()=>{t.list.unlinkDiscord.show()})),$("#resetSettingsButton").on("click",(()=>{t.list.resetSettings.show()})),$(".pageSettings #resetPersonalBestsButton").on("click",(()=>{t.list.resetPersonalBests.show()})),$(".pageSettings #updateAccountName").on("click",(()=>{t.list.updateName.show()})),$(".pageSettings #addPasswordAuth").on("click",(()=>{t.list.addPasswordAuth.show()})),$(".pageSettings #emailPasswordAuth").on("click",(()=>{t.list.updateEmail.show()})),$(".pageSettings #passPasswordAuth").on("click",(()=>{t.list.updatePassword.show()})),$(".pageSettings #deleteAccount").on("click",(()=>{t.list.deleteAccount.show()})),$("#apeKeysPopup .generateApeKey").on("click",(()=>{t.list.generateApeKey.show()})),$("#customTextPopup .buttonsTop .saveCustomText").on("click",(()=>{t.list.saveCustomText.show()})),$(document).on("click",".pageSettings .section.themes .customTheme .delButton",(e=>{const o=$(e.currentTarget).parent(".customTheme.button").attr("customThemeId");t.list.deleteCustomTheme.show([o])})),$(document).on("click",".pageSettings .section.themes .customTheme .editButton",(e=>{const o=$(e.currentTarget).parent(".customTheme.button").attr("customThemeId");t.list.updateCustomTheme.show([o])})),$(document).on("click","#savedTextsPopupWrapper .list .savedText .button.delete",(e=>{const o=$(e.target).siblings(".button.name").text();t.list.deleteCustomText.show([o])})),$(document).on("click","#apeKeysPopup table tbody tr .button.delete",(e=>{const o=$(e.target).closest("tr").attr("keyId");t.list.deleteApeKey.show([o])})),$(document).on("click","#apeKeysPopup table tbody tr .button.edit",(e=>{const o=$(e.target).closest("tr").attr("keyId");t.list.editApeKey.show([o])})),$(document).on("click",".pageSettings .section.fontFamily .button.custom",(()=>{t.list.applyCustomFont.show([])})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#simplePopupWrapper").hasClass("hidden")||(x(),e.preventDefault())}))},7458:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(341)),r=i(o(1112));$(document.body).on("click","#supportMeButton",(()=>{$("#supportMeWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)})),$(document.body).on("click","#supportMeWrapper",(()=>{$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))})),$(document.body).on("click","#supportMeWrapper .button.ads",(()=>{r.pushCurrent(r.commandsEnableAds),s.show(),$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))})),$(document.body).on("click","#supportMeWrapper a.button",(()=>{$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))}))},6216:(e,t)=>{function o(){$("#versionHistoryWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)}Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0,t.show=o,$(document.body).on("click",".version",(e=>{e.shiftKey||o()})),$(document.body).on("click","#versionHistoryWrapper",(e=>{"versionHistoryWrapper"===$(e.target).attr("id")&&$("#versionHistoryWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#versionHistoryWrapper").addClass("hidden")}))}))},9957:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=i(o(5021)),u=i(o(8844));let d=!1;function l(){$("#wordFilterPopupWrapper").addClass("hidden"),$("#customTextPopupWrapper").removeClass("hidden")}t.show=function(){return s(this,void 0,void 0,(function*(){yield function(){return s(this,void 0,void 0,(function*(){d||($("#wordFilterPopup .languageInput").empty(),(yield r.getLanguageList()).forEach((e=>{let t=e;t=t.replace("_"," "),$("#wordFilterPopup .languageInput").append(`\n        <option value=${e}>${t}</option>\n      `)})),d=!0)}))}(),$("#wordFilterPopupWrapper").removeClass("hidden"),$("#customTextPopupWrapper").addClass("hidden"),$("#wordFilterPopup .languageInput").select2({width:"100%"})}))},$("#wordFilterPopupWrapper").mousedown((e=>{"wordFilterPopupWrapper"===$(e.target).attr("id")&&l()})),$("#wordFilterPopup .languageInput").one("select2:open",(function(){$("input.select2-search__field").prop("placeholder","search")})),$("#wordFilterPopupWrapper .button").mousedown((e=>{$("#wordFilterPopupWrapper .loadingIndicator").removeClass("hidden"),$("#wordFilterPopupWrapper .button").addClass("hidden"),setTimeout((()=>{(function(e){return s(this,void 0,void 0,(function*(){const t=$("#wordFilterPopup .languageInput").val(),o=yield function(e){return s(this,void 0,void 0,(function*(){let t=$("#wordFilterPopup .wordIncludeInput").val();t=r.escapeRegExp(null==t?void 0:t.trim()),t=t.replace(/\s+/gi,"|");const o=new RegExp(t,"i");let n=$("#wordFilterPopup .wordExcludeInput").val();n=r.escapeRegExp(n.trim()),n=n.replace(/\s+/gi,"|");const a=new RegExp(n,"i"),i=[],s=yield r.getLanguage(e),u=$("#wordFilterPopup .wordMaxInput").val(),d=$("#wordFilterPopup .wordMinInput").val();let l,c;l=""==u?999:parseInt(u),c=""==d?1:parseInt(d);for(let e=0;e<s.words.length;e++){const t=s.words[e],r=o.test(t),u=a.test(t);(r&&!u||r&&""==n)&&t.length<=l&&t.length>=c&&i.push(t)}return i}))}(t),n=o.join(u.delimiter);$("#customTextPopup textarea").val(((t,o)=>(e?"":o+" ")+n)),l()}))})($(e.target).is("#set")).then((()=>{$("#wordFilterPopupWrapper .loadingIndicator").addClass("hidden"),$("#wordFilterPopupWrapper .button").removeClass("hidden")}))}),1)}))},2118:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(5082)),r=i(o(2426)),u=r,d=i(o(5021)),l=i(o(2229)),c=i(o(6018)),p=i(o(9596)),f=i(o(7836)),m=i(o(3246)),h=i(o(6030)),g=i(o(249));s.set(),u.loadFromLocalStorage(),"localhost"===window.location.hostname?($("#bottom .version .text").text("localhost"),$("#bottom .version").css("opacity",1)):d.getReleasesFromGitHub().then((e=>{m.show(e[0].name)})),g.set(!0,!0),c.handleInitialPageClasses(window.location.pathname),$(document).ready((()=>{window.location.pathname,$("body").css("transition","all .25s, transform .05s"),r.default.quickTab&&$("#restartTestButton").addClass("hidden"),window.localStorage.getItem("merchbannerclosed")||h.addBanner('Checkout our merchandise, available at <a target="_blank" href="https://monkeytype.store/">monkeytype.store</a>',1,"images/merchdropwebsite2.png",!1,(()=>{window.localStorage.setItem("merchbannerclosed","true")})),$("#centerContent").css("opacity","0").removeClass("hidden").stop(!0,!0).animate({opacity:1},250,(()=>{if("/verify"===window.location.pathname){const e=new URLSearchParams(window.location.hash.slice(1));if(e.has("access_token")){const t=e.get("access_token"),o=e.get("token_type");l.set({accessToken:t,tokenType:o}),history.replaceState("/","","/")}const t=window.location.pathname.replace("/","");p.change(t)}else"/account"===window.location.pathname||/challenge_.+/g.test(window.location.pathname)||window.location.pathname})),f.init()}))},8330:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(o(2426));t.default=class{constructor(e,t,o,n,i){this.configName=e,this.configValue=a.default[e],this.mode=o,this.configFunction=t,this.setCallback=n,this.updateCallback=i,this.updateInput(),"select"===this.mode?$(document).on("change",`.pageSettings .section.${this.configName} select`,(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||this.setValue(t.val())})):"button"===this.mode&&$(document).on("click",`.pageSettings .section.${this.configName} .button`,(t=>{const o=$(t.currentTarget);if(o.hasClass("disabled")||o.hasClass("no-auto-handle"))return;let n=o.attr(e);const a=o.attr("params");(n||a)&&("true"===n&&(n=!0),"false"===n&&(n=!1),this.setValue(n,a))}))}setValue(e,t){void 0===t?this.configFunction(e):this.configFunction(e,...t),this.updateInput(),this.setCallback&&this.setCallback()}updateInput(){this.configValue=a.default[this.configName],$(`.pageSettings .section.${this.configName} .button`).removeClass("active"),"select"===this.mode?$(`.pageSettings .section.${this.configName} select`).val(this.configValue).trigger("change.select2"):"button"===this.mode&&$(`.pageSettings .section.${this.configName} .button[${this.configName}='${this.configValue}']`).addClass("active"),this.updateCallback&&this.updateCallback()}}},8573:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateActiveTab=t.saveCustomThemeColors=t.setCustomInputs=t.refreshButtons=t.updateActiveButton=void 0;const r=i(o(2426)),u=r,d=i(o(4094)),l=i(o(5021)),c=i(o(6030)),p=i(o(2614)),f=i(o(8185)),m=i(o(1799)),h=i(o(8308)),g=i(o(2541)),y=i(o(9073)),v=o(9280);function b(){let e=r.default.theme;"off"!==r.default.randomTheme&&"custom"!==r.default.randomTheme&&null!==d.randomTheme&&(e=d.randomTheme),$(".pageSettings .section.themes .theme").removeClass("active"),$(`.pageSettings .section.themes .theme[theme=${e}]`).addClass("active")}function w(e,t,o=!1,n=!1){if(o){const o=e.find("input[type=color]").attr("id");void 0===o&&console.error("Could not find color ID!"),n||void 0===o||document.documentElement.style.setProperty(o,t);const a=e.find("label");return a.val(t),a.attr("value",t),"--bg-color"!==a.attr("for")&&a.css("background-color",t),e.find("input[type=text]").val(t),void e.find("input[type=color]").attr("value",t)}const a=[{rule:/\b[0-9]{1,3},\s?[0-9]{1,3},\s?[0-9]{1,3}\s*\b/,start:"rgb(",end:")"},{rule:/\b[A-Z, a-z, 0-9]{6}\b/,start:"#",end:""},{rule:/\b[0-9]{1,3},\s?[0-9]{1,3}%,\s?[0-9]{1,3}%?\s*\b/,start:"hsl(",end:")"}];t=t.replace("°","");for(const e of a)if(t.match(e.rule)){t=e.start+t+e.end;break}$(".colorConverter").css("color",t);const i=l.convertRGBtoHEX($(".colorConverter").css("color"));if(void 0===i)return;t=i;const s=e.find("input[type=color]").attr("id");void 0===s&&console.error("Could not find color ID!"),n||void 0===s||document.documentElement.style.setProperty(s,t);const r=e.find("label");r.val(t),r.attr("value",t),"--bg-color"!==r.attr("for")&&r.css("background-color",t),e.find("input[type=text]").val(t),e.find("input[type=color]").attr("value",t)}function C(){return s(this,void 0,void 0,(function*(){if(r.default.customTheme){const e=$(".pageSettings .section.themes .allCustomThemes.buttons").empty(),t=$(".pageSettings .section.themes .addCustomThemeButton");if(null===v.Auth.currentUser)return void $(".pageSettings .section.themes .customThemeEdit .saveCustomThemeButton").text("save");$(".pageSettings .section.themes .customThemeEdit .saveCustomThemeButton").text("save as new"),t.removeClass("hidden"),g.getSnapshot().customThemes.forEach((t=>{const o=t.colors[0],n=t.colors[1];e.append(`<div class="customTheme button" customThemeId='${t._id}' \n        style="color:${n};background:${o}">\n        <div class="editButton"><i class="fas fa-pen"></i></div>\n        <div class="text">${t.name.replace(/_/g," ")}</div>\n        <div class="delButton"><i class="fas fa-trash fa-fw"></i></div>\n        </div>`)}))}else{const e=$(".pageSettings .section.themes .favThemes.buttons").empty(),t=$(".pageSettings .section.themes .allThemes.buttons").empty();let o=r.default.theme;"off"!==r.default.randomTheme&&"custom"!==r.default.randomTheme&&null!==d.randomTheme&&(o=d.randomTheme);const n=yield l.getSortedThemesList();r.default.favThemes.length>0?(e.css({paddingBottom:"1rem"}),n.forEach((t=>{if(r.default.favThemes.includes(t.name)){const n=o===t.name?"active":"";e.append(`<div class="theme button ${n}" theme='${t.name}' \n            style="color:${t.mainColor};background:${t.bgColor}">\n            <div class="activeIndicator"><i class="fas fa-circle"></i></div>\n            <div class="text">${t.name.replace(/_/g," ")}</div>\n            <div class="favButton active"><i class="fas fa-star"></i></div></div>`)}}))):e.css({paddingBottom:"0"}),n.forEach((e=>{if(r.default.favThemes.includes(e.name))return;const n=o===e.name?"active":"";t.append(`<div class="theme button ${n}" theme='${e.name}' style="color:${e.mainColor};background:${e.bgColor}">\n        <div class="activeIndicator"><i class="fas fa-circle"></i></div>\n        <div class="text">${e.name.replace(/_/g," ")}</div>\n        <div class="favButton"><i class="far fa-star"></i></div></div>`)}))}b()}))}function S(e=!1){$(".pageSettings .section.themes .tabContainer .customTheme .colorPicker").each(((t,o)=>{const n=r.default.customThemeColors[d.colorVars.indexOf($(o).find("input[type=color]").attr("id"))];w($(o),n,!1,e)}))}function _(){const e=[];$.each($(".pageSettings .customTheme .customThemeEdit [type='color']"),((t,o)=>{e.push($(o).attr("value"))})),u.setCustomThemeColors(e),c.add("Custom theme saved",1)}function x(e=!1){const t=$(".pageSettings .section.themes .tabs .button[tab='preset']"),o=$(".pageSettings .section.themes .tabs .button[tab='custom']");r.default.customTheme?(t.removeClass("active"),o.hasClass("active")&&!e||(o.addClass("active"),C()),l.swapElements($('.pageSettings [tabContent="preset"]'),$('.pageSettings [tabContent="custom"]'),250)):(o.removeClass("active"),t.hasClass("active")&&!e||(t.addClass("active"),C()),l.swapElements($('.pageSettings [tabContent="custom"]'),$('.pageSettings [tabContent="preset"]'),250))}t.updateActiveButton=b,t.refreshButtons=C,t.setCustomInputs=S,t.saveCustomThemeColors=_,t.updateActiveTab=x,$(".pageSettings .section.themes .tabs .button").on("click",(e=>{$(".pageSettings .section.themes .tabs .button").removeClass("active");const t=$(e.currentTarget);t.addClass("active"),S(),"preset"==t.attr("tab")?u.setCustomTheme(!1):u.setCustomTheme(!0)})),$(document).on("click",".pageSettings .section.themes .customTheme.button",(e=>{var t;if($(e.target).hasClass("delButton"))return;if($(e.target).hasClass("editButton"))return;const o=null!==(t=$(e.currentTarget).attr("customThemeId"))&&void 0!==t?t:"";d.set(o,!0)})),$(document).on("click",".pageSettings .section.themes .theme .favButton",(e=>{const t=$(e.currentTarget).parents(".theme.button").attr("theme");void 0!==t?function(e){if(r.default.favThemes.includes(e))u.setFavThemes(r.default.favThemes.filter((t=>t!==e)));else{const t=r.default.favThemes;t.push(e),u.setFavThemes(t)}u.saveFullConfigToLocalStorage()}(t):console.error("Could not find the theme attribute attached to the button clicked!")})),$(document).on("click",".pageSettings .section.themes .theme.button",(e=>{const t=$(e.currentTarget).attr("theme");$(e.target).hasClass("favButton")||void 0===t||(u.setTheme(t),b())})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("input",(e=>{const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o,!0)})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("change",(e=>{const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o)})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=text]").on("blur",(e=>{if("name"===e.target.id)return;const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o)})).on("keypress",(function(e){if("name"!==e.target.id&&"Enter"===e.code){$(this).attr("disabled","disabled");const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o),$(this).removeAttr("disabled")}})),$(".pageSettings #loadCustomColorsFromPreset").on("click",(()=>{$("#currentTheme").attr("href",`themes/${r.default.theme}.css`),d.colorVars.forEach((e=>{document.documentElement.style.setProperty(e,"")})),setTimeout((()=>s(void 0,void 0,void 0,(function*(){f.updateAllChartColors();const e=yield p.getAll();d.colorVars.forEach((t=>{let o;"--bg-color"===t?o=e.bg:"--main-color"===t?o=e.main:"--sub-color"===t?o=e.sub:"--caret-color"===t?o=e.caret:"--text-color"===t?o=e.text:"--error-color"===t?o=e.error:"--error-extra-color"===t?o=e.errorExtra:"--colorful-error-color"===t?o=e.colorfulError:"--colorful-error-extra-color"===t&&(o=e.colorfulErrorExtra),w($(".colorPicker #"+t).parent(),o)}))}))),250)})),$("#shareCustomThemeButton").on("click",(()=>{const e=[];$.each($(".pageSettings .customTheme .customThemeEdit [type='color']"),((t,o)=>{e.push($(o).attr("value"))}));const t="https://monkeytype.com?customTheme="+btoa(JSON.stringify(e));navigator.clipboard.writeText(t).then((function(){c.add("URL Copied to clipboard",0)}),(function(){m.show(t)}))})),$(".pageSettings .saveCustomThemeButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){if(_(),v.Auth.currentUser){const e={name:"custom",colors:r.default.customThemeColors};h.show();const t=yield g.addCustomTheme(e);h.hide(),t&&x(!0)}else x(!0)})))),y.subscribe((e=>{"customThemeId"===e&&C()}))},4375:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.set=t.get=void 0;let o="loading";t.get=function(){return o},t.set=function(e){o=e}},3541:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.get=void 0;let o=!1;t.get=function(){return o},t.enable=function(){o=!0,console.log("Glarses Mode On - test result will be hidden. You can check the stats in the console (here)"),console.log("To disable Glarses Mode refresh the page.")}},5922:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=void 0;let o=!0;t.set=function(e){o=e},t.get=function(){return o}},1119:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.clear=t.set=void 0;let o=!1;t.set=function(){o||(o=!0,console.error("Slow timer, disabling animations"))},t.clear=function(){o=!1},t.get=function(){return o}},940:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.set=t.get=void 0;let o=!1;t.get=function(){return o},t.set=function(e){o=e}},1306:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.increment=t.set=t.get=void 0;let o=0;t.get=function(){return o},t.set=function(e){o=e},t.increment=function(){o++}},6289:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.replace=t.getList=void 0;const a=o(5021);let i=[];function s(){return n(this,void 0,void 0,(function*(){return 0===i.length?$.getJSON("languages/britishenglish.json",(function(e){return i=e,i})):i}))}t.getList=s,t.replace=function(e){return n(this,void 0,void 0,(function*(){const t=(yield s()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))));return t?e.replace(RegExp(`^(?:([\\W]*)(${t[0]})([\\W]*))$`,"gi"),((e,o,n,i)=>o+(n.charAt(0)===n.charAt(0).toUpperCase()?n===n.toUpperCase()?t[1].toUpperCase():(0,a.capitalizeFirstLetterOfEachWord)(t[1]):t[1])+i)):e}))}},9366:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.capsState=void 0;const a=n(o(2426));function i(){$("#capsWarning").hasClass("hidden")&&$("#capsWarning").removeClass("hidden")}function s(){$("#capsWarning").hasClass("hidden")||$("#capsWarning").addClass("hidden")}t.capsState=!1,$(document).keydown((function(e){var o,n;(null===(o=null==e?void 0:e.originalEvent)||void 0===o?void 0:o.getModifierState)&&(null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.getModifierState("CapsLock"))?t.capsState=!0:t.capsState=!1;try{a.default.capsLockWarning&&t.capsState?i():s()}catch(e){}})),$(document).keyup((function(e){var o,n;(null===(o=null==e?void 0:e.originalEvent)||void 0===o?void 0:o.getModifierState)&&(null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.getModifierState("CapsLock"))?t.capsState=!0:t.capsState=!1;try{a.default.capsLockWarning&&t.capsState?i():s()}catch(e){}}))},3212:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.updatePosition=t.hide=t.startAnimation=t.stopAnimation=t.caretAnimating=void 0;const u=i(o(5021)),d=r(o(2426)),l=i(o(6110)),c=i(o(1119)),p=i(o(940));function f(){!1===t.caretAnimating&&(d.default.smoothCaret&&!c.get()?$("#caret").css("animation-name","caretFlashSmooth"):$("#caret").css("animation-name","caretFlashHard"),t.caretAnimating=!0)}function m(){var e,t;return s(this,void 0,void 0,(function*(){if($("#wordsWrapper").hasClass("hidden"))return;const o=$("#caret");let n=l.input.current.length;n=u.trailingComposeChars.test(l.input.current)?l.input.current.search(u.trailingComposeChars)+1:n;let a=n-1;-1==a&&(a=0);const i=0==$("#words .active").children().length;i&&$("#words .active").append('<letter style="opacity: 0;">_</letter>');const s=null===(e=null===document||void 0===document?void 0:document.querySelector("#words .active"))||void 0===e?void 0:e.querySelectorAll("letter");if(!s)return;let r=s[a];if(n>s.length&&(r=s[s.length-1]),"zen"!=d.default.mode&&0==$(r).length)return;const f=(yield u.getCurrentLanguage(d.default.language)).leftToRight,m=f?r.offsetLeft:r.offsetLeft+(null!==(t=$(r).width())&&void 0!==t?t:0),h=r.offsetTop,g=$(r).height();let y=0,v=0;y=h-Math.round(g/5),v=0==n?f?m-o.width()/2:m+o.width()/2:f?m+$(r).width()-o.width()/2:m-$(r).width()+o.width()/2;let b=$("#words .smoothScroller").height();if(void 0===b&&(b=0),d.default.smoothCaret?o.stop(!0,!1).animate({top:y-b,left:v},c.get()?0:100):o.stop(!0,!0).animate({top:y-b,left:v},0),d.default.showAllLines){const e=window.innerHeight,t=e/2-$("#caret").outerHeight()/2,o=document.body.scrollHeight;if(y>=t&&o>e&&p.get()){const e=y-t/2;window.scrollTo({left:0,top:e,behavior:"smooth"})}}i&&$("#words .active").children().remove()}))}t.caretAnimating=!0,t.stopAnimation=function(){!0===t.caretAnimating&&($("#caret").css("animation-name","none"),$("#caret").css("opacity","1"),t.caretAnimating=!1)},t.startAnimation=f,t.hide=function(){$("#caret").addClass("hidden")},t.updatePosition=m,t.show=function(){$("#result").hasClass("hidden")&&(m(),$("#caret").removeClass("hidden"),f())}},8844:(e,t)=>{function o(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("customText"))&&void 0!==e?e:"{}")}Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomTextNames=t.deleteCustomText=t.setCustomText=t.getCustomText=t.setDelimiter=t.setWord=t.setTime=t.setIsTimeRandom=t.setIsWordRandom=t.setText=t.delimiter=t.time=t.word=t.isTimeRandom=t.isWordRandom=t.text=void 0,t.text=["The","quick","brown","fox","jumps","over","the","lazy","dog"],t.isWordRandom=!1,t.isTimeRandom=!1,t.delimiter=" ",t.setText=function(e){t.text=e},t.setIsWordRandom=function(e){t.isWordRandom=e},t.setIsTimeRandom=function(e){t.isTimeRandom=e},t.setTime=function(e){t.time=e},t.setWord=function(e){t.word=e},t.setDelimiter=function(e){t.delimiter=e},t.getCustomText=function(e){return o()[e].split(/ +/)},t.setCustomText=function(e,t){const n=o();n[e]="string"==typeof t?t:t.join(" "),window.localStorage.setItem("customText",JSON.stringify(n))},t.deleteCustomText=function(e){const t=o();t[e]&&delete t[e],window.localStorage.setItem("customText",JSON.stringify(t))},t.getCustomTextNames=function(){return Object.keys(o())}},249:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.set=void 0;const s=i(o(3212)),r=i(o(4375));let u=!1;function d(e,t=!1){e&&!u?(u=!0,s.stopAnimation(),$("#top").addClass("focus"),$("#bottom").addClass("focus"),t||$("body").css("cursor","none"),$("#middle").addClass("focus"),$("#bannerCenter").addClass("focus")):!e&&u&&(u=!1,s.startAnimation(),$("#top").removeClass("focus"),$("#bottom").removeClass("focus"),$("body").css("cursor","default"),$("#middle").removeClass("focus"),$("#bannerCenter").removeClass("focus"))}t.set=d,$(document).mousemove((function(e){u&&"loading"!=r.get()&&("account"==r.get()&&1==u||$("#top").hasClass("focus")&&e.originalEvent&&(e.originalEvent.movementX>3||e.originalEvent.movementY>3)&&d(!1))}))},3902:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.rememberSettings=t.activate=t.clear=t.setFunbox=t.toggleScript=t.reset=t.startMemoryTimer=t.resetMemoryTimer=void 0;const r=i(o(6983)),u=i(o(6030)),d=i(o(5021)),l=i(o(5082)),c=i(o(2426)),p=c,f=i(o(8913)),m=i(o(6203));let h=null,g=null,y=null,v={};function b(e,t,o){var n;null!==(n=v[e])&&void 0!==n||(v[e]={value:t,setFunction:o})}function w(){$("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:0},125)}function C(){null!==y&&(clearInterval(y),y=null),g=null,w()}function S(e){$("#typingTest #memoryTimer").text(`Timer left to memorise all words: ${e}s`)}function _(){C()}function x(){return s(this,void 0,void 0,(function*(){return $("#funBoxTheme").attr("href",""),$("#words").removeClass("nospace"),$("#words").removeClass("arrows"),_(),$("#wordsWrapper").removeClass("hidden"),l.set(),m.update(),!0}))}t.resetMemoryTimer=C,t.startMemoryTimer=function(){C(),g=Math.round(Math.pow(r.words.length,1.2)),S(g),$("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:1},125),y=setInterval((()=>{null!==g&&(g-=1,0==g?w():S(g),g<=0&&(C(),$("#wordsWrapper").addClass("hidden")))}),1e3)},t.reset=_,t.toggleScript=function(...e){"tts"===c.default.funbox&&f.speak(e[0])},t.setFunbox=function(e,t){return h=t,p.setFunbox(e,!1),"none"===e&&(u.add("Reverting funbox settings",0),Object.keys(v).forEach((e=>{v[e].setFunction(v[e].value,!0)})),v={}),!0},t.clear=x,t.activate=function(e){return s(this,void 0,void 0,(function*(){let t=h;null==e&&(e=c.default.funbox);const o=yield d.getFunbox(e);return $("#funBoxTheme").attr("href",""),$("#words").removeClass("nospace"),$("#words").removeClass("arrows"),!(yield d.getCurrentLanguage(c.default.language)).ligatures||"choo_choo"!=e&&"earthquake"!=e?"none"===e||"zen"!==c.default.mode&&"quote"!=c.default.mode||!0!==(null==o?void 0:o.affectsWordGeneration)?(_(),$("#wordsWrapper").removeClass("hidden"),"none"===e&&void 0===t?t=null:("none"!==e&&void 0===t||"none"!==e&&null===t)&&(t=(yield d.getFunboxList()).filter((t=>t.name===e))[0].type),l.set(),"style"===t?(null!=e&&$("#funBoxTheme").attr("href",`funbox/${e}.css`),"simon_says"===e&&p.setKeymapMode("next",!0),"read_ahead"!==e&&"read_ahead_easy"!==e&&"read_ahead_hard"!==e||p.setHighlightMode("letter",!0)):"script"===t&&("tts"===e?($("#funBoxTheme").attr("href","funbox/simon_says.css"),p.setKeymapMode("off",!0),p.setHighlightMode("letter",!0)):"layoutfluid"===e?(p.setLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0),p.setKeymapLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0)):"memory"===e?(p.setMode("words",!0),p.setShowAllLines(!0,!0),"next"===c.default.keymapMode&&p.setKeymapMode("react",!0)):"nospace"===e?($("#words").addClass("nospace"),p.setHighlightMode("letter",!0)):"arrows"===e&&($("#words").addClass("arrows"),p.setHighlightMode("letter",!0))),!0):(u.add(`${d.capitalizeFirstLetterOfEachWord(c.default.mode)} mode does not support the ${e} funbox`,0),p.setFunbox("none",!0),void(yield x())):(u.add("Current language does not support this funbox mode",0),p.setFunbox("none",!0),void(yield x()))}))},t.rememberSettings=function(){return s(this,void 0,void 0,(function*(){const e=c.default.funbox;let t=h;"none"===e&&void 0===t?t=null:("none"!==e&&void 0===t||"none"!==e&&null===t)&&(t=(yield d.getFunboxList()).filter((t=>t.name===e))[0].type),"style"===t?("simon_says"===e&&b("keymapMode",c.default.keymapMode,p.setKeymapMode),"read_ahead"!==e&&"read_ahead_easy"!==e&&"read_ahead_hard"!==e||b("highlightMode",c.default.highlightMode,p.setHighlightMode)):"script"===t&&("tts"===e?b("keymapMode",c.default.keymapMode,p.setKeymapMode):"layoutfluid"===e?(b("keymapMode",c.default.keymapMode,p.setKeymapMode),b("layout",c.default.layout,p.setLayout),b("keymapLayout",c.default.keymapLayout,p.setKeymapLayout)):"memory"===e?(b("mode",c.default.mode,p.setMode),b("showAllLines",c.default.showAllLines,p.setShowAllLines),"next"===c.default.keymapMode&&b("keymapMode",c.default.keymapMode,p.setKeymapMode)):"nospace"===e||"arrows"===e?b("highlightMode",c.default.highlightMode,p.setHighlightMode):"58008"===e&&b("numbers",c.default.numbers,p.setNumbers))}))}},7035:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCharFromEvent=void 0;const u=r(o(2426)),d=i(o(5021)),l=o(9366);t.getCharFromEvent=function(e){return s(this,void 0,void 0,(function*(){const t=yield d.getLayout(u.default.layout);let o=[];"ansi"===t.type?o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:"iso"===t.type?o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","Backquote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:"matrix"===t.type&&(o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]);const n=t.keys,a=n.row1.concat(n.row2).concat(n.row3).concat(n.row4).concat(n.row5);let i=null;for(let t=0;t<o.length;t++)e.code==o[t]&&(i=t);if(!i)return e.code.includes("Numpad")?e.key:null;const s=a[i][0],r=function(e,t){return l.capsState?d.isASCIILetter(t)!==e.shiftKey:e.shiftKey}(e,s)?1:0;return a[i][r]||e.key}))}},3420:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceAccents=void 0;const o=[["áàâäåãąą́āą̄ă","a"],["éèêëẽęę́ēę̄ėě","e"],["íìîïĩįį́īį̄","i"],["óòôöøõóōǫǫ́ǭő","o"],["úùûüŭũúūůű","u"],["ńň","n"],["çĉčć","c"],["ř","r"],["ď","d"],["ťț","t"],["æ","ae"],["œ","oe"],["ẅ","w"],["ĝğg̃","g"],["ĥ","h"],["ĵ","j"],["ń","n"],["ŝśšș","s"],["żźž","z"],["ÿỹýÿŷ","y"],["łľ","l"],["أإآ","ا"],["َ",""],["ُ",""],["ِ",""],["ْ",""],["ً",""],["ٌ",""],["ٍ",""],["ّ",""]];t.replaceAccents=function(e,t){let n,a=e;if(!o&&!t)return a;const i=t||o;for(let e=0;e<i.length;e++)n=new RegExp(`[${i[e][0]}]`,"gi"),a=a.replace(n,i[e][1]);return a}},617:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const r=s(o(2426)),u=i(o(940)),d=i(o(9073));function l(){if(r.default.showLiveAcc&&u.get())if("mini"===r.default.timerStyle){if(!$("#miniTimerAndLiveWpm .acc").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .acc").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}else{if(!$("#liveAcc").hasClass("hidden"))return;$("#liveAcc").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}}function c(){$("#liveAcc").animate({opacity:r.default.timerOpacity},125,(()=>{$("#liveAcc").addClass("hidden")})),$("#miniTimerAndLiveWpm .acc").animate({opacity:r.default.timerOpacity},125,(()=>{$("#miniTimerAndLiveWpm .acc").addClass("hidden")}))}t.update=function(e){let t=Math.floor(e);r.default.blindMode&&(t=100),document.querySelector("#miniTimerAndLiveWpm .acc").innerHTML=t+"%",document.querySelector("#liveAcc").innerHTML=t+"%"},t.show=l,t.hide=c,d.subscribe(((e,t)=>{"showLiveAcc"===e&&(t?l():c())}))},7555:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const u=r(o(2426)),d=i(o(940)),l=i(o(9073));function c(){if(u.default.showLiveBurst&&d.get())if("mini"===u.default.timerStyle){if(!$("#miniTimerAndLiveWpm .burst").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .burst").removeClass("hidden").css("opacity",0).animate({opacity:u.default.timerOpacity},125)}else{if(!$("#liveBurst").hasClass("hidden"))return;$("#liveBurst").removeClass("hidden").css("opacity",0).animate({opacity:u.default.timerOpacity},125)}}function p(){$("#liveBurst").animate({opacity:u.default.timerOpacity},125,(()=>{$("#liveBurst").addClass("hidden")})),$("#miniTimerAndLiveWpm .burst").animate({opacity:u.default.timerOpacity},125,(()=>{$("#miniTimerAndLiveWpm .burst").addClass("hidden")}))}t.update=function(e){return s(this,void 0,void 0,(function*(){if(!u.default.showLiveBurst)return;let t=e;u.default.blindMode&&(t=0),document.querySelector("#miniTimerAndLiveWpm .burst").innerHTML=t.toString(),document.querySelector("#liveBurst").innerHTML=t.toString()}))},t.show=c,t.hide=p,l.subscribe(((e,t)=>{"showLiveBurst"===e&&(t?c():p())}))},7863:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const r=s(o(2426)),u=i(o(940)),d=i(o(9073)),l=document.querySelector("#liveWpm"),c=document.querySelector("#miniTimerAndLiveWpm .wpm");function p(){if(r.default.showLiveWpm&&u.get())if("mini"===r.default.timerStyle){if(!$("#miniTimerAndLiveWpm .wpm").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .wpm").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}else{if(!$("#liveWpm").hasClass("hidden"))return;$("#liveWpm").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}}function f(){$("#liveWpm").animate({opacity:r.default.timerOpacity},125,(()=>{$("#liveWpm").addClass("hidden")})),$("#miniTimerAndLiveWpm .wpm").animate({opacity:r.default.timerOpacity},125,(()=>{$("#miniTimerAndLiveWpm .wpm").addClass("hidden")}))}t.update=function(e,t){let o=e;r.default.blindMode&&(o=t),r.default.alwaysShowCPM&&(o=Math.round(5*o)),c.innerHTML=o.toString(),l.innerHTML=o.toString()},t.show=p,t.hide=f,d.subscribe(((e,t)=>{"showLiveWpm"===e&&(t?p():f())}))},5082:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.reset=t.set=void 0;let o=!1;t.set=function(){o=!0},t.reset=function(){o=!1},t.get=function(){return o}},4310:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.stop=t.type=t.updateFastOpacity=void 0;const r=o(5021),u=s(o(2426)),d=i(o(9073)),l=i(o(940));d.subscribe((e=>{"monkey"===e&&l.get()&&(u.default.monkey?$("#monkey").removeClass("hidden"):$("#monkey").addClass("hidden"))}));let c=!1,p=!1;const f={"00":document.querySelector("#monkey .up"),"01":document.querySelector("#monkey .right"),10:document.querySelector("#monkey .left"),11:document.querySelector("#monkey .both")},m={"00":document.querySelector("#monkey .fast .up"),"01":document.querySelector("#monkey .fast .right"),10:document.querySelector("#monkey .fast .left"),11:document.querySelector("#monkey .fast .both")};let h="right";function g(e){return e?"1":"0"}function y(){var e,t,o;if(u.default.monkey&&!(null===(e=document.querySelector("#monkey"))||void 0===e?void 0:e.classList.contains("hidden"))){Object.keys(f).forEach((e=>{var t;null===(t=f[e])||void 0===t||t.classList.add("hidden")})),Object.keys(m).forEach((e=>{var t;null===(t=m[e])||void 0===t||t.classList.add("hidden")}));const e=`${g(c)}${g(p)}`;null===(t=f[e])||void 0===t||t.classList.remove("hidden"),null===(o=m[e])||void 0===o||o.classList.remove("hidden")}}t.updateFastOpacity=function(e){if(!u.default.monkey)return;const t=(0,r.mapRange)(e,130,180,0,1);$("#monkey .fast").animate({opacity:t},1e3);let o=(0,r.mapRange)(e,130,180,.25,.01);.25==o&&(o=0),$("#monkey").css({animationDuration:o+"s"})},t.type=function(){u.default.monkey&&(c||"right"!=h?p||(p=!0,h="right"):(c=!0,h="left"),y())},t.stop=function(){u.default.monkey&&(c?c=!1:p&&(p=!1),y())},t.show=function(){u.default.monkey&&$("#monkey").css("opacity",0).removeClass("hidden").animate({opacity:1},125)},t.hide=function(){$("#monkey").css("opacity",1).animate({opacity:1},125,(()=>{$("#monkey").addClass("hidden")}))}},1613:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const s=i(o(5021)),r=[];t.hide=function(){$("#words").css("transition","none").removeClass("blurred"),$(".outOfFocusWarning").addClass("hidden"),s.clearTimeouts(r)},t.show=function(){r.push(setTimeout((()=>{$("#words").css("transition","0.25s").addClass("blurred"),$(".outOfFocusWarning").removeClass("hidden")}),1e3))}},3370:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.start=t.handleSpace=t.reset=t.update=t.init=t.settings=void 0;const u=i(o(5601)),d=i(o(6983)),l=i(o(9881)),c=r(o(2426)),p=i(o(2541)),f=i(o(1119)),m=i(o(5021)),h=i(o(940)),g=i(o(7506)),y=i(o(9073));function v(){return s(this,void 0,void 0,(function*(){$("#paceCaret").addClass("hidden");const e=m.getMode2(c.default,d.randomQuote);let o;if("pb"===c.default.paceCaret?o=yield p.getLocalPB(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,c.default.funbox):"average"===c.default.paceCaret?([o]=yield p.getUserAverage10(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode),o=Math.round(o)):"custom"===c.default.paceCaret?o=c.default.paceCaretCustomSpeed:1==g.isPaceRepeat&&(o=u.lastTestWpm),void 0===o||o<1||Number.isNaN(o))return void(t.settings=null);const n=5*o,a=n/60,i=60/n;t.settings={wpm:o,cps:a,spc:i,correction:0,currentWordIndex:0,currentLetterIndex:-1,wordsStatus:{},timeout:null},function(){var e;if("off"===c.default.paceCaret&&!g.isPaceRepeat)return;if($("#paceCaret").hasClass("hidden")||$("#paceCaret").addClass("hidden"),"zen"===c.default.mode)return;const t=$("#paceCaret"),o=null===(e=null===document||void 0===document?void 0:document.querySelector("#words .word"))||void 0===e?void 0:e.querySelector("letter"),n=$(o).height();void 0!==o&&void 0!==n&&t.stop(!0,!0).animate({top:o.offsetTop-n/4,left:o.offsetLeft},0,"linear")}()}))}function b(e){if(null!==t.settings&&h.get()&&!l.resultVisible){try{if(t.settings.currentLetterIndex++,t.settings.currentLetterIndex>=d.words.get(t.settings.currentWordIndex).length&&(t.settings.currentLetterIndex=-1,t.settings.currentWordIndex++),!c.default.blindMode)if(t.settings.correction<0)for(;t.settings.correction<0;)t.settings.currentLetterIndex--,t.settings.currentLetterIndex<=-2&&(t.settings.currentLetterIndex=d.words.get(t.settings.currentWordIndex-1).length-1,t.settings.currentWordIndex--),t.settings.correction++;else if(t.settings.correction>0)for(;t.settings.correction>0;)t.settings.currentLetterIndex++,t.settings.currentLetterIndex>=d.words.get(t.settings.currentWordIndex).length&&(t.settings.currentLetterIndex=-1,t.settings.currentWordIndex++),t.settings.correction--}catch(e){return t.settings=null,void $("#paceCaret").addClass("hidden")}try{const o=$("#paceCaret");let n,a,i;try{const e=t.settings.currentWordIndex-(d.words.currentIndex-l.currentWordElementIndex),s=document.querySelectorAll("#words .word")[e];n=-1===t.settings.currentLetterIndex?s.querySelectorAll("letter")[0]:s.querySelectorAll("letter")[t.settings.currentLetterIndex];const r=$(n).height(),u=$(n).width(),c=o.width();if(void 0===r||void 0===u||void 0===c)throw"";a=n.offsetTop-r/5,i=-1===t.settings.currentLetterIndex?n.offsetLeft:n.offsetLeft+u-c/2,o.removeClass("hidden")}catch(e){o.addClass("hidden")}const s=e-performance.now();if(void 0!==a){let e=$("#words .smoothScroller").height();void 0===e&&(e=0),$("#paceCaret").css({top:a-e}),c.default.smoothCaret?o.stop(!0,!0).animate({left:i},f.get()?0:s,"linear"):o.stop(!0,!0).animate({left:i},0,"linear")}t.settings.timeout=setTimeout((()=>{var o;try{b(e+1e3*(null!==(o=null===t.settings||void 0===t.settings?void 0:t.settings.spc)&&void 0!==o?o:0))}catch(e){t.settings=null}}),s)}catch(e){console.error(e),$("#paceCaret").addClass("hidden")}}}t.settings=null,t.init=v,t.update=b,t.reset=function(){null!==t.settings&&null!==t.settings.timeout&&clearTimeout(t.settings.timeout),t.settings=null},t.handleSpace=function(e,o){e?null===t.settings||!0!==t.settings.wordsStatus[d.words.currentIndex]||c.default.blindMode||(t.settings.wordsStatus[d.words.currentIndex]=void 0,t.settings.correction-=o.length+1):null===t.settings||void 0!==t.settings.wordsStatus[d.words.currentIndex]||c.default.blindMode||(t.settings.wordsStatus[d.words.currentIndex]=!0,t.settings.correction+=o.length+1)},t.start=function(){var e;b(performance.now()+1e3*(null!==(e=null===t.settings||void 0===t.settings?void 0:t.settings.spc)&&void 0!==e?e:0))},y.subscribe((e=>{"paceCaret"===e&&v()}))},5217:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0,t.hide=function(){$("#result .stats .wpm .crown").css("opacity",0).addClass("hidden")},t.show=function(){$("#result .stats .wpm .crown").removeClass("hidden").css("opacity","0").animate({opacity:1},250,"easeOutCubic")}},3133:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPoem=t.Poem=void 0;const i=a(o(9669)),s=["—","_"," "];class r{constructor(e,t,o){this.title=e,this.author=t,this.words=o,this.cleanUpText()}cleanUpText(){let e=0;const t=[];for(let o=0;o<this.words.length;o++){let n="";for(let e=0;e<this.words[o].length;e++)s.includes(this.words[o][e])||(n+=this.words[o][e]);if(""!=n&&(t.push(n),e++,100==e))break}this.words=t}}t.Poem=r,t.getPoem=function(){return n(this,void 0,void 0,(function*(){console.log("Getting poem");const e=yield i.default.get("https://poetrydb.org/random");try{const t=e.data[0],o=[];return t.lines.forEach((e=>{e.split(/ +/).forEach((e=>{o.push(e)}))})),new r(t.title,t.author,o)}catch(e){console.log(e)}}))}},1243:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hidePopup=t.showPopup=t.resetBefore=t.init=t.before=void 0;const s=i(o(6983)),r=i(o(6030)),u=i(o(2426)),d=u,l=i(o(8844)),c=i(o(6110)),p=i(o(9073));function f(){t.before.mode=null,t.before.punctuation=null,t.before.numbers=null}function m(e=!1){if($("#practiseWordsPopupWrapper").hasClass("hidden")){if("zen"===u.default.mode)return void r.add("Practice words is unsupported in zen mode",0);$("#practiseWordsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{e&&(console.log("focusing"),$("#practiseWordsPopup .missed").trigger("focus"))}))}}function h(){$("#practiseWordsPopupWrapper").hasClass("hidden")||$("#practiseWordsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#practiseWordsPopupWrapper").addClass("hidden")}))}t.before={mode:null,punctuation:null,numbers:null},t.init=function(e,o){if("zen"===u.default.mode)return;let n;n=e&&!o||!e&&o?20:10;let a=[];if(e&&(Object.keys(c.missedWords).forEach((e=>{a.push([e,c.missedWords[e]])})),a.sort(((e,t)=>t[1]-e[1])),a=a.slice(0,n)),e&&!o&&0==a.length)return void r.add("You haven't missed any words",0);let i=[];if(o&&(i=s.words.get().map(((e,t)=>[e,c.burstHistory[t]])),i.sort(((e,t)=>e[1]-t[1])),i=i.slice(0,Math.min(n,Math.round(.2*s.words.length)))),0==a.length&&0==i.length)return void r.add("Could not start a new custom test",0);const p=[];a.forEach((e=>{for(let t=0;t<e[1];t++)p.push(e[0])})),i.forEach(((e,t)=>{for(let o=0;o<i.length-t;o++)p.push(e[0])}));const f=null===t.before.mode?u.default.mode:t.before.mode,m=null===t.before.punctuation?u.default.punctuation:t.before.punctuation,h=null===t.before.numbers?u.default.numbers:t.before.numbers;d.setMode("custom"),l.setText(p),l.setIsWordRandom(!0),l.setWord(5*(i.length+a.length)),l.setTime(-1),t.before.mode=f,t.before.punctuation=m,t.before.numbers=h},t.resetBefore=f,t.showPopup=m,t.hidePopup=h,$("#practiseWordsPopupWrapper").on("click",(e=>{"practiseWordsPopupWrapper"===$(e.target).attr("id")&&h()})),$("#practiseWordsPopup .button").on("keypress",(e=>{"Enter"===e.key&&$(e.currentTarget).click()})),$("#practiseWordsPopup .button.both").on("focusout",(e=>{e.preventDefault(),$("#practiseWordsPopup .missed").trigger("focus")})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#practiseWordsPopupWrapper").hasClass("hidden")||(h(),e.preventDefault())})),$(document).on("keypress","#practiseWordsButton",(e=>{"Enter"===e.key&&m(!0)})),$(document.body).on("click","#practiseWordsButton",(()=>{m()})),p.subscribe((e=>{"mode"===e&&f()}))},7970:function(e,t,o){var n,a=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&a(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getReplayExport=t.replayGetWordsList=t.addReplayEvent=t.stopReplayRecording=t.startReplayRecording=t.pauseReplay=void 0;const u=r(o(2426)),d=s(o(9710));let l=[],c=[],p=0,f=!0,m=0,h=0,g=0,y=0,v=[],b=[];const w=null===(n=document.getElementById("playpauseReplayButton"))||void 0===n?void 0:n.children[0];function C(){const e=document.getElementById("replayWords");if(null===e)return;e.innerHTML="";let t=0;c.forEach((e=>{"backWord"===e.action?t--:"submitCorrectWord"!==e.action&&"submitErrorWord"!==e.action||t++})),l.forEach(((o,n)=>{if(n>t)return;const a=document.createElement("div");for(a.className="word",n=0;n<o.length;n++){const e=document.createElement("letter");e.innerHTML=o[n],a.appendChild(e)}e.appendChild(a)}))}function S(){var e;v.forEach((e=>{clearTimeout(e)})),v=[],b.forEach((e=>{clearTimeout(e)})),b=[],y=h,g=m,void 0!==w&&(w.className="fas fa-play",null===(e=w.parentNode)||void 0===e||e.setAttribute("aria-label","Resume replay"))}function _(e=!1){e&&u.default.playSoundOnError?d.playError():d.playClick()}function x(e,t=!1){var o,n,a;let i=null===(o=document.getElementById("replayWords"))||void 0===o?void 0:o.children[m];if(void 0!==i)if("correctLetter"===e.action)t||_(),i.children[h].classList.add("correct"),h++;else if("incorrectLetter"===e.action){let o;t||_(!0),h>=i.children.length&&(o=document.createElement("letter"),o.classList.add("extra"),o.innerHTML=null!==(a=null===(n=e.value)||void 0===n?void 0:n.toString())&&void 0!==a?a:"",i.appendChild(o)),o=i.children[h],o.classList.add("incorrect"),h++}else if("setLetterIndex"===e.action&&"number"==typeof e.value){t||_(),h=e.value;for(const e of[...i.children].slice(h))e.classList.contains("extra")?e.remove():e.className=""}else if("submitCorrectWord"===e.action)t||_(),m++,h=0;else if("submitErrorWord"===e.action)t||_(!0),i.classList.add("error"),m++,h=0;else if("backWord"===e.action){t||_(),m--;const e=document.getElementById("replayWords");for(null!==e&&(i=e.children[m]),h=i.children.length;""===i.children[h-1].className;)h--;i.classList.remove("error")}}function T(){let e=0;h=0,m=0,c.forEach(((t,o)=>{(m<g||m===g&&h<y)&&(x(t,!0),e=o+1)}));const t=Math.floor(c[e].time/1e3);return $("#replayStopwatch").text(t+"s"),e}function k(){var e;$("#resultReplay").stop(!0,!0).hasClass("hidden")?(C(),T(),$("#watchReplayButton").hasClass("loaded")||$("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),$("#resultReplay").removeClass("hidden").css("display","none").slideDown(250)):("Start replay"!=(null===(e=null==w?void 0:w.parentNode)||void 0===e?void 0:e.getAttribute("aria-label"))&&S(),$("#resultReplay").slideUp(250,(()=>{$("#resultReplay").addClass("hidden")})))}t.replayGetWordsList=function(e){l=e},t.pauseReplay=S,t.startReplayRecording=function(){$("#resultReplay").stop(!0,!0).hasClass("hidden")||k(),$("#replayStopwatch").text("0s"),c=[],p=performance.now(),f=!0,y=0,g=0},t.stopReplayRecording=function(){f=!1},t.addReplayEvent=function(e,t){if(!f)return;const o=performance.now()-p;c.push({action:e,value:t,time:o})},t.getReplayExport=function(){return JSON.stringify({replayData:c,wordsList:l})},$(".pageTest #playpauseReplayButton").on("click",(()=>{"fas fa-play"===(null==w?void 0:w.className)?function(){var e;if(h=0,m=0,void 0===w)return;w.className="fas fa-pause",null===(e=w.parentNode)||void 0===e||e.setAttribute("aria-label","Pause replay"),C();const t=T(),o=c[t].time;let n=Math.round(o/1e3);const a=Math.round(c[c.length-1].time/1e3);for(;n<=a;){const e=n;b.push(setTimeout((()=>{$("#replayStopwatch").text(e+"s")}),1e3*e-o)),n++}c.forEach(((e,n)=>{n<t||v.push(setTimeout((()=>{x(e)}),e.time-o))})),v.push(setTimeout((()=>{y=0,g=0,w.className="fas fa-play",w.parentNode.setAttribute("aria-label","Start replay")}),c[c.length-1].time-o))}():"fas fa-pause"===(null==w?void 0:w.className)&&S()})),$("#replayWords").on("click","letter",(e=>{var t;S();const o=document.querySelector("#replayWords"),n=[...null!==(t=null==o?void 0:o.children)&&void 0!==t?t:[]];g=n.indexOf(e.target.parentNode);const a=[...n[g].children];y=a.indexOf(e.target),C(),T()})),$(document).on("keypress","#watchReplayButton",(e=>{"Enter"===e.key&&k()})),$(document.body).on("click","#watchReplayButton",(()=>{k()}))},9359:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.updateRateQuote=t.updateCrown=t.hideCrown=t.showCrown=t.updateTodayTracker=t.updateGraphPBLine=t.toggleUnsmoothedRaw=void 0;const u=i(o(9881)),d=r(o(2426)),l=i(o(5021)),c=i(o(5601)),p=i(o(1003)),f=i(o(8185)),m=i(o(2614)),h=i(o(2541)),g=i(o(5899)),y=i(o(5217)),v=i(o(8800)),b=i(o(3541)),w=i(o(6110)),C=i(o(6030)),S=o(3328),_=o(9280);let x,T,k=!1;t.toggleUnsmoothedRaw=function(){k=!k,C.add(k?"on":"off",1)};let M=f.result.options.plugins.annotation.annotations,P=f.result.options.scales;function O(){var e,t,o;return s(this,void 0,void 0,(function*(){const n=yield m.getAll(),a=yield h.getLocalPB(x.mode,x.mode2,null!==(e=x.punctuation)&&void 0!==e&&e,x.language,x.difficulty,null!==(t=x.lazyMode)&&void 0!==t&&t,null!==(o=x.funbox)&&void 0!==o?o:"none");if(0==a)return;const i=l.roundTo2(d.default.alwaysShowCPM?5*a:a).toFixed(2);M.push({display:!0,type:"line",id:"lpb",scaleID:"wpm",value:i,borderColor:n.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:n.sub,font:{family:d.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:S.Chart.defaults.font.weight,lineHeight:S.Chart.defaults.font.lineHeight},color:n.bg,padding:3,borderRadius:3,position:"center",enabled:!0,content:`PB: ${i}`}}),T>=parseFloat(i)-20&&T<=parseFloat(i)+20&&(T=parseFloat(i)+15),P.wpm.max=Math.round(T+5),P.raw.max=Math.round(T+5)}))}t.updateGraphPBLine=O,t.updateTodayTracker=function(){$("#result .stats .time .bottom .timeToday").text(g.getString())},t.showCrown=function(){y.show()},t.hideCrown=function(){y.hide(),$("#result .stats .wpm .crown").attr("aria-label","")},t.updateCrown=function(){return s(this,void 0,void 0,(function*(){let e=0;const t=yield h.getLocalPB(d.default.mode,x.mode2,d.default.punctuation,d.default.language,d.default.difficulty,d.default.lazyMode,d.default.funbox);e=Math.abs(x.wpm-t),$("#result .stats .wpm .crown").attr("aria-label","+"+l.roundTo2(e))}))},t.updateRateQuote=function(e){var t,o;"quote"===d.default.mode&&((null===(o=null===(t=h.getSnapshot().quoteRatings)||void 0===t?void 0:t[e.language])||void 0===o?void 0:o[e.id])&&$(".pageTest #result #rateQuoteButton .icon").removeClass("far").addClass("fas"),v.getQuoteStats(e).then((e=>{var t,o;$(".pageTest #result #rateQuoteButton .rating").text(null!==(o=null===(t=null==e?void 0:e.average)||void 0===t?void 0:t.toFixed(1))&&void 0!==o?o:""),$(".pageTest #result #rateQuoteButton").css({opacity:0}).removeClass("hidden").css({opacity:1})})))},t.update=function(e,t,o,n,a,i,r,g){return s(this,void 0,void 0,(function*(){P=f.result.options.scales,M=f.result.options.plugins.annotation.annotations,x=e,$("#result #resultWordsHistory").addClass("hidden"),$("#retrySavingResultButton").addClass("hidden"),$(".pageTest #result #rateQuoteButton .icon").removeClass("fas").addClass("far"),$(".pageTest #result #rateQuoteButton .rating").text(""),$(".pageTest #result #rateQuoteButton").addClass("hidden"),$("#testModesNotice").css("opacity",0),$("#words").removeClass("blurred"),$("#wordsInput").blur(),$("#result .stats .time .bottom .afk").text(""),null!=_.Auth.currentUser?$("#result .loginTip").addClass("hidden"):$("#result .loginTip").removeClass("hidden"),function(){let e=!1;if(x.wpm>=1e3&&(e=!0),d.default.alwaysShowDecimalPlaces){0==d.default.alwaysShowCPM?($("#result .stats .wpm .top .text").text("wpm"),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(l.roundTo2(x.wpm).toFixed(2)),$("#result .stats .raw .bottom").text(l.roundTo2(x.rawWpm).toFixed(2)),$("#result .stats .wpm .bottom").attr("aria-label",l.roundTo2(5*x.wpm).toFixed(2)+" cpm")):($("#result .stats .wpm .top .text").text("cpm"),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(l.roundTo2(5*x.wpm).toFixed(2)),$("#result .stats .raw .bottom").text(l.roundTo2(5*x.rawWpm).toFixed(2)),$("#result .stats .wpm .bottom").attr("aria-label",l.roundTo2(x.wpm).toFixed(2)+" wpm")),$("#result .stats .acc .bottom").text(100==x.acc?"100%":l.roundTo2(x.acc).toFixed(2)+"%");let t=l.roundTo2(x.testDuration).toFixed(2)+"s";x.testDuration>61&&(t=l.secondsToString(l.roundTo2(x.testDuration))),$("#result .stats .time .bottom .text").text(t),$("#result .stats .raw .bottom").removeAttr("aria-label"),$("#result .stats .acc .bottom").removeAttr("aria-label")}else 0==d.default.alwaysShowCPM?($("#result .stats .wpm .top .text").text("wpm"),$("#result .stats .wpm .bottom").attr("aria-label",x.wpm+` (${l.roundTo2(5*x.wpm)} cpm)`),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(Math.round(x.wpm)),$("#result .stats .raw .bottom").text(Math.round(x.rawWpm)),$("#result .stats .raw .bottom").attr("aria-label",x.rawWpm)):($("#result .stats .wpm .top .text").text("cpm"),$("#result .stats .wpm .bottom").attr("aria-label",l.roundTo2(5*x.wpm)+` (${l.roundTo2(x.wpm)} wpm)`),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(Math.round(5*x.wpm)),$("#result .stats .raw .bottom").text(Math.round(5*x.rawWpm)),$("#result .stats .raw .bottom").attr("aria-label",5*x.rawWpm)),$("#result .stats .acc .bottom").text(Math.floor(x.acc)+"%"),$("#result .stats .acc .bottom").attr("aria-label",x.acc+"%")}(),d.default.alwaysShowDecimalPlaces?($("#result .stats .consistency .bottom").text(l.roundTo2(x.consistency).toFixed(2)+"%"),$("#result .stats .consistency .bottom").attr("aria-label",`${x.keyConsistency.toFixed(2)}% key`)):($("#result .stats .consistency .bottom").text(Math.round(x.consistency)+"%"),$("#result .stats .consistency .bottom").attr("aria-label",`${x.consistency}% (${x.keyConsistency}% key)`)),function(){const e=l.roundTo2(x.afkDuration/x.testDuration*100);if($("#result .stats .time .bottom .afk").text(""),e>0&&$("#result .stats .time .bottom .afk").text(e+"% afk"),$("#result .stats .time .bottom").attr("aria-label",`${x.afkDuration}s afk ${e}%`),d.default.alwaysShowDecimalPlaces){let e=l.roundTo2(x.testDuration).toFixed(2)+"s";x.testDuration>61&&(e=l.secondsToString(l.roundTo2(x.testDuration))),$("#result .stats .time .bottom .text").text(e)}else{let t=Math.round(x.testDuration)+"s";x.testDuration>61&&(t=l.secondsToString(Math.round(x.testDuration))),$("#result .stats .time .bottom .text").text(t),$("#result .stats .time .bottom").attr("aria-label",`${l.roundTo2(x.testDuration)}s (${x.afkDuration}s afk ${e}%)`)}}(),$("#result .stats .key .bottom").text(x.charStats[0]+"/"+x.charStats[1]+"/"+x.charStats[2]+"/"+x.charStats[3]),function(e){let t="";t+=d.default.mode,"time"===d.default.mode?t+=" "+d.default.time:"words"===d.default.mode?t+=" "+d.default.words:"quote"===d.default.mode&&void 0!==e.group&&(t+=" "+["short","medium","long","thicc"][e.group]),"custom"!=d.default.mode&&"gibberish"!==d.default.funbox&&"ascii"!==d.default.funbox&&"58008"!==d.default.funbox&&(t+="<br>"+x.language.replace(/_/g," ")),d.default.punctuation&&(t+="<br>punctuation"),d.default.numbers&&(t+="<br>numbers"),d.default.blindMode&&(t+="<br>blind"),d.default.lazyMode&&(t+="<br>lazy"),"none"!==d.default.funbox&&(t+="<br>"+d.default.funbox.replace(/_/g," ")),"expert"==d.default.difficulty?t+="<br>expert":"master"==d.default.difficulty&&(t+="<br>master"),$("#result .stats .testType .bottom").html(t)}(r),function(e){"quote"===d.default.mode?($("#result .stats .source").removeClass("hidden"),$("#result .stats .source .bottom").html(e.source)):$("#result .stats .source").addClass("hidden")}(r),yield function(){var e,t;return s(this,void 0,void 0,(function*(){M.length=0;const o=[];for(let e=1;e<=w.wpmHistory.length;e++)c.lastSecondNotRound&&e===w.wpmHistory.length?o.push(l.roundTo2(x.testDuration).toString()):o.push(e.toString());f.result.data.labels=o,P.wpm.title.text=d.default.alwaysShowCPM?"Character per Minute":"Words per Minute";const n=d.default.alwaysShowCPM?w.wpmHistory.map((e=>5*e)):w.wpmHistory;let a;if("toolong"===x.chartData)return;if(a=k?null!==(t=d.default.alwaysShowCPM?null===(e=x.chartData.unsmoothedRaw)||void 0===e?void 0:e.map((e=>5*e)):x.chartData.unsmoothedRaw)&&void 0!==t?t:[]:d.default.alwaysShowCPM?x.chartData.raw.map((e=>5*e)):x.chartData.raw,f.result.data.datasets[0].data=n,f.result.data.datasets[1].data=a,f.result.data.datasets[0].label=d.default.alwaysShowCPM?"cpm":"wpm",T=Math.max(Math.max(...a),Math.max(...n)),d.default.startGraphsAtZero)P.wpm.min=0,P.raw.min=0;else{const e=Math.min(Math.min(...a),Math.min(...n));P.wpm.min=e,P.raw.min=e}f.result.data.datasets[2].data=x.chartData.err;const i=yield m.get("sub");if("none"!==d.default.funbox){let e=d.default.funbox;"layoutfluid"===d.default.funbox&&(e+=" "+d.default.customLayoutfluid.replace(/#/g," ")),M.push({display:!0,id:"funbox-label",type:"line",scaleID:"wpm",value:P.wpm.min,borderColor:"transparent",borderWidth:1,borderDash:[2,2],label:{backgroundColor:"transparent",font:{family:d.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:S.Chart.defaults.font.weight,lineHeight:S.Chart.defaults.font.lineHeight},color:i,padding:3,borderRadius:3,position:"start",enabled:!0,content:`${e}`}})}P.wpm.max=T,P.raw.max=T,P.error.max=Math.max(...x.chartData.err)+1}))}(),yield O(),f.result.updateColors(),f.result.resize(),function(e){var t;const o=[];try{null===(t=h.getSnapshot().tags)||void 0===t||t.forEach((e=>{!0===e.active&&o.push(e)}))}catch(e){}$("#result .stats .tags").addClass("hidden"),0==o.length?$("#result .stats .tags").addClass("hidden"):$("#result .stats .tags").removeClass("hidden"),$("#result .stats .tags .bottom").text("");let n="start",a=15;o.forEach((t=>s(this,void 0,void 0,(function*(){const o=yield h.getLocalTagPB(t._id,d.default.mode,x.mode2,d.default.punctuation,d.default.language,d.default.difficulty,d.default.lazyMode);if($("#result .stats .tags .bottom").append(`\n      <div tagid="${t._id}" aria-label="PB: ${o}" data-balloon-pos="up">${t.name}<i class="fas fa-crown hidden"></i></div>\n    `),"quote"!=d.default.mode&&!e)if(o<x.wpm)h.saveLocalTagPB(t._id,d.default.mode,x.mode2,d.default.punctuation,d.default.language,d.default.difficulty,d.default.lazyMode,x.wpm,x.acc,x.rawWpm,x.consistency),$(`#result .stats .tags .bottom div[tagid="${t._id}"] .fas`).removeClass("hidden"),$(`#result .stats .tags .bottom div[tagid="${t._id}"]`).attr("aria-label","+"+l.roundTo2(x.wpm-o));else{const e=yield m.getAll();M.push({display:!0,type:"line",id:"tpb",scaleID:"wpm",value:d.default.alwaysShowCPM?5*o:o,borderColor:e.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:e.sub,font:{family:d.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:S.Chart.defaults.font.weight,lineHeight:S.Chart.defaults.font.lineHeight},color:e.bg,padding:3,borderRadius:3,position:n,xAdjust:a,enabled:!0,content:`${t.name} PB: ${l.roundTo2(d.default.alwaysShowCPM?5*o:o).toFixed(2)}`}}),"start"===n?(n="end",a=-15):(n="start",a=15)}}))))}(g),function(e,t,o,n,a){let i="";if(e&&(i+=`<br>failed (${t})`),o&&(i+="<br>afk detected"),c.invalid){i+="<br>invalid";let e="";(x.wpm<0||x.wpm>350)&&(e+="wpm"),(x.acc<75||x.acc>100)&&(e.length>0&&(e+=", "),e+="accuracy"),e.length>0&&(i+=` (${e})`)}n&&(i+="<br>repeated"),x.bailedOut&&(i+="<br>bailed out"),a&&(i+="<br>too short"),""==i?$("#result .stats .info").addClass("hidden"):($("#result .stats .info").removeClass("hidden"),i=i.substring(4),$("#result .stats .info .bottom").html(i))}(t,o,n,a,i),$("#result .stats .tags").hasClass("hidden")&&$("#result .stats .info").hasClass("hidden")?$("#result .stats .infoAndTags").addClass("hidden"):$("#result .stats .infoAndTags").removeClass("hidden"),b.get()?($("#middle #result .noStressMessage").remove(),$("#middle #result").prepend('\n\n      <div class=\'noStressMessage\' style="\n        text-align: center;\n        grid-column: 1/3;\n        font-size: 2rem;\n        padding-bottom: 2rem;\n      ">\n      <i class="fas fa-check"></i>\n      </div>\n\n    '),$("#middle #result .stats").addClass("hidden"),$("#middle #result .chart").addClass("hidden"),$("#middle #result #resultWordsHistory").addClass("hidden"),$("#middle #result #resultReplay").addClass("hidden"),$("#middle #result .loginTip").addClass("hidden"),$("#middle #result #showWordHistoryButton").addClass("hidden"),$("#middle #result #watchReplayButton").addClass("hidden"),$("#middle #result #saveScreenshotButton").addClass("hidden"),console.log(`Test Completed: ${x.wpm} wpm ${x.acc}% acc ${x.rawWpm} raw ${x.consistency}% consistency`)):($("#middle #result .stats").removeClass("hidden"),$("#middle #result .chart").removeClass("hidden"),null==_.Auth.currentUser&&$("#middle #result .loginTip").removeClass("hidden"),$("#middle #result #showWordHistoryButton").removeClass("hidden"),$("#middle #result #watchReplayButton").removeClass("hidden"),$("#middle #result #saveScreenshotButton").removeClass("hidden")),window.scrollY>0&&$([document.documentElement,document.body]).stop().animate({scrollTop:0},250),l.swapElements($("#typingTest"),$("#result"),250,(()=>{u.setResultCalculating(!1),$("#words").empty(),f.result.resize(),d.default.alwaysShowWordsHistory&&d.default.burstHeatmap&&u.applyBurstHeatmap(),$("#result").trigger("focus"),window.scrollTo({top:0}),$("#testModesNotice").addClass("hidden")}),(()=>{$("#resultExtraButtons").removeClass("hidden").css("opacity",0).animate({opacity:1},125),d.default.alwaysShowWordsHistory&&!b.get()&&u.toggleResultWords(),p.hide()}))}))}},7208:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isUsingOppositeShift=t.reset=t.rightState=t.leftState=void 0;const u=r(o(2426)),d=i(o(5021)),l=o(9366);t.leftState=!1,t.rightState=!1;let c=!1;const p={left:null,right:null,keymap:null};function f(e){const t=[...document.getElementsByClassName("keymap-key")],o=t.map((e=>e.dataset.key)),n=t.map((e=>e.childNodes[1]));if(l.capsState&&(e=!e),o.filter((e=>void 0===e)).length>2)return;if(e&&c||!e&&!c)return;c=e;const a=c?1:0;for(let e=0;e<o.length;e++){const t=o[e],i=n[e];void 0!==i&&void 0!==t&&(i.textContent=t[a])}}$(document).on("keydown",(e=>{"ShiftLeft"===e.code?(t.leftState=!0,t.rightState=!1):"ShiftRight"===e.code&&(t.leftState=!1,t.rightState=!0),"dynamic"===u.default.keymapLegendStyle&&f(t.leftState||t.rightState)})),$(document).keyup((e=>{"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(t.leftState=!1,t.rightState=!1),"dynamic"===u.default.keymapLegendStyle&&f(t.leftState||t.rightState)})),t.reset=function(){t.leftState=!1,t.rightState=!1};const m=["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyA","KeyS","KeyD","KeyF","KeyG","KeyZ","KeyX","KeyC","KeyV","Backquote","Digit1","Digit2","Digit3","Digit4","Digit5"],h=["KeyU","KeyI","KeyO","KeyP","KeyH","KeyJ","KeyK","KeyL","KeyN","KeyM","Digit7","Digit8","Digit9","Digit0","Backslash","BracketLeft","BracketRight","Semicolon","Quote","Comma","Period","Slash"];t.isUsingOppositeShift=function(e){return s(this,void 0,void 0,(function*(){return t.leftState||t.rightState?"on"===u.default.oppositeShiftMode?h.includes(e.code)||m.includes(e.code)?!!(t.leftState&&h.includes(e.code)||t.rightState&&m.includes(e.code)):null:"keymap"!==u.default.oppositeShiftMode||(yield function(){return s(this,void 0,void 0,(function*(){if(p.keymap===u.default.keymapLayout)return;const e=yield d.getLayout(u.default.keymapLayout);if(void 0===e)return;const t=e.keys,o=Object.entries(t);p.keymap=u.default.keymapLayout,e?(p.left=o.map((([e,t])=>t.slice(0,["row1","row2"].includes(e)?"row1"===e?7:6:5).map((e=>e.split(""))))).flat(2),p.right=o.map((([e,t])=>t.slice(["row1","row4"].includes(e)?"row1"===e?6:4:5).map((e=>e.split(""))))).flat(2)):(p.left=null,p.right=null)}))}(),p.left&&p.right?!!(t.leftState&&p.right.includes(e.key)||t.rightState&&p.left.includes(e.key)):null):null}))}},3929:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.hide=t.show=void 0;const s=i(o(9073)),r=i(o(5021));function u(e,t){if(e===t)return;$("#top .config .mode .text-button").removeClass("active"),$("#top .config .mode .text-button[mode='"+t+"']").addClass("active"),"time"==t||"words"==t||"custom"==t?($("#top .config .punctuationMode").removeClass("disabled"),$("#top .config .numbersMode").removeClass("disabled")):"quote"==t&&($("#top .config .punctuationMode").addClass("disabled"),$("#top .config .numbersMode").addClass("disabled"));const o={time:"time",words:"wordCount",custom:"customText",quote:"quoteLength",zen:""};if("zen"==t)return $(`#top .config .${o[e]}`).animate({opacity:0},125,(()=>{$(`#top .config .${o[e]}`).addClass("hidden")})),void $("#top .config .puncAndNum").animate({opacity:0},125,(()=>{$("#top .config .puncAndNum").addClass("invisible")}));"zen"!=e?r.swapElements($("#top .config ."+o[e]),$("#top .config ."+o[t]),250):setTimeout((()=>{$(`#top .config .${o[t]}`).removeClass("hidden"),$(`#top .config .${o[t]}`).css({opacity:0}).animate({opacity:1},125),$("#top .config .puncAndNum").removeClass("invisible"),$("#top .config .puncAndNum").css({opacity:0}).animate({opacity:1},125)}),125)}t.show=function(){$("#top .config").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:1},125)},t.hide=function(){$("#top .config").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#top .config").addClass("hidden")}))},t.update=u,s.subscribe(((e,t,o,n)=>{"mode"===e&&u(n,t)}))},6110:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.restart=t.pushBurstToHistory=t.pushToRawHistory=t.pushToWpmHistory=t.pushMissedWord=t.resetKeypressTimings=t.recordKeypressSpacing=t.setKeypressDuration=t.pushKeypressDuration=t.setKeypressTimingsTooLong=t.incrementAccuracy=t.pushKeypressesToHistory=t.setBurstStart=t.pushKeypressWord=t.incrementKeypressErrors=t.setKeypressNotAfk=t.incrementKeypressCount=t.updateLastKeypress=t.enableSpacingDebug=t.spacingDebug=t.setBailout=t.bailout=t.burstHistory=t.rawHistory=t.wpmHistory=t.keypressTimings=t.accuracy=t.missedWords=t.currentBurstStart=t.lastKeypress=t.currentKeypress=t.keypressPerSecond=t.corrected=t.input=void 0;const s=i(o(6983)),r=o(5021);t.input=new class{constructor(){this.current="",this.history=[],this.historyLength=0,this.length=0}reset(){this.current="",this.history=[],this.length=0}resetHistory(){this.history=[],this.length=0}setCurrent(e){this.current=e,this.length=this.current.length}appendCurrent(e){this.current+=e,this.length=this.current.length}resetCurrent(){this.current=""}getCurrent(){return this.current}pushHistory(){this.history.push(this.current),this.historyLength=this.history.length,this.resetCurrent()}popHistory(){var e;const t=null!==(e=this.history.pop())&&void 0!==e?e:"";return this.historyLength=this.history.length,t}getHistory(e){return void 0===e?this.history:this.history[e]}getHistoryLast(){return this.history[this.history.length-1]}},t.corrected=new class{constructor(){this.current="",this.history=[]}setCurrent(e){this.current=e}appendCurrent(e){this.current+=e}resetCurrent(){this.current=""}resetHistory(){this.history=[]}reset(){this.resetCurrent(),this.resetHistory()}getHistory(e){return this.history[e]}popHistory(){var e;return null!==(e=this.history.pop())&&void 0!==e?e:""}pushHistory(){this.history.push(this.current),this.current=""}},t.keypressPerSecond=[],t.currentKeypress={count:0,errors:0,words:[],afk:!0},t.currentBurstStart=0,t.missedWords={},t.accuracy={correct:0,incorrect:0},t.keypressTimings={spacing:{current:-1,array:[]},duration:{current:-1,array:[]}},t.wpmHistory=[],t.rawHistory=[],t.burstHistory=[],t.bailout=!1,t.setBailout=function(e){t.bailout=e},t.spacingDebug=!1,t.enableSpacingDebug=function(){t.spacingDebug=!0,console.clear()},t.updateLastKeypress=function(){t.lastKeypress=performance.now()},t.incrementKeypressCount=function(){t.currentKeypress.count++},t.setKeypressNotAfk=function(){t.currentKeypress.afk=!1},t.incrementKeypressErrors=function(){t.currentKeypress.errors++},t.pushKeypressWord=function(e){t.currentKeypress.words.push(e)},t.setBurstStart=function(e){t.currentBurstStart=e},t.pushKeypressesToHistory=function(){t.keypressPerSecond.push(t.currentKeypress),t.currentKeypress={count:0,errors:0,words:[],afk:!0}},t.incrementAccuracy=function(e){e?t.accuracy.correct++:t.accuracy.incorrect++},t.setKeypressTimingsTooLong=function(){t.keypressTimings.spacing.array="toolong",t.keypressTimings.duration.array="toolong"},t.pushKeypressDuration=function(e){t.keypressTimings.duration.array.push((0,r.roundTo2)(e))},t.setKeypressDuration=function(e){t.keypressTimings.duration.current=(0,r.roundTo2)(e)},t.recordKeypressSpacing=function(){const e=performance.now(),o=Math.abs(t.keypressTimings.spacing.current-e);var n;-1!==t.keypressTimings.spacing.current&&(n=o,t.keypressTimings.spacing.array.push((0,r.roundTo2)(n)),t.spacingDebug&&console.log("spacing debug","push",o,"length",t.keypressTimings.spacing.array.length)),function(e){t.keypressTimings.spacing.current=(0,r.roundTo2)(e)}(e),t.spacingDebug&&console.log("spacing debug","set",e,"length",t.keypressTimings.spacing.array.length),t.spacingDebug&&console.log("spacing debug","recorded","length",t.keypressTimings.spacing.array.length)},t.resetKeypressTimings=function(){t.keypressTimings={spacing:{current:performance.now(),array:[]},duration:{current:performance.now(),array:[]}},t.spacingDebug&&console.clear()},t.pushMissedWord=function(e){Object.keys(t.missedWords).includes(e)?t.missedWords[e]++:t.missedWords[e]=1},t.pushToWpmHistory=function(e){t.wpmHistory.push(e)},t.pushToRawHistory=function(e){t.rawHistory.push(e)},t.pushBurstToHistory=function(e){void 0===t.burstHistory[s.words.currentIndex]?t.burstHistory.push(e):t.burstHistory[s.words.currentIndex]=e},t.restart=function(){t.wpmHistory=[],t.rawHistory=[],t.burstHistory=[],t.keypressPerSecond=[],t.currentKeypress={count:0,errors:0,words:[],afk:!0},t.currentBurstStart=0,t.missedWords={},t.accuracy={correct:0,incorrect:0},t.keypressTimings={spacing:{current:-1,array:[]},duration:{current:-1,array:[]}}}},2850:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fail=t.finish=t.retrySavingResult=t.addWord=t.init=t.restart=t.startTest=t.punctuateWord=t.setNotSignedInUid=t.clearNotSignedInResult=t.notSignedInLastResult=void 0;const u=r(o(9063)),d=i(o(9881)),l=i(o(5082)),c=i(o(2426)),p=c,f=i(o(5021)),m=r(o(7313)),h=i(o(6030)),g=i(o(8844)),y=i(o(5601)),v=i(o(1243)),b=i(o(7208)),w=i(o(249)),C=i(o(3902)),S=i(o(1003)),_=i(o(4094)),x=i(o(3370)),T=i(o(3212)),k=i(o(7863)),M=i(o(617)),P=i(o(7555)),O=i(o(1022)),L=i(o(4694)),A=i(o(8295)),W=i(o(5217)),E=i(o(177)),j=i(o(1613)),B=i(o(2734)),D=i(o(2541)),R=i(o(7970)),q=i(o(3133)),I=i(o(335)),V=i(o(5899)),F=i(o(3053)),K=i(o(5003)),H=i(o(5369)),z=i(o(8800)),N=i(o(6289)),Q=i(o(3420)),U=i(o(9359)),G=i(o(7836)),J=i(o(4375)),Z=i(o(940)),Y=i(o(6110)),X=i(o(6983)),ee=i(o(7506)),te=i(o(6203)),oe=i(o(5922)),ne=i(o(9073)),ae=i(o(4095)),ie=i(o(850)),se=i(o(4310)),re=r(o(705)),ue=i(o(394)),de=o(9280);let le="";t.notSignedInLastResult=null,t.clearNotSignedInResult=function(){t.notSignedInLastResult=null},t.setNotSignedInUid=function(e){null!==t.notSignedInLastResult&&(t.notSignedInLastResult.uid=e,delete t.notSignedInLastResult.hash,t.notSignedInLastResult.hash=(0,re.default)(t.notSignedInLastResult))};let ce,pe="";function fe(e,t,o,n){let a=t;const i=c.default.language.split("_")[0],s=f.getLastChar(e);if("58008"===c.default.funbox){if(t.length>3&&Math.random()<.75){const e=["/","*","-","+"][Math.floor(4*Math.random())];a=f.setCharAt(a,Math.floor(a.length/2),e)}}else if(0!=o&&"."!=s&&"?"!=s&&"!"!=s||"code"==i){if(Math.random()<.1&&"."!=s&&","!=s&&o!=n-2||o==n-1)if("spanish"==i||"catalan"==i)"?"!=pe&&"!"!=pe||(a+=pe,pe="");else{const e=Math.random();e<=.8?a+=".":e>.8&&e<.9?"french"==i?a="?":a+="arabic"==i||"persian"==i||"urdu"==i?"؟":"greek"==i?";":"?":"french"==i?a="!":a+="!"}else if(Math.random()<.01&&","!=s&&"."!=s&&"russian"!==i)a=`"${a}"`;else if(Math.random()<.011&&","!=s&&"."!=s&&"russian"!==i&&"ukrainian"!==i)a=`'${a}'`;else if(Math.random()<.012&&","!=s&&"."!=s)if("code"==i){const e=Math.random();a=e<.25?`(${a})`:e<.5?`{${a}}`:e<.75?`[${a}]`:`<${a}>`}else a=`(${a})`;else if(Math.random()<.013&&","!=s&&"."!=s&&";"!=s&&"؛"!=s&&":"!=s)"french"==i?a=":":"greek"==i?a="·":a+=":";else if(Math.random()<.014&&","!=s&&"."!=s&&"-"!=e)a="-";else if(Math.random()<.015&&","!=s&&"."!=s&&";"!=s&&"؛"!=s&&":"!=s)"french"==i?a=";":"greek"==i?a="·":a+="arabic"==i?"؛":";";else if(Math.random()<.2&&","!=s)a+="arabic"==i||"urdu"==i||"persian"==i?"،":",";else if(Math.random()<.25&&"code"==i){const e=["{","}","[","]","(",")",";","=","+","%","/"];a=f.randomElementFromArray(e)}}else if(a=f.capitalizeFirstLetterOfEachWord(a),"spanish"==i||"catalan"==i){const e=Math.random();e>.9?(a="¿"+a,pe="?"):e>.8&&(a="¡"+a,pe="!")}return a}function me(e=!1,t,o,n=!1,a=!1){if(d.testRestarting||d.resultCalculating)return void(null==o||o.preventDefault());if("test"==J.get()&&!d.resultVisible&&!l.get()){if(X.hasTab&&!(null==o?void 0:o.shiftKey))return;if("zen"!==c.default.mode&&(null==o||o.preventDefault()),!f.canQuickRestart(c.default.mode,c.default.words,c.default.time,g)){let e="Use your mouse to confirm.";return c.default.quickTab&&(e="Press shift + tab or use your mouse to confirm."),void h.add("Quick restart disabled. "+e,0,3)}}if(Z.get()){Y.pushKeypressesToHistory();const e=y.calculateTestSeconds(performance.now()),t=y.calculateAfkSeconds(e);let o=e-t;o<0&&(o=0),console.log(`increasing incomplete time by ${o}s (${e}s - ${t}s afk)`),y.incrementIncompleteSeconds(o),y.incrementRestartCount(),o>600&&h.add(`Your time typing just increased by ${f.roundTo2(o/60)} minutes. If you think this is incorrect please contact Miodec and dont refresh the website.`,-1)}"zen"==c.default.mode&&$("#words").empty(),null===v.before.mode||e||n||(h.add("Reverting to previous settings.",0),null!==v.before.punctuation&&p.setPunctuation(v.before.punctuation),null!==v.before.numbers&&p.setNumbers(v.before.numbers),p.setMode(v.before.mode),v.resetBefore());let i=!1;d.resultVisible&&c.default.repeatedPace&&e&&(i=!0),l.reset(),E.clear(),y.restart(),Y.restart(),Y.corrected.reset(),b.reset(),T.hide(),Z.set(!1),R.stopReplayRecording(),k.hide(),M.hide(),P.hide(),O.hide(),R.pauseReplay(),Y.setBailout(!1),x.reset(),se.hide(),c.default.showAverage&&ie.update(),$("#showWordHistoryButton").removeClass("loaded"),$("#restartTestButton").blur(),C.resetMemoryTimer(),z.clearQuoteStats(),"test"==J.get()&&window.scrollY>0&&window.scrollTo({top:0,behavior:"smooth"}),$("#wordsInput").val(" "),d.reset(),$("#timerNumber").css("opacity",0);let r=null;r=d.resultVisible?$("#result"):$("#typingTest"),d.resultVisible&&("off"===c.default.randomTheme||oe.get()||_.randomizeTheme()),d.setResultVisible(!1),oe.set(!0),d.setTestRestarting(!0),r.stop(!0,!0).animate({opacity:0},a?0:125,(()=>s(this,void 0,void 0,(function*(){"test"==J.get()&&w.set(!1),d.focusWords(),$("#monkey .fast").stop(!0,!0).css("opacity",0),$("#monkey").stop(!0,!0).css({animationDuration:"0s"}),$("#typingTest").css("opacity",0).removeClass("hidden"),$("#wordsInput").val(" ");let t=!1;"quote"===c.default.mode&&"typing"===c.default.repeatQuotes&&""!==le&&(t=!0),yield C.rememberSettings(),"arrows"===c.default.funbox?(p.setPunctuation(!1,!0),p.setNumbers(!1,!0)):"58008"===c.default.funbox?p.setNumbers(!1,!0):("specials"===c.default.funbox||"ascii"===c.default.funbox)&&(p.setPunctuation(!1,!0),p.setNumbers(!1,!0)),!e||"plus_one"!==c.default.funbox&&"plus_two"!==c.default.funbox||(h.add("Sorry, this funbox won't work with repeated tests.",0,4),e=!1),e||t?(ee.setRepeated(!0),ee.setPaceRepeat(i),Z.set(!1),R.stopReplayRecording(),X.words.resetCurrentIndex(),Y.input.reset(),d.showWords(),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&S.highlightKey(X.words.getCurrent().substring(Y.input.current.length,Y.input.current.length+1).toString().toUpperCase()),C.toggleScript(X.words.getCurrent()),yield x.init()):(ee.setRepeated(!1),ee.setPaceRepeat(i),X.setHasTab(!1),yield be(),yield x.init()),le="","quote"===c.default.mode&&ee.setRepeated(!1),"off"!==c.default.keymapMode?S.show():S.hide(),document.querySelector("#miniTimerAndLiveWpm .wpm").innerHTML="0",document.querySelector("#miniTimerAndLiveWpm .acc").innerHTML="100%",document.querySelector("#miniTimerAndLiveWpm .burst").innerHTML="0",document.querySelector("#liveWpm").innerHTML="0",document.querySelector("#liveAcc").innerHTML="100%",document.querySelector("#liveBurst").innerHTML="0","memory"===c.default.funbox&&(C.startMemoryTimer(),"next"===c.default.keymapMode&&p.setKeymapMode("react"));const o=f.getMode2(c.default,X.randomQuote);let n="";"none"!==c.default.funbox&&(n=" "+c.default.funbox),$(".pageTest #premidTestMode").text(`${c.default.mode} ${o} ${c.default.language.replace(/_/g," ")}${n}`),$(".pageTest #premidSecondsLeft").text(c.default.time),"layoutfluid"===c.default.funbox&&(p.setLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0),p.setKeymapLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0),S.highlightKey(X.words.getCurrent().substring(Y.input.current.length,Y.input.current.length+1).toString().toUpperCase())),$("#result").addClass("hidden"),$("#testModesNotice").removeClass("hidden").css({opacity:1}),te.update(),$("#typingTest").css("opacity",0).removeClass("hidden").stop(!0,!0).animate({opacity:1},a?0:125,(()=>{d.setTestRestarting(!1),W.hide(),E.clear(),$("#commandLineWrapper").hasClass("hidden")&&d.focusWords(),oe.set(!1)}))}))))}function he(e,t){if("rAnDoMcAsE"===c.default.funbox){let t="";for(let o=0;o<e.length;o++)t+=o%2!=0?e[o].toUpperCase():e[o];e=t}else"capitals"===c.default.funbox?e=f.capitalizeFirstLetterOfEachWord(e):"gibberish"===c.default.funbox?e=f.getGibberish():"arrows"===c.default.funbox?e=f.getArrows():"58008"===c.default.funbox?e=f.getNumbers(7):"specials"===c.default.funbox?e=f.getSpecials():"ascii"===c.default.funbox?e=f.getASCII():void 0!==t&&"weakspot"===c.default.funbox&&(e=F.getWord(t));return e}function ge(e){return s(this,void 0,void 0,(function*(){return c.default.britishEnglish&&/english/.test(c.default.language)&&(e=yield N.replace(e)),e}))}function ye(e,t){return!0!==c.default.lazyMode||t.noLazyMode||(e=Q.replaceAccents(e,t.accents)),e}function ve(e,t,o){var n,a;return s(this,void 0,void 0,(function*(){let i=e.randomWord();const s=X.words.get(X.words.length-1,!0),r=X.words.get(X.words.length-2,!0);if("quote"===c.default.mode)i=null!==(a=null===(n=X.randomQuote.textSplit)||void 0===n?void 0:n[X.words.length])&&void 0!==a?a:"";else if("custom"!=c.default.mode||g.isWordRandom||g.isTimeRandom)if("custom"==c.default.mode&&(g.isWordRandom||g.isTimeRandom)&&(e.length<4||null!==v.before.mode))i=e.randomWord();else{let t=0;for(;t<100&&(s==i||r==i||!c.default.punctuation&&"I"==i);)t++,i=e.randomWord()}else i=g.text[X.words.length];return void 0===i&&(i=e.randomWord()),i=i.replace(/ +/gm," "),i=i.replace(/^ | $/gm,""),i=ye(i,t),i=yield ge(i),i=he(i,e),c.default.punctuation&&(i=fe(X.words.get(X.words.length-1),i,X.words.length,o)),c.default.numbers&&Math.random()<.1&&(i=f.getNumbers(4)),i}))}function be(){return s(this,void 0,void 0,(function*(){Z.set(!1),G.reset(),R.stopReplayRecording(),X.words.reset(),d.setCurrentWordElementIndex(0),Y.input.resetHistory(),Y.input.resetCurrent(),"test"==J.get()&&(yield C.activate());let e=yield f.getLanguage(c.default.language);e&&e.name!==c.default.language&&p.setLanguage("english"),e||(p.setLanguage("english"),e=yield f.getLanguage(c.default.language)),!0===c.default.lazyMode&&e.noLazyMode?(ce=!0,h.add("This language does not support lazy mode.",0),p.setLazyMode(!1,!0)):!0!==ce||e.noLazyMode||p.setLazyMode(!0,!0),!1!==c.default.lazyMode||e.noLazyMode||(ce=!1);let t=100;if(c.default.showAllLines?"quote"===c.default.mode?t=100:"custom"===c.default.mode?t=g.isWordRandom?g.word:g.isTimeRandom?100:g.text.length:"time"!=c.default.mode&&(t=c.default.words):("words"===c.default.mode&&c.default.words<t&&(t=c.default.words),"custom"==c.default.mode&&g.isWordRandom&&g.word<t&&(t=g.word),"custom"==c.default.mode&&g.isTimeRandom&&(t=100),"custom"==c.default.mode&&!g.isWordRandom&&!g.isTimeRandom&&g.text.length<t&&(t=g.text.length)),("custom"===c.default.mode&&g.isWordRandom&&0==g.word||"custom"===c.default.mode&&g.isTimeRandom&&0==g.time)&&(t=100),"words"===c.default.mode&&0===c.default.words&&(t=100),"plus_one"===c.default.funbox&&(t=2,"words"===c.default.mode&&c.default.words<t&&(t=c.default.words)),"plus_two"===c.default.funbox&&(t=3,"words"===c.default.mode&&c.default.words<t&&(t=c.default.words)),"time"==c.default.mode||"words"==c.default.mode||"custom"==c.default.mode){let o=e.words;"custom"==c.default.mode&&(o=g.text);const n=K.withWords(o,c.default.funbox);if("wikipedia"!=c.default.funbox&&"poetry"!=c.default.funbox||"custom"==c.default.mode)for(let o=0;o<t;o++){const a=yield ve(n,e,t);if(/\t/g.test(a)&&X.setHasTab(!0),/ +/.test(a)){const e=a.split(" ");let n=0;for(;n<e.length&&(X.words.push(e[n]),n++,X.words.length!=t||"custom"!=c.default.mode||!g.isWordRandom););("custom"!=c.default.mode||g.isWordRandom||g.isTimeRandom)&&(o=X.words.length-1)}else X.words.push(a)}else{let e=0;for(;"words"==c.default.mode&&c.default.words>=e||"time"===c.default.mode&&e<100;){const t="wikipedia"==c.default.funbox?yield I.getSection(c.default.language):yield q.getPoem();if(void 0!==t)for(const o of t.words){if(e>=c.default.words&&"words"==c.default.mode){e++;break}e++,X.words.push(o)}}}}else if("quote"===c.default.mode){const o=yield m.default.getQuotes(c.default.language,c.default.quoteLength);if(0===o.length)return d.setTestRestarting(!1),h.add(`No ${c.default.language.replace(/_\d*k$/g,"")} quotes found`,0),de.Auth.currentUser&&A.show(!1),p.setMode("words"),void me();let n;if(c.default.quoteLength.includes(-2)&&1==c.default.quoteLength.length){const e=m.default.getQuoteById(L.selectedId);void 0===e?(n=o.groups[0][0],h.add("Quote Id Does Not Exist",0)):n=e}else{const e=m.default.getRandomQuote();if(null===e)return h.add("No quotes found for selected quote length",0),void d.setTestRestarting(!1);n=e}if(void 0===n)return;n.text=n.text.replace(/ +/gm," "),n.text=n.text.replace(/\\\\t/gm,"\t"),n.text=n.text.replace(/\\\\n/gm,"\n"),n.text=n.text.replace(/\\t/gm,"\t"),n.text=n.text.replace(/\\n/gm,"\n"),n.text=n.text.replace(/( *(\r\n|\r|\n) *)/g,"\n "),n.text=n.text.replace(/…/g,"..."),n.text=n.text.trim(),n.textSplit=n.text.split(" "),n.language=c.default.language.replace(/_\d*k$/g,""),X.setRandomQuote(n);const a=X.randomQuote.textSplit;if(void 0===a)return;t=c.default.showAllLines?a.length:Math.min(t,a.length);for(let o=0;o<t;o++)/\t/g.test(a[o])&&X.setHasTab(!0),a[o]=ye(a[o],e),a[o]=yield ge(a[o]),a[o]=he(a[o]),X.words.push(a[o])}e.leftToRight?d.arrangeCharactersLeftToRight():d.arrangeCharactersRightToLeft(),e.ligatures?($("#words").addClass("withLigatures"),$("#resultWordsHistory .words").addClass("withLigatures"),$("#resultReplay .words").addClass("withLigatures")):($("#words").removeClass("withLigatures"),$("#resultWordsHistory .words").removeClass("withLigatures"),$("#resultReplay .words").removeClass("withLigatures")),d.showWords(),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&S.highlightKey(X.words.getCurrent().substring(Y.input.current.length,Y.input.current.length+1).toString().toUpperCase()),C.toggleScript(X.words.getCurrent())}))}t.punctuateWord=fe,t.startTest=function(){if(oe.get())return!1;p.dbConfigLoaded||p.setChangedBeforeDb(!0),null!==de.Auth.currentUser?ue.log("testStarted"):ue.log("testStartedNoLogin"),Z.set(!0),R.startReplayRecording(),R.replayGetWordsList(X.words.list),Y.resetKeypressTimings(),O.restart(),O.show(),$("#liveWpm").text("0"),k.show(),M.show(),P.show(),O.update(),E.clear(),se.show(),"memory"===c.default.funbox&&(C.resetMemoryTimer(),$("#wordsWrapper").addClass("hidden"));try{("off"!==c.default.paceCaret||c.default.repeatedPace&&ee.isPaceRepeat)&&x.start()}catch(e){}return y.setStart(performance.now()),E.start(),!0},t.restart=me,t.init=be,t.addWord=function(){var e,t;return s(this,void 0,void 0,(function*(){let o=100;if("plus_one"===c.default.funbox&&(o=1),"plus_two"===c.default.funbox&&(o=2),X.words.length-Y.input.history.length>o||"words"===c.default.mode&&X.words.length>=c.default.words&&c.default.words>0||"custom"===c.default.mode&&g.isWordRandom&&X.words.length>=g.word&&0!=g.word||"custom"===c.default.mode&&!g.isWordRandom&&!g.isTimeRandom&&X.words.length>=g.text.length||"quote"===c.default.mode&&X.words.length>=(null!==(t=null===(e=X.randomQuote.textSplit)||void 0===e?void 0:e.length)&&void 0!==t?t:0))return;if("wikipedia"===c.default.funbox||"poetry"==c.default.funbox){if(!(X.words.length-X.words.currentIndex<20))return;{const e="wikipedia"==c.default.funbox?yield I.getSection(c.default.language):yield q.getPoem();if(void 0===e)return;let t=0;for(const o of e.words){if(t>=c.default.words&&"words"==c.default.mode)break;t++,X.words.push(o),d.addWord(o)}}}const n="custom"!==c.default.mode?yield f.getCurrentLanguage(c.default.language):Object.assign(Object.assign({},yield f.getCurrentLanguage(c.default.language)),{words:g.text}),a=K.withWords(n.words,c.default.funbox),i=yield ve(a,n,o),s=i.split(" ");s.length>1?s.forEach((e=>{X.words.push(e),d.addWord(e)})):(X.words.push(i),d.addWord(i))}))};const we={completedEvent:null,canRetry:!1};function $e(){return s(this,void 0,void 0,(function*(){const{completedEvent:e}=we;if(null===e)return void h.add("Could not retry saving the result as the result no longer exists.",0,-1);if(!we.canRetry)return;we.canRetry=!1,$("#retrySavingResultButton").addClass("hidden"),B.loading(!0),h.add("Retrying to save...");const t=yield u.default.results.save(e);if(B.loading(!1),U.hideCrown(),200!==t.status)return we.canRetry=!0,$("#retrySavingResultButton").removeClass("hidden"),h.add("Result not saved. "+t.message,-1);e._id=t.data.insertedId,t.data.isPb&&(e.isPb=!0),D.saveLocalResult(e),D.updateLocalStats({time:e.testDuration+e.incompleteTestSeconds-e.afkDuration,started:y.restartCount+1}),ue.log("testCompleted"),t.data.isPb&&(U.showCrown(),U.updateCrown(),D.saveLocalPB(c.default.mode,e.mode2,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,e.wpm,e.acc,e.rawWpm,e.consistency)),$("#retrySavingResultButton").addClass("hidden"),h.add("Result saved",1)}))}function Ce(e=!1){var o;return s(this,void 0,void 0,(function*(){if(!Z.get())return;if("zen"==c.default.mode&&0!=Y.input.current.length&&(Y.input.pushHistory(),Y.corrected.pushHistory(),R.replayGetWordsList(Y.input.history)),Y.recordKeypressSpacing(),d.setResultCalculating(!0),d.setResultVisible(!0),y.setEnd(performance.now()),Z.set(!1),R.stopReplayRecording(),w.set(!1),T.hide(),k.hide(),W.hide(),M.hide(),P.hide(),O.hide(),j.hide(),E.clear(),C.clear(),se.hide(),Y.burstHistory.length!==Y.input.getHistory().length){const e=y.calculateBurst();Y.pushBurstToHistory(e)}("zen"==c.default.mode||Y.bailout)&&y.removeAfkData();const n=function(e){var t,o,n;const a={wpm:void 0,rawWpm:void 0,charStats:void 0,acc:void 0,mode:c.default.mode,mode2:void 0,quoteLength:-1,punctuation:c.default.punctuation,numbers:c.default.numbers,lazyMode:c.default.lazyMode,timestamp:Date.now(),language:c.default.language,restartCount:y.restartCount,incompleteTestSeconds:y.incompleteSeconds<0?0:f.roundTo2(y.incompleteSeconds),difficulty:c.default.difficulty,blindMode:c.default.blindMode,tags:void 0,keySpacing:Y.keypressTimings.spacing.array,keyDuration:Y.keypressTimings.duration.array,consistency:void 0,keyConsistency:void 0,funbox:c.default.funbox,bailedOut:Y.bailout,chartData:{wpm:Y.wpmHistory,raw:void 0,err:void 0},customText:void 0,testDuration:void 0,afkDuration:void 0},i=y.calculateStats();if(i.time%1!=0&&"time"!==c.default.mode&&y.setLastSecondNotRound(),y.setLastTestWpm(i.wpm),a.wpm=i.wpm,a.rawWpm=i.wpmRaw,a.charStats=[i.correctChars+i.correctSpaces,i.incorrectChars,i.extraChars,i.missedChars],a.acc=i.acc,y.lastSecondNotRound&&!e){const e=y.calculateWpmAndRaw();Y.pushToWpmHistory(e.wpm),Y.pushToRawHistory(e.raw),Y.pushKeypressesToHistory()}const s=Y.keypressPerSecond.map((e=>Math.round(e.count/5*60))),r=f.stdDev(s),u=f.mean(s);let d=f.roundTo2(f.kogasa(r/u)),l="toolong"===Y.keypressTimings.spacing.array?[]:Y.keypressTimings.spacing.array.slice();l.length>0&&(l=l.slice(0,l.length-1));let p=f.roundTo2(f.kogasa(f.stdDev(l)/f.mean(l)));d&&!isNaN(d)||(d=0),p&&!isNaN(p)||(p=0),a.keyConsistency=p,a.consistency=d;const m=f.smooth(s,1);a.chartData.raw=m,a.chartData.unsmoothedRaw=s;const h=f.stdDev(m),v=f.mean(m),b=f.roundTo2(f.kogasa(h/v));a.smoothConsistency=b;const w=f.stdDev(null!==(t=a.chartData.wpm)&&void 0!==t?t:[]),$=f.mean(null!==(o=a.chartData.wpm)&&void 0!==o?o:[]),C=f.roundTo2(f.kogasa(w/$));a.wpmConsistency=C,a.testDuration=parseFloat(i.time.toString()),a.afkDuration=y.calculateAfkSeconds(a.testDuration),a.chartData.err=[];for(let e=0;e<Y.keypressPerSecond.length;e++)a.chartData.err.push(Y.keypressPerSecond[e].errors);"quote"===c.default.mode&&(a.quoteLength=X.randomQuote.group,a.lang=c.default.language.replace(/_\d*k$/g,"")),a.mode2=f.getMode2(c.default,X.randomQuote),"custom"===c.default.mode?(a.customText={},a.customText.textLen=g.text.length,a.customText.isWordRandom=g.isWordRandom,a.customText.isTimeRandom=g.isTimeRandom,a.customText.word=g.word,a.customText.time=g.time):delete a.customText;const S=[];try{null===(n=D.getSnapshot().tags)||void 0===n||n.forEach((e=>{!0===e.active&&S.push(e._id)}))}catch(e){}return a.tags=S,"custom"!=a.mode&&delete a.customText,a}(e);let a=Y.keypressPerSecond.slice(-5).every((e=>e.afk));Y.bailout&&(a=!1);let i=!1,s=!1;if(e?(h.add(`Test failed - ${le}`,0,1),s=!0):a?(h.add("Test invalid - AFK detected",0),s=!0):ee.isRepeated?(h.add("Test invalid - repeated",0),s=!0):"time"===c.default.mode&&n.mode2<15&&n.mode2>0||"time"===c.default.mode&&0==n.mode2&&n.testDuration<15||"words"===c.default.mode&&n.mode2<10&&n.mode2>0||"words"===c.default.mode&&0==n.mode2&&n.testDuration<15||"custom"===c.default.mode&&!g.isWordRandom&&!g.isTimeRandom&&g.text.length<10||"custom"===c.default.mode&&g.isWordRandom&&!g.isTimeRandom&&g.word<10||"custom"===c.default.mode&&!g.isWordRandom&&g.isTimeRandom&&g.time<15||"zen"===c.default.mode&&n.testDuration<15?(h.add("Test invalid - too short",0),i=!0,s=!0):n.wpm<0||n.wpm>350?(h.add("Test invalid - wpm",0),y.setInvalid(),s=!0):(n.acc<75||n.acc>100)&&(h.add("Test invalid - accuracy",0),y.setInvalid(),s=!0),s||(V.addSeconds(n.testDuration+(y.incompleteSeconds<0?0:f.roundTo2(y.incompleteSeconds))-n.afkDuration),U.updateTodayTracker()),null==de.Auth.currentUser?($(".pageTest #result #rateQuoteButton").addClass("hidden"),$(".pageTest #result #reportQuoteButton").addClass("hidden"),ue.log("testCompletedNoLogin"),s||(t.notSignedInLastResult=n),s=!0):$(".pageTest #result #reportQuoteButton").removeClass("hidden"),yield U.update(n,e,le,a,ee.isRepeated,i,X.randomQuote,s),"toolong"!==n.chartData&&delete n.chartData.unsmoothedRaw,n.testDuration>122&&(n.chartData="toolong",n.keySpacing="toolong",n.keyDuration="toolong",Y.setKeypressTimingsTooLong()),s)return void ue.log("testCompletedInvalid");"normal"!=c.default.difficulty&&("master"!=c.default.difficulty&&"expert"!=c.default.difficulty||e)||y.resetIncomplete(),n.uid=null===(o=de.Auth.currentUser)||void 0===o?void 0:o.uid,U.updateRateQuote(X.randomQuote),B.loading(!0),n.challenge=H.verify(n),null===n.challenge&&(null==n||delete n.challenge),n.hash=(0,re.default)(n);const r=yield u.default.results.save(n);if(B.loading(!1),200!==r.status)return console.log("Error saving result",n),$("#retrySavingResultButton").removeClass("hidden"),"Incorrect result hash"===r.message&&console.log(n),we.completedEvent=n,we.canRetry=!0,h.add("Failed to save result: "+r.message,-1);U.hideCrown(),n._id=r.data.insertedId,r.data.isPb&&(n.isPb=!0),D.saveLocalResult(n),D.updateLocalStats({time:n.testDuration+n.incompleteTestSeconds-n.afkDuration,started:y.restartCount+1}),ue.log("testCompleted"),r.data.isPb&&(U.showCrown(),U.updateCrown(),D.saveLocalPB(c.default.mode,n.mode2,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,n.wpm,n.acc,n.rawWpm,n.consistency)),$("#retrySavingResultButton").addClass("hidden")}))}function Se(e){le=e,Y.pushKeypressesToHistory(),Ce(!0);const t=y.calculateTestSeconds(performance.now());let o=t-y.calculateAfkSeconds(t);o<0&&(o=0),y.incrementIncompleteSeconds(o),y.incrementRestartCount()}t.retrySavingResult=$e,t.finish=Ce,t.fail=Se,$(document).on("click","#testModesNotice .text-button.restart",(()=>{me()})),$(document).on("keypress","#restartTestButton",(e=>{"Enter"===e.key&&(l.reset(),Z.get()&&"typing"===c.default.repeatQuotes&&"quote"===c.default.mode?me(!0):me())})),$(document.body).on("click","#restartTestButton",(()=>{l.set(),d.resultCalculating||(Z.get()&&"typing"===c.default.repeatQuotes&&"quote"===c.default.mode?me(!0):me())})),$(document.body).on("click","#retrySavingResultButton",$e),$(document).on("keypress","#nextTestButton",(e=>{"Enter"===e.key&&me()})),$(document.body).on("click","#nextTestButton",(()=>{l.set(),me()})),$(document.body).on("click","#restartTestButtonWithSameWordset",(()=>{"zen"!=c.default.mode?(l.set(),me(!0)):h.add("Repeat test disabled in zen mode")})),$(document).on("keypress","#restartTestButtonWithSameWordset",(e=>{"zen"!=c.default.mode?"Enter"===e.key&&me(!0):h.add("Repeat test disabled in zen mode")})),$(document).on("click","#top .config .wordCount .text-button",(e=>{var t;const o=null!==(t=$(e.currentTarget).attr("wordCount"))&&void 0!==t?t:"15";"custom"!=o&&(p.setWordCount(parseInt(o)),l.set(),me())})),$(document).on("click","#top .config .time .text-button",(e=>{var t;const o=null!==(t=$(e.currentTarget).attr("timeConfig"))&&void 0!==t?t:"10";"custom"!=o&&(p.setTimeConfig(parseInt(o)),l.set(),me())})),$(document).on("click","#top .config .quoteLength .text-button",(e=>{var t;let o=parseInt(null!==(t=$(e.currentTarget).attr("quoteLength"))&&void 0!==t?t:"1");-2!=o&&(-1==o&&(o=[0,1,2,3]),p.setQuoteLength(o,!1,e.shiftKey),l.set(),me())})),$(document).on("click","#top .config .punctuationMode .text-button",(()=>{p.setPunctuation(!c.default.punctuation),l.set(),me()})),$(document).on("click","#top .config .numbersMode .text-button",(()=>{p.setNumbers(!c.default.numbers),l.set(),me()})),$(document).on("click","#top .config .mode .text-button",(e=>{var t;if($(e.currentTarget).hasClass("active"))return;const o=null!==(t=$(e.currentTarget).attr("mode"))&&void 0!==t?t:"time";void 0!==o&&(p.setMode(o),l.set(),me())})),$("#practiseWordsPopup .button.missed").on("click",(()=>{v.hidePopup(),v.init(!0,!1),me(!1,0,void 0,!0)})),$("#practiseWordsPopup .button.slow").on("click",(()=>{v.hidePopup(),v.init(!1,!0),me(!1,0,void 0,!0)})),$("#practiseWordsPopup .button.both").on("click",(()=>{v.hidePopup(),v.init(!0,!0),me(!1,0,void 0,!0)})),$(document).on("click","#quoteSearchPopup #quoteSearchResults .searchResult",(e=>{var t;if(e.target.classList.contains("report"))return;const o=parseInt(null!==(t=$(e.currentTarget).attr("id"))&&void 0!==t?t:"");L.setSelectedId(o),!0===L.apply(o)&&me()})),$(document).on("click","#top #menu #startTestButton, #top .logo",(()=>{"test"===J.get()&&me()})),ne.subscribe(((e,t,o)=>{"difficulty"!==e||o||me(!1),"showAllLines"!==e||o||me(),"keymapMode"!==e||o||me(!1),"lazyMode"!==e||!1!==t||o||(ce=!1)})),ae.subscribe(((e,t)=>{"fail"===e&&void 0!==t&&Se(t),"finish"===e&&Ce()}))},7506:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setActiveChallenge=t.setPaceRepeat=t.setRepeated=t.activeChallenge=t.isPaceRepeat=t.isRepeated=void 0,t.isRepeated=!1,t.isPaceRepeat=!1,t.activeChallenge=null,t.setRepeated=function(e){t.isRepeated=e},t.setPaceRepeat=function(e){t.isPaceRepeat=e},t.setActiveChallenge=function(e){t.activeChallenge=e}},5601:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateStats=t.removeAfkData=t.calculateAccuracy=t.calculateBurst=t.setLastSecondNotRound=t.calculateAfkSeconds=t.setStart=t.setEnd=t.calculateWpmAndRaw=t.calculateTestSeconds=t.setInvalid=t.resetIncomplete=t.incrementIncompleteSeconds=t.incrementRestartCount=t.incompleteSeconds=t.restartCount=t.restart=t.getStats=t.setLastTestWpm=t.lastTestWpm=t.lastSecondNotRound=t.end2=t.start2=t.end=t.start=t.invalid=void 0;const r=s(o(2426)),u=i(o(5021)),d=i(o(6110)),l=i(o(6983));function c(e){if(void 0===e){const e=(t.end-d.lastKeypress)/1e3;return("zen"==r.default.mode||d.bailout)&&e<7?(d.lastKeypress-t.start)/1e3:(t.end-t.start)/1e3}return(e-t.start)/1e3}function p(){const e=d.accuracy.correct/(d.accuracy.correct+d.accuracy.incorrect)*100;return isNaN(e)?100:e}t.invalid=!1,t.lastSecondNotRound=!1,t.lastTestWpm=0,t.setLastTestWpm=function(e){t.lastTestWpm=e},t.getStats=function(){const e={start:t.start,end:t.end,wpmHistory:d.wpmHistory,rawHistory:d.wpmHistory,burstHistory:d.burstHistory,keypressPerSecond:d.keypressPerSecond,currentKeypress:d.currentKeypress,lastKeypress:d.lastKeypress,currentBurstStart:d.currentBurstStart,lastSecondNotRound:t.lastSecondNotRound,missedWords:d.missedWords,accuracy:d.accuracy,keypressTimings:d.keypressTimings};try{e.keySpacingStats={average:d.keypressTimings.spacing.array.reduce(((e,t)=>t+e))/d.keypressTimings.spacing.array.length,sd:u.stdDev(d.keypressTimings.spacing.array)}}catch(e){}try{e.keyDurationStats={average:d.keypressTimings.duration.array.reduce(((e,t)=>t+e))/d.keypressTimings.duration.array.length,sd:u.stdDev(d.keypressTimings.duration.array)}}catch(e){}return e},t.restart=function(){t.start=0,t.end=0,t.invalid=!1,t.lastSecondNotRound=!1},t.restartCount=0,t.incompleteSeconds=0,t.incrementRestartCount=function(){t.restartCount++},t.incrementIncompleteSeconds=function(e){t.incompleteSeconds+=e},t.resetIncomplete=function(){t.restartCount=0,t.incompleteSeconds=0},t.setInvalid=function(){t.invalid=!0},t.calculateTestSeconds=c,t.calculateWpmAndRaw=function(){let e=0,t=0,o=0;for(let n=0;n<d.input.history.length;n++){const a="zen"==r.default.mode?d.input.getHistory(n):l.words.get(n);d.input.getHistory(n)==a&&(t+=a.length,n<d.input.history.length-1&&"\n"!==u.getLastChar(d.input.getHistory(n))&&o++),e+=d.input.getHistory(n).length}if(""!==d.input.current){const o="zen"==r.default.mode?d.input.current:l.words.getCurrent(),n={correct:0,incorrect:0,missed:0};for(let e=0;e<o.length;e++)e<d.input.current.length?d.input.current[e]==o[e]?n.correct++:n.incorrect++:n.missed++;e+=n.correct,e+=n.incorrect,e+=n.missed,0==n.incorrect&&(t+=n.correct)}"nospace"!==r.default.funbox&&"arrows"!==r.default.funbox||(o=0),e+=d.input.current.length;const n=c(performance.now());return{wpm:Math.round((t+o)*(60/n)/5),raw:Math.round((e+o)*(60/n)/5)}},t.setEnd=function(e){t.end=e,t.end2=Date.now()},t.setStart=function(e){t.start=e,t.start2=Date.now()},t.calculateAfkSeconds=function(e){let t=0;return void 0!==e&&(t="time"===r.default.mode?Math.round(e)-d.keypressPerSecond.length:Math.ceil(e)-d.keypressPerSecond.length,t<0&&(t=0)),d.keypressPerSecond.filter((e=>e.afk)).length+t},t.setLastSecondNotRound=function(){t.lastSecondNotRound=!0},t.calculateBurst=function(){const e=(performance.now()-d.currentBurstStart)/1e3;let t;t=d.input.current.length,0==t&&(t=d.input.getHistoryLast().length);const o=u.roundTo2(t*(60/e)/5);return Math.round(o)},t.calculateAccuracy=p,t.removeAfkData=function(){const e=c();d.keypressPerSecond.splice(e),d.keypressTimings.duration.array.splice(e),d.keypressTimings.spacing.array.splice(e),d.wpmHistory.splice(e)},t.calculateStats=function(){let e=c();"custom"!=r.default.mode&&(e=u.roundTo2(e));const t=function(){let e=0,t=0,o=0,n=0,a=0,i=0,s=0;for(let c=0;c<d.input.history.length;c++){const p="zen"==r.default.mode?d.input.getHistory(c):l.words.get(c);if(""!==d.input.getHistory(c)){if(d.input.getHistory(c)==p)e+=p.length,t+=p.length,c<d.input.history.length-1&&"\n"!==u.getLastChar(d.input.getHistory(c))&&s++;else if(d.input.getHistory(c).length>=p.length)for(let e=0;e<d.input.getHistory(c).length;e++)e<p.length?d.input.getHistory(c)[e]==p[e]?t++:o++:n++;else{const n={correct:0,incorrect:0,missed:0};for(let e=0;e<p.length;e++)e<d.input.getHistory(c).length?d.input.getHistory(c)[e]==p[e]?n.correct++:n.incorrect++:n.missed++;t+=n.correct,o+=n.incorrect,c===d.input.history.length-1&&"time"==r.default.mode?0===n.incorrect&&(e+=n.correct):a+=n.missed}c<d.input.history.length-1&&i++}}return"nospace"!==r.default.funbox&&"arrows"!==r.default.funbox||(i=0,s=0),{spaces:i,correctWordChars:e,allCorrectChars:t,incorrectChars:"zen"==r.default.mode?d.accuracy.incorrect:o,extraChars:n,missedChars:a,correctSpaces:s}}(),o=u.roundTo2((t.correctWordChars+t.correctSpaces)*(60/e)/5),n=u.roundTo2((t.allCorrectChars+t.spaces+t.incorrectChars+t.extraChars)*(60/e)/5),a=u.roundTo2(p());return{wpm:isNaN(o)?0:o,wpmRaw:isNaN(n)?0:n,acc:a,correctChars:t.correctWordChars,incorrectChars:t.incorrectChars,missedChars:t.missedChars,extraChars:t.extraChars,allChars:t.allCorrectChars+t.spaces+t.incorrectChars+t.extraChars,time:u.roundTo2(e),spaces:t.spaces,correctSpaces:t.correctSpaces}}},177:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.start=t.getTimerStats=t.clear=t.enableTimerDebug=void 0;const r=i(o(2426)),u=r,d=i(o(8844)),l=i(o(1022)),c=i(o(7863)),p=i(o(5601)),f=i(o(6110)),m=i(o(6983)),h=i(o(4310)),g=i(o(5021)),y=i(o(6030)),v=i(o(3212)),b=i(o(1119)),w=i(o(940)),$=i(o(1306)),C=i(o(4095));let S=0,_=null;let x=0,T=!1;t.enableTimerDebug=function(){T=!0},t.clear=function(){$.set(0),null!==_&&clearTimeout(_)};let k=[];t.getTimerStats=function(){return k},t.start=function(){return s(this,void 0,void 0,(function*(){b.clear(),S=0,k=[],x=p.start+1e3,function e(){const t=x-performance.now();k.push({dateNow:Date.now(),now:performance.now(),expected:x,nextDelay:t}),("time"===r.default.mode&&r.default.time<130&&r.default.time>0||"words"===r.default.mode&&r.default.words<250&&r.default.words>0)&&(t<500&&b.set(),t<100&&(S++,S>5&&(window.navigator.userAgent.includes("Edg")&&y.add('This bad performance could be caused by "efficiency mode" on Microsoft Edge.'),y.add("Stopping the test due to bad performance. This would cause test calculations to be incorrect. If this happens a lot, please report this.",-1),C.dispatch("fail","slow timer")))),_=setTimeout((function(){if(!w.get())return null!==_&&clearTimeout(_),b.clear(),void(S=0);(function(){s(this,void 0,void 0,(function*(){T&&console.time("timer step -----------------------------"),$.increment(),function(){T&&console.time("premid");const e=document.querySelector("#premidSecondsLeft");null!==e&&(e.innerHTML=(r.default.time-$.get()).toString()),T&&console.timeEnd("premid")}(),T&&console.time("timer progress update"),("time"===r.default.mode||"custom"===r.default.mode&&d.isTimeRandom)&&l.update(),T&&console.timeEnd("timer progress update");const e=function(){T&&console.time("calculate wpm and raw");const e=p.calculateWpmAndRaw();return T&&console.timeEnd("calculate wpm and raw"),T&&console.time("update live wpm"),c.update(e.wpm,e.raw),T&&console.timeEnd("update live wpm"),T&&console.time("push to history"),f.pushToWpmHistory(e.wpm),f.pushToRawHistory(e.raw),T&&console.timeEnd("push to history"),e}(),t=function(){T&&console.time("calculate acc");const e=g.roundTo2(p.calculateAccuracy());return T&&console.timeEnd("calculate acc"),e}();!function(e){T&&console.time("update monkey");const t=r.default.blindMode?e.raw:e.wpm;h.updateFastOpacity(t),T&&console.timeEnd("update monkey")}(e),function(){if(T&&console.time("layoutfluid"),"layoutfluid"===r.default.funbox&&"time"===r.default.mode){const e=r.default.customLayoutfluid?r.default.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"],t=r.default.time/e.length,o=$.get(),n=e[Math.floor(o/t)],a=[];for(let o=1;o<e.length;o++)a.push(Math.floor(t*o));a.includes(o+3)?y.add("3",0,1):a.includes(o+2)?y.add("2",0,1):a.includes(o+1)&&y.add("1",0,1),r.default.layout!==n&&void 0!==n&&(y.add(`--- !!! ${n} !!! ---`,0),u.setLayout(n,!0),u.setKeymapLayout(n,!0))}T&&console.timeEnd("layoutfluid")}(),function(e,t){T&&console.time("fail conditions"),f.pushKeypressesToHistory(),"custom"===r.default.minWpm&&e.wpm<r.default.minWpmCustomSpeed&&m.words.currentIndex>3?(null!==_&&clearTimeout(_),b.clear(),S=0,C.dispatch("fail","min wpm")):"custom"===r.default.minAcc&&t<r.default.minAccCustom&&m.words.currentIndex>3?(null!==_&&clearTimeout(_),b.clear(),S=0,C.dispatch("fail","min accuracy")):T&&console.timeEnd("fail conditions")}(e,t),function(){if(T&&console.time("times up check"),("time"==r.default.mode||"custom"===r.default.mode&&d.isTimeRandom)&&($.get()>=r.default.time&&0!==r.default.time&&"time"===r.default.mode||$.get()>=d.time&&0!==d.time&&"custom"===r.default.mode))return null!==_&&clearTimeout(_),v.hide(),f.input.pushHistory(),f.corrected.pushHistory(),b.clear(),S=0,void C.dispatch("finish");T&&console.timeEnd("times up check")}(),T&&console.timeEnd("timer step -----------------------------")}))})(),x+=1e3,e()}),t)}()}))}},9881:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.highlightBadWord=t.applyBurstHeatmap=t.toggleResultWords=t.arrangeCharactersLeftToRight=t.arrangeCharactersRightToLeft=t.lineJump=t.updateWordElement=t.screenshot=t.colorful=t.flipColors=t.addWord=t.showWords=t.updateActiveElement=t.focusWords=t.reset=t.setResultCalculating=t.setTestRestarting=t.setActiveWordTop=t.setCurrentWordElementIndex=t.setResultVisible=t.resultCalculating=t.currentTestLine=t.lineTransition=t.testRestartingPromise=t.testRestarting=t.activeWordTop=t.resultVisible=t.currentWordElementIndex=void 0;const u=i(o(6030)),d=i(o(2614)),l=i(o(2426)),c=l,p=i(o(2541)),f=i(o(6983)),m=i(o(6110)),h=i(o(8844)),g=i(o(3212)),y=i(o(1613)),v=i(o(7970)),b=i(o(5021)),w=i(o(1119)),C=i(o(9073)),S=r(o(9546)),_=o(9280);let x;function T(){$("#wordsWrapper").hasClass("hidden")||$("#wordsInput").trigger("focus")}function k(e){const o=document.querySelector("#words .active");"zen"==l.default.mode&&e?null==o||o.remove():null!==o&&("word"==l.default.highlightMode&&o.querySelectorAll("letter").forEach((e=>{e.classList.remove("correct")})),o.classList.remove("active"));try{const e=document.querySelectorAll("#words .word")[t.currentWordElementIndex];e.classList.add("active"),e.classList.remove("error"),t.activeWordTop=document.querySelector("#words .active").offsetTop,"word"==l.default.highlightMode&&e.querySelectorAll("letter").forEach((e=>{e.classList.add("correct")}))}catch(e){}}function M(e){let t=!1,o="<div class='word'>";for(let n=0;n<e.length;n++)"arrows"===l.default.funbox?("↑"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-up"></i></letter>'),"↓"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-down"></i></letter>'),"←"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-left"></i></letter>'),"→"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-right"></i></letter>')):"\t"===e.charAt(n)?o+="<letter class='tabChar'><i class=\"fas fa-long-arrow-alt-right\"></i></letter>":"\n"===e.charAt(n)?(t=!0,o+="<letter class='nlChar'><i class=\"fas fa-angle-down\"></i></letter>"):o+="<letter>"+e.charAt(n)+"</letter>";return o+="</div>",t&&(o+="<div class='newline'></div>"),o}function P(e){e?$("#words").addClass("flipped"):$("#words").removeClass("flipped")}function O(e){e?$("#words").addClass("colorfulMode"):$("#words").removeClass("colorfulMode")}function L(){return s(this,void 0,void 0,(function*(){let e=!1;function t(){$("#notificationCenter").removeClass("hidden"),$("#commandLineMobileButton").removeClass("hidden"),$(".pageTest .ssWatermark").addClass("hidden"),$(".pageTest .ssWatermark").text("monkeytype.com"),$(".pageTest .buttons").removeClass("hidden"),e&&$("#resultReplay").removeClass("hidden"),null==_.Auth.currentUser&&$(".pageTest .loginTip").removeClass("hidden")}$("#resultReplay").hasClass("hidden")||(e=!0,v.pauseReplay());const o=new Date(Date.now());$("#resultReplay").addClass("hidden"),$(".pageTest .ssWatermark").removeClass("hidden"),$(".pageTest .ssWatermark").text((0,S.default)(o,"dd MMM yyyy HH:mm")+" | monkeytype.com "),null!=_.Auth.currentUser&&$(".pageTest .ssWatermark").text(p.getSnapshot().name+" | "+(0,S.default)(o,"dd MMM yyyy HH:mm")+" | monkeytype.com  "),$(".pageTest .buttons").addClass("hidden");const n=$("#middle"),a=n.position().left,i=n.position().top,s=n.outerWidth(!0),r=n.outerHeight(!0);$("#notificationCenter").addClass("hidden"),$("#commandLineMobileButton").addClass("hidden"),$(".pageTest .loginTip").addClass("hidden");try{const e=50,o=25;html2canvas(document.body,{backgroundColor:yield d.get("bg"),width:s+2*e,height:r+2*o,x:a-e,y:i-o}).then((e=>{e.toBlob((e=>{try{if(null===e)return;navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(open(URL.createObjectURL(e)),t()):navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))]).then((()=>{u.add("Copied to clipboard",1,2),t()}))}catch(e){u.add("Error saving image to clipboard: "+e.message,-1),t()}}))}))}catch(e){u.add("Error creating image: "+e.message,-1),t()}setTimeout((()=>{t()}),3e3)}))}function A(e=!l.default.blindMode){const t=m.input.current,o=document.querySelector("#words .word.active"),n=f.words.getCurrent();if(!n&&"zen"!==l.default.mode)return;let a="",i=!1;if("zen"===l.default.mode)for(let e=0;e<m.input.current.length;e++)"\t"===m.input.current[e]?a+='<letter class=\'tabChar correct\' style="opacity: 0"><i class="fas fa-long-arrow-alt-right"></i></letter>':"\n"===m.input.current[e]?(i=!0,a+='<letter class=\'nlChar correct\' style="opacity: 0"><i class="fas fa-angle-down"></i></letter>'):a+=`<letter class="correct">${m.input.current[e]}</letter>`;else{let i=!1;const s=b.trailingComposeChars.test(t)?t.search(b.trailingComposeChars):t.length;t.search(b.trailingComposeChars)<n.length&&n.slice(0,s)===t.slice(0,s)&&(i=!0);let r=i?"correct":"incorrect";l.default.blindMode&&(r="correct");for(let o=0;o<t.length;o++){const i=n[o]==t[o];let s="correct";"off"==l.default.highlightMode&&(s="");let u=n[o],d="",c="";if("arrows"===l.default.funbox?("↑"===u&&(u='<i class="fas fa-arrow-up"></i>'),"↓"===u&&(u='<i class="fas fa-arrow-down"></i>'),"←"===u&&(u='<i class="fas fa-arrow-left"></i>'),"→"===u&&(u='<i class="fas fa-arrow-right"></i>')):"\t"===u?(d="tabChar",u='<i class="fas fa-long-arrow-alt-right"></i>'):"\n"===u&&(c="nlChar",u='<i class="fas fa-angle-down"></i>'),!(b.trailingComposeChars.test(t)&&o>t.search(b.trailingComposeChars)))if(i)a+=`<letter class="${"word"==l.default.highlightMode?r:s} ${d}${c}">${u}</letter>`;else if(void 0!==u&&b.trailingComposeChars.test(t)&&o===t.search(b.trailingComposeChars))a+=`<letter class="${"word"==l.default.highlightMode?r:""} dead">${u}</letter>`;else if(e)if(void 0===u){if(!l.default.hideExtraLetters){let e=t[o];" "!=e&&"\t"!=e&&"\n"!=e||(e="_"),a+=`<letter class="${"word"==l.default.highlightMode?r:"incorrect"} extra ${d}${c}">${e}</letter>`}}else a+=`<letter class="${"word"==l.default.highlightMode?r:"incorrect"} ${d}${c}">`+("replace"===l.default.indicateTypos?" "==t[o]?"_":t[o]:u)+("below"===l.default.indicateTypos?`<hint>${t[o]}</hint>`:"")+"</letter>";else void 0!==u&&(a+=`<letter class="${"word"==l.default.highlightMode?r:s} ${d}${c}">${u}</letter>`)}const u=b.trailingComposeChars.test(t)?t.search(b.trailingComposeChars)+1:t.length;if(u<n.length)for(let e=u;e<n.length;e++)"arrows"===l.default.funbox?("↑"===n[e]&&(a+='<letter><i class="fas fa-arrow-up"></i></letter>'),"↓"===n[e]&&(a+='<letter><i class="fas fa-arrow-down"></i></letter>'),"←"===n[e]&&(a+='<letter><i class="fas fa-arrow-left"></i></letter>'),"→"===n[e]&&(a+='<letter><i class="fas fa-arrow-right"></i></letter>')):"\t"===n[e]?a+="<letter class='tabChar'><i class=\"fas fa-long-arrow-alt-right\"></i></letter>":"\n"===n[e]?a+="<letter class='nlChar'><i class=\"fas fa-angle-down\"></i></letter>":a+=`<letter class="${"word"==l.default.highlightMode?r:""}">`+n[e]+"</letter>";"letter"===l.default.highlightMode&&l.default.hideExtraLetters&&(t.length>n.length&&!l.default.blindMode?$(o).addClass("error"):t.length==n.length&&$(o).removeClass("error"))}o.innerHTML=a,i&&$("#words").append("<div class='newline'></div>")}function W(){t.resultVisible&&($("#resultWordsHistory").stop(!0,!0).hasClass("hidden")?$("#showWordHistoryButton").hasClass("loaded")?(l.default.burstHeatmap&&E(),$("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(250)):($("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),function(){return s(this,void 0,void 0,(function*(){$("#resultWordsHistory .words").empty();let e="";for(let t=0;t<m.input.history.length+2;t++){const o=m.input.getHistory(t),n=f.words.get(t);let a="";try{if(""===o)throw new Error("empty input word");if(a=void 0!==m.corrected.getHistory(t)&&""!==m.corrected.getHistory(t)?`<div class='word' burst="${m.burstHistory[t]}" input="${m.corrected.getHistory(t).replace(/"/g,"&quot;").replace(/ /g,"_")}">`:`<div class='word' burst="${m.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`,t===m.input.history.length-1){const e={correct:0,incorrect:0,missed:0},i="zen"==l.default.mode?o.length:n.length;for(let t=0;t<i;t++)t<o.length?"zen"==l.default.mode||o[t]==n[t]?e.correct++:e.incorrect++:e.missed++;0===e.incorrect&&"time"===l.default.mode||"zen"!=l.default.mode&&o!==n&&(a=`<div class='word error' burst="${m.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`)}else"zen"!=l.default.mode&&o!==n&&(a=`<div class='word error' burst="${m.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`);let e;e="zen"==l.default.mode||o.length>n.length?o.length:n.length;for(let i=0;i<e;i++){let s;try{s=m.corrected.getHistory(t)[i]}catch(e){s=void 0}let r="";i+1===e&&void 0!==m.corrected.getHistory(t)&&m.corrected.getHistory(t).length>o.length&&(r="extraCorrected"),"zen"==l.default.mode||void 0!==n[i]?"zen"==l.default.mode||o[i]===n[i]?s===o[i]||void 0===s?a+=`<letter class="correct ${r}">${o[i]}</letter>`:a+=`<letter class="corrected ${r}">`+o[i]+"</letter>":o[i]===m.input.current?a+=`<letter class='correct ${r}'>`+n[i]+"</letter>":void 0===o[i]?a+="<letter>"+n[i]+"</letter>":a+=`<letter class="incorrect ${r}">`+n[i]+"</letter>":a+='<letter class="incorrect extra">'+o[i]+"</letter>"}a+="</div>"}catch(e){try{a="<div class='word'>";for(let e=0;e<n.length;e++)a+="<letter>"+n[e]+"</letter>";a+="</div>"}catch(e){}}e+=a}return $("#resultWordsHistory .words").html(e),$("#showWordHistoryButton").addClass("loaded"),!0}))}().then((()=>{l.default.burstHeatmap&&E(),$("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(250,(()=>{l.default.burstHeatmap&&E()}))}))):$("#resultWordsHistory").slideUp(250,(()=>{$("#resultWordsHistory").addClass("hidden")})))}function E(){var e,t;if(l.default.burstHeatmap){$("#resultWordsHistory .heatmapLegend").removeClass("hidden");let o=[...m.burstHistory];o=o.filter((e=>e!==1/0)),o=o.filter((e=>e<350)),(null===(e=m.input.getHistory(m.input.getHistory().length-1))||void 0===e?void 0:e.length)!==(null===(t=f.words.getCurrent())||void 0===t?void 0:t.length)&&(o=o.splice(0,o.length-1));const n=b.median(o),a=[];o.forEach((e=>{a.push(Math.abs(n-e))}));const i=b.mean(a),s=[{val:0,class:"heatmap-0"},{val:n-1.5*i,class:"heatmap-1"},{val:n-.5*i,class:"heatmap-2"},{val:n+.5*i,class:"heatmap-3"},{val:n+1.5*i,class:"heatmap-4"}];$("#resultWordsHistory .words .word").each(((e,t)=>{const o=parseInt($(t).attr("burst"));let n="";s.forEach((e=>{o>e.val&&(n=e.class)})),$(t).addClass(n)}))}else $("#resultWordsHistory .heatmapLegend").addClass("hidden"),$("#resultWordsHistory .words .word").removeClass("heatmap-0"),$("#resultWordsHistory .words .word").removeClass("heatmap-1"),$("#resultWordsHistory .words .word").removeClass("heatmap-2"),$("#resultWordsHistory .words .word").removeClass("heatmap-3"),$("#resultWordsHistory .words .word").removeClass("heatmap-4")}C.subscribe(((e,t)=>{void 0!==t&&"boolean"==typeof t&&("flipTestColors"===e&&P(t),"colorfulMode"===e&&O(t),"highlightMode"===e&&A(t),"burstHeatmap"===e&&E())})),t.currentWordElementIndex=0,t.resultVisible=!1,t.activeWordTop=0,t.testRestarting=!1,t.lineTransition=!1,t.currentTestLine=0,t.resultCalculating=!1,t.setResultVisible=function(e){t.resultVisible=e},t.setCurrentWordElementIndex=function(e){t.currentWordElementIndex=e},t.setActiveWordTop=function(e){t.activeWordTop=e},t.setTestRestarting=function(e){t.testRestarting=e,!0===e?t.testRestartingPromise=new Promise((e=>{x=e})):(x&&x(),x=null)},t.setResultCalculating=function(e){t.resultCalculating=e},t.reset=function(){t.currentTestLine=0,t.currentWordElementIndex=0},t.focusWords=T,t.updateActiveElement=k,t.showWords=function(){$("#words").empty();let e="";if("zen"!==l.default.mode)for(let t=0;t<f.words.length;t++)e+=M(f.words.get(t));else e='<div class="word">word height</div><div class="word active"></div>';$("#words").html(e),$("#wordsWrapper").removeClass("hidden");const t=$(document.querySelector(".word")).outerHeight(!0),o=$(document.querySelector("#words")).outerHeight(!0);if(!l.default.showAllLines||"time"==l.default.mode||h.isWordRandom&&0==h.word||h.isTimeRandom)$("#words").css("height",4*t+"px").css("overflow","hidden"),$("#wordsWrapper").css("height",3*t+"px").css("overflow","hidden"),$(".outOfFocusWarning").css("line-height",3*t+"px");else{$("#words").css("height","auto"),$("#wordsWrapper").css("height","auto");let e=3*t;e>o&&(e=o),$(".outOfFocusWarning").css("line-height",e+"px")}"zen"===l.default.mode&&$(document.querySelector(".word")).remove(),k(),g.updatePosition()},t.addWord=function(e){$("#words").append(M(e))},t.flipColors=P,t.colorful=O,t.screenshot=L,t.updateWordElement=A,t.lineJump=function(e){var o;if(t.currentTestLine>0){const n=e,a=[],i=$("#words .word");for(let e=0;e<t.currentWordElementIndex;e++)$(i[e]).hasClass("hidden")||Math.floor(i[e].offsetTop)<n-10&&a.push($($("#words .word")[e]));const s=$(document.querySelector(".word")).outerHeight(!0);l.default.smoothLineScroll&&a.length>0?(t.lineTransition=!0,$("#words").prepend(`<div class="smoothScroller" style="position: fixed;height:${s}px;width:100%"></div>`),$("#words .smoothScroller").animate({height:0},w.get()?0:125,(()=>{$("#words .smoothScroller").remove()})),$("#paceCaret").animate({top:(null===(o=document.querySelector("#paceCaret"))||void 0===o?void 0:o.offsetTop)-s},w.get()?0:125),$("#words").animate({marginTop:`-${s}px`},w.get()?0:125,(()=>{t.activeWordTop=document.querySelector("#words .active").offsetTop,t.currentWordElementIndex-=a.length,t.lineTransition=!1,a.forEach((e=>e.remove())),$("#words").css("marginTop","0")}))):(a.forEach((e=>e.remove())),t.currentWordElementIndex-=a.length,$("#paceCaret").css({top:document.querySelector("#paceCaret").offsetTop-s}))}t.currentTestLine++},t.arrangeCharactersRightToLeft=function(){$("#words").addClass("rightToLeftTest"),$("#resultWordsHistory .words").addClass("rightToLeftTest"),$("#resultReplay .words").addClass("rightToLeftTest")},t.arrangeCharactersLeftToRight=function(){$("#words").removeClass("rightToLeftTest"),$("#resultWordsHistory .words").removeClass("rightToLeftTest"),$("#resultReplay .words").removeClass("rightToLeftTest")},t.toggleResultWords=W,t.applyBurstHeatmap=E,t.highlightBadWord=function(e,t){t&&$($("#words .word")[e]).addClass("error")},$(document.body).on("click","#saveScreenshotButton",(()=>{L()})),$(document).on("click","#testModesNotice .text-button.blind",(()=>{c.setBlindMode(!l.default.blindMode)})),$(".pageTest #copyWordsListButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){try{let e;e="zen"==l.default.mode?m.input.history.join(" "):f.words.get().slice(0,m.input.history.length).join(" "),yield navigator.clipboard.writeText(e),u.add("Copied to clipboard",0,2)}catch(e){u.add("Could not copy to clipboard: "+e,-1)}})))),$(".pageTest #toggleBurstHeatmap").on("click",(()=>s(void 0,void 0,void 0,(function*(){c.setBurstHeatmap(!l.default.burstHeatmap)})))),$(document).on("mouseleave","#resultWordsHistory .words .word",(()=>{$(".wordInputAfter").remove()})),$("#wpmChart").on("mouseleave",(()=>{$(".wordInputAfter").remove()})),$(document).on("mouseenter","#resultWordsHistory .words .word",(e=>{if(t.resultVisible){const t=$(e.currentTarget).attr("input"),o=parseInt($(e.currentTarget).attr("burst"));null!=t&&$(e.currentTarget).append(`<div class="wordInputAfter">\n          <div class="text">\n          ${t.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}\n          </div>\n          <div class="speed">\n          ${Math.round(l.default.alwaysShowCPM?5*o:o)}${l.default.alwaysShowCPM?"cpm":"wpm"}\n          </div>\n          </div>`)}})),$("#wordsInput").on("focus",(()=>{!t.resultVisible&&l.default.showOutOfFocusWarning&&y.hide(),g.show()})),$("#wordsInput").on("focusout",(()=>{!t.resultVisible&&l.default.showOutOfFocusWarning&&y.show(),g.hide()})),$(document).on("keypress","#showWordHistoryButton",(e=>{"Enter"===e.key&&W()})),$(document.body).on("click","#showWordHistoryButton",(()=>{W()})),$("#wordsWrapper").on("click",(()=>{T()}))},6983:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setHasTab=t.setRandomQuote=t.randomQuote=t.hasTab=t.words=void 0,t.words=new class{constructor(){this.list=[],this.length=0,this.currentIndex=0}get(e,t=!1){var o,n;return void 0===e?this.list:t?null===(n=null===(o=this.list[e])||void 0===o?void 0:o.replace(/[.?!":\-,]/g,""))||void 0===n?void 0:n.toLowerCase():this.list[e]}getCurrent(){return this.list[this.currentIndex]}getLast(){return this.list[this.list.length-1]}push(e){this.list.push(e),this.length=this.list.length}reset(){this.list=[],this.currentIndex=0,this.length=this.list.length}resetCurrentIndex(){this.currentIndex=0}decreaseCurrentIndex(){this.currentIndex--}increaseCurrentIndex(){this.currentIndex++}clean(){for(const e of this.list)if(/ +/.test(e)){const t=this.list.indexOf(e),o=e.split(" ");this.list.splice(t,1);for(let e=0;e<o.length;e++)this.list.splice(t+e,0,o[e])}}},t.hasTab=!1,t.randomQuote=null,t.setRandomQuote=function(e){t.randomQuote=e},t.setHasTab=function(e){t.hasTab=e}},1022:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateStyle=t.update=t.restart=t.hide=t.show=void 0;const r=s(o(2426)),u=i(o(8844)),d=i(o(5021)),l=i(o(6983)),c=i(o(6110)),p=i(o(1306)),f=i(o(1119)),m=i(o(940)),h=i(o(9073));function g(){const e=r.default.showTimerProgress?r.default.timerOpacity:0;"zen"!=r.default.mode&&"bar"===r.default.timerStyle?$("#timerWrapper").stop(!0,!0).removeClass("hidden").animate({opacity:e},125):"text"===r.default.timerStyle?$("#timerNumber").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:e},125):"zen"!=r.default.mode&&"mini"!==r.default.timerStyle||e>0&&$("#miniTimerAndLiveWpm .time").stop(!0,!0).removeClass("hidden").animate({opacity:e},125)}function y(){$("#timerWrapper").stop(!0,!0).animate({opacity:0},125),$("#miniTimerAndLiveWpm .time").stop(!0,!0).animate({opacity:0},125,(()=>{$("#miniTimerAndLiveWpm .time").addClass("hidden")})),$("#timerNumber").stop(!0,!0).animate({opacity:0},125)}t.show=g,t.hide=y,t.restart=function(){"bar"===r.default.timerStyle&&("time"===r.default.mode?$("#timer").stop(!0,!0).animate({width:"100vw"},0):"words"!==r.default.mode&&"custom"!==r.default.mode||$("#timer").stop(!0,!0).animate({width:"0vw"},0))};const v=document.querySelector("#timerNumber"),b=document.querySelector("#miniTimerAndLiveWpm .time");function w(){var e,t,o;const n=p.get();if("time"===r.default.mode||"custom"===r.default.mode&&u.isTimeRandom){let e=r.default.time;if("custom"===r.default.mode&&u.isTimeRandom&&(e=u.time),"bar"===r.default.timerStyle){const t=100-(n+1)/e*100;$("#timer").stop(!0,!0).animate({width:t+"vw"},f.get()?0:1e3,"linear")}else if("text"===r.default.timerStyle){let t=d.secondsToString(e-n);0===e&&(t=d.secondsToString(n)),null!==v&&(v.innerHTML="<div>"+t+"</div>")}else if("mini"===r.default.timerStyle){let t=d.secondsToString(e-n);0===e&&(t=d.secondsToString(n)),null!==b&&(b.innerHTML=t)}}else if("words"===r.default.mode||"custom"===r.default.mode||"quote"===r.default.mode){let n=l.words.length;if("words"===r.default.mode&&(n=r.default.words),"custom"===r.default.mode&&(n=u.isWordRandom?u.word:u.text.length),"quote"===r.default.mode&&(n=null!==(o=null===(t=null===(e=l.randomQuote)||void 0===e?void 0:e.textSplit)||void 0===t?void 0:t.length)&&void 0!==o?o:1),"bar"===r.default.timerStyle){const e=Math.floor((l.words.currentIndex+1)/n*100);$("#timer").stop(!0,!0).animate({width:e+"vw"},f.get()?0:250)}else"text"===r.default.timerStyle?0===n?null!==v&&(v.innerHTML=`<div>${c.input.history.length}</div>`):null!==v&&(v.innerHTML=`<div>${c.input.history.length}/${n}</div>`):"mini"===r.default.timerStyle&&(0===r.default.words?null!==b&&(b.innerHTML=`${c.input.history.length}`):null!==b&&(b.innerHTML=`${c.input.history.length}/${n}`))}else"zen"==r.default.mode&&("text"===r.default.timerStyle?null!==v&&(v.innerHTML=`<div>${c.input.history.length}</div>`):null!==b&&(b.innerHTML=`${c.input.history.length}`))}function C(){m.get()&&(y(),w(),setTimeout((()=>{g()}),125))}t.update=w,t.updateStyle=C,h.subscribe(((e,t)=>{"showTimerProgress"===e&&(!0===t&&m.get()?g():y()),"timerStyle"===e&&C()}))},5899:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addAllFromToday=t.getString=t.addSeconds=void 0;const s=i(o(5021)),r=i(o(2541));let u,d=0,l=!1;t.addSeconds=function(e){l&&(new Date).getDate()>u?d=e:d+=e},t.getString=function(){return s.secondsToString(Math.round(d),!0,!0)+(!0===l?" today":" session")},t.addAllFromToday=function(){const e=new Date;e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setMilliseconds(0),u=e.getDate();const t=e.getTime();d=0;const o=r.getSnapshot().results;null==o||o.forEach((e=>{const o=new Date(e.timestamp);o.setSeconds(0),o.setMinutes(0),o.setHours(0),o.setMilliseconds(0),o.getTime()>=t&&(d+=e.testDuration+e.incompleteTestSeconds-e.afkDuration)})),l=!0}},8913:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.speak=t.clear=t.init=t.setLanguage=void 0;const u=r(o(2426)),d=i(o(5021)),l=i(o(9073));let c;function p(e=u.default.language){return s(this,void 0,void 0,(function*(){if(!c)return;const t=yield d.getLanguage(e),o=t.bcp47?t.bcp47:"en-US";c.lang=o}))}function f(){return s(this,void 0,void 0,(function*(){c=new SpeechSynthesisUtterance,p()}))}function m(){c=void 0}t.setLanguage=p,t.init=f,t.clear=m,t.speak=function(e){window.speechSynthesis.cancel(),void 0===c&&f(),void 0!==c&&(c.text=e,window.speechSynthesis.speak(c))},l.subscribe(((e,t)=>{"funbox"===e&&("none"===t?m():"tts"===t&&f()),"language"===e&&"tts"===u.default.funbox&&p()}))},3053:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getWord=t.updateScore=void 0;const s=i(o(6110)),r={};class u{constructor(){this.average=0,this.count=0}update(e){this.count<50&&this.count++;const t=1/this.count;this.average=e*t+this.average*(1-t)}}function d(e){let t=0,o=0;for(const n of e)n in r&&(t+=r[n].average,o++);return 0==o?0:t/o}t.updateScore=function(e,t){const o=s.keypressTimings.spacing.array;if(0===o.length||"string"==typeof o)return;let n=o[o.length-1];t||(n+=5e3),e in r||(r[e]=new u),r[e].update(n)},t.getWord=function(e){let t,o="";for(let n=0;n<20;n++){const a=e.randomWord(),i=d(a);(0==n||void 0===t||i>t)&&(o=a,t=i)}return o}},335:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getSection=t.getTLD=t.Section=void 0;const r=i(o(8308)),u=i(o(5021));class d{constructor(e,t,o){this.title=e,this.author=t,this.words=o}}function l(e){return s(this,void 0,void 0,(function*(){switch(e.name){case"english":default:return"en";case"spanish":return"es";case"french":return"fr";case"german":return"de";case"portuguese":return"pt";case"italian":return"it";case"dutch":return"nl"}}))}t.Section=d,t.getTLD=l,t.getSection=function(e){return s(this,void 0,void 0,(function*(){r.show();let t="en";const o=yield u.findCurrentGroup(e);void 0!==o&&(t=yield l(o));const n=`https://${t}.wikipedia.org/api/rest_v1/page/random/summary`,a={title:"",author:""},i=yield fetch(n);let s=0;if(200==i.status){const e=yield i.json();a.title=e.title,a.author=e.author,s=e.pageid}return new Promise(((e,o)=>{200!=i.status&&(r.hide(),o(i.status));const n=`https://${t}.wikipedia.org/w/api.php?action=query&format=json&pageids=${s}&prop=extracts&exintro=true&origin=*`,u=new XMLHttpRequest;u.onload=()=>{if(4==u.readyState)if(200==u.status){let t=JSON.parse(u.responseText).query.pages[s.toString()].extract;const o=[];t=t.replace(/<\/p><p>+/g," "),t=$("<div/>").html(t).text(),t=t.replace(/\s+/g," "),t=t.trim(),t.split(" ").forEach((e=>{o.push(e)}));const n=new d(a.title,a.author,o);r.hide(),e(n)}else r.hide(),o(u.status)},u.open("GET",n),u.send()}))}))}},5003:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.withWords=t.Wordset=void 0;const n=o(5021);let a=null,i=null;class s{constructor(e){this.words=e,this.length=this.words.length}randomWord(){return(0,n.randomElementFromArray)(this.words)}}t.Wordset=s;class r{constructor(){this.chars={},this.count=0}addChar(e){this.count++,e in this.chars?this.chars[e]++:this.chars[e]=1}randomChar(){const e=(0,n.randomIntFromRange)(0,this.count-1);let t=0;for(const[o,n]of Object.entries(this.chars))if(t+=n,t>e)return o;return Object.keys(this.chars)[0]}}class u extends s{constructor(e){super(e),this.ngrams={},this.length=1/0;for(let t of e){t+=" ";let e="";for(const o of t)e in this.ngrams||(this.ngrams[e]=new r),this.ngrams[e].addChar(o),e=(e+o).substr(-2)}}randomWord(){let e="";for(;;){const t=e.substr(-2),o=this.ngrams[t];if(!o){e="";continue}const n=o.randomChar();if(" "==n)break;e+=n}return e}}t.withWords=function(e,t){return"pseudolang"==t?(null!=i&&e===i.words||(i=new u(e)),i):(null!=a&&e===a.words||(a=new s(e)),a)}},4467:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateKeytips=void 0;const r=s(o(2426)),u=i(o(3212)),d=i(o(6030)),l=i(o(8844)),c=i(o(940)),p=i(o(9073));function f(){r.default.swapEscAndTab?($(".pageSettings .tip").html("\n    tip: You can also change all these settings quickly using the\n    command line (\n    <key>tab</key>\n    )"),$("#bottom .keyTips").html("\n    <key>esc</key> - restart test<br>\n      <key>tab</key> - command line")):($(".pageSettings .tip").html("\n    tip: You can also change all these settings quickly using the\n    command line (\n    <key>esc</key>\n    )"),$("#bottom .keyTips").html("\n    <key>tab</key> - restart test<br>\n      <key>esc</key> or <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key> - command line"))}t.updateKeytips=f,"localhost"===window.location.hostname&&(window.onerror=function(e){d.add(e.toString(),-1)},$("#top .logo .top").text("localhost"),$("head title").text($("head title").text()+" (localhost)"),$("body").append('<div class="devIndicator tl">local</div><div class="devIndicator br">local</div>'),$(".pageSettings .discordIntegration .buttons a").attr("href","https://discord.com/api/oauth2/authorize?client_id=798272335035498557&redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Fverify&response_type=token&scope=identify")),window.addEventListener("keydown",(function(e){"Space"===e.code&&e.target===document.body&&e.preventDefault()})),window.addEventListener("beforeunload",(e=>{"words"===r.default.mode&&r.default.words<1e3||"time"===r.default.mode&&r.default.time<3600||"quote"===r.default.mode||"custom"===r.default.mode&&l.isWordRandom&&l.word<1e3||"custom"===r.default.mode&&l.isTimeRandom&&l.time<1e3||"custom"===r.default.mode&&!l.isWordRandom&&l.text.length<1e3||c.get()&&(e.preventDefault(),e.returnValue="")})),$(window).on("resize",(()=>{console.log("Updating caret position"),u.updatePosition()})),p.subscribe((e=>{"swapEscAndTab"===e&&f()}))},2731:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t=250){let o;return function(...n){clearTimeout(o),o=setTimeout((()=>e.apply(this,n)),t)}}},5021:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function r(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}u((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.regexIndexOf=t.setCharAt=t.clearTimeouts=t.canQuickRestart=t.mapRange=t.isUsernameValid=t.cleanTypographySymbols=t.escapeRegExp=t.remove_non_ascii=t.getWords=t.toggleFullscreen=t.objectToQueryString=t.findGetParameter=t.getPositionString=t.getArrows=t.getASCII=t.getSpecials=t.getNumbers=t.secondsToString=t.getGibberish=t.findLineByLeastSquares=t.roundTo2=t.whorf=t.kogasa=t.isASCIILetter=t.capitalizeFirstLetterOfEachWord=t.getLastChar=t.getReleasesFromGitHub=t.median=t.mean=t.stdDev=t.smooth=t.getChallengeList=t.findCurrentGroup=t.getCurrentLanguage=t.getLanguage=t.getLanguageGroups=t.getLanguageList=t.getContributorsList=t.getSupportersList=t.getFontsList=t.getLayout=t.getLayoutsList=t.getFunbox=t.getFunboxList=t.getSortedThemesList=t.getThemesList=t.isColorDark=t.isColorLight=t.getuid=void 0,t.createErrorMessage=t.randomElementFromObject=t.randomElementFromArray=t.shuffle=t.randomIntFromRange=t.downloadResultsCSV=t.getMode2=t.swapElements=t.convertRemToPixels=t.trailingComposeChars=t.convertRGBtoHEX=void 0;const u=i(o(8308)),d=r(o(9546)),l=o(9280);function c(e){let t,o,n;4==e.length?(t="0x"+e[1]+e[1],o="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length?(t="0x"+e[1]+e[2],o="0x"+e[3]+e[4],n="0x"+e[5]+e[6]):(t=0,o=0,n=0),t/=255,o/=255,n/=255;const a=Math.min(t,o,n),i=Math.max(t,o,n),s=i-a;let r=0,u=0,d=0;return r=0==s?0:i==t?(o-n)/s%6:i==o?(n-t)/s+2:(t-o)/s+4,r=Math.round(60*r),r<0&&(r+=360),d=(i+a)/2,u=0==s?0:s/(1-Math.abs(2*d-1)),u=+(100*u).toFixed(1),d=+(100*d).toFixed(1),{hue:r,sat:u,lgt:d,string:"hsl("+r+","+u+"%,"+d+"%)"}}t.getuid=function(){var e;console.error("Only share this uid with Miodec and nobody else!"),console.log(null===(e=l.Auth.currentUser)||void 0===e?void 0:e.uid),console.error("Only share this uid with Miodec and nobody else!")},t.isColorLight=function(e){return c(e).lgt>=50},t.isColorDark=function(e){return c(e).lgt<50};let p=[];function f(){return s(this,void 0,void 0,(function*(){return 0==p.length?$.getJSON("themes/_list.json",(function(e){const t=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0}));return p=t,p})):p}))}t.getThemesList=f;let m=[];t.getSortedThemesList=function(){return s(this,void 0,void 0,(function*(){if(0===m.length){0===p.length&&(yield f());let e=[...p];return e=e.sort(((e,t)=>{const o=c(e.bgColor);return c(t.bgColor).lgt-o.lgt})),m=e,m}return m}))};let h=[];function g(){return s(this,void 0,void 0,(function*(){return 0===h.length?$.getJSON("funbox/_list.json",(function(e){return h=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),h})):h}))}t.getFunboxList=g,t.getFunbox=function(e){return s(this,void 0,void 0,(function*(){return(yield g()).find((function(t){return t.name==e}))}))};let y={};function v(){return s(this,void 0,void 0,(function*(){return 0===Object.keys(y).length?$.getJSON("layouts/_list.json",(function(e){return y=e,y})):y}))}t.getLayoutsList=v,t.getLayout=function(e){return s(this,void 0,void 0,(function*(){return 0===Object.keys(y).length&&(yield v()),y[e]}))};let b=[];t.getFontsList=function(){return s(this,void 0,void 0,(function*(){return 0===b.length?$.getJSON("fonts/_list.json",(function(e){return b=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),b})):b}))};let w=[];t.getSupportersList=function(){return s(this,void 0,void 0,(function*(){return 0===w.length?$.getJSON("about/supporters.json",(function(e){return w=e,w})):w}))};let C=[];t.getContributorsList=function(){return s(this,void 0,void 0,(function*(){return 0===C.length?$.getJSON("about/contributors.json",(function(e){return C=e,C})):C}))};let S=[];t.getLanguageList=function(){return s(this,void 0,void 0,(function*(){return 0===S.length?$.getJSON("languages/_list.json",(function(e){return S=e,S})):S}))};let _,x=[];function T(){return s(this,void 0,void 0,(function*(){return 0===x.length?$.getJSON("languages/_groups.json",(function(e){return x=e,x})):x}))}function k(e){return s(this,void 0,void 0,(function*(){try{return null!=_&&_.name===e||(console.log("getting language json"),yield $.getJSON(`languages/${e}.json`,(function(e){_=e}))),_}catch(e){return console.error("error getting language"),console.error(e),yield $.getJSON("languages/english.json",(function(e){_=e})),_}}))}t.getLanguageGroups=T,t.getLanguage=k,t.getCurrentLanguage=function(e){return s(this,void 0,void 0,(function*(){return yield k(e)}))},t.findCurrentGroup=function(e){return s(this,void 0,void 0,(function*(){let t;return(yield T()).forEach((o=>{void 0===t&&o.languages.includes(e)&&(t=o)})),t}))};let M=[];function P(e){return Math.round(100*(e+Number.EPSILON))/100}function O(e,t){const o=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-o+1)+o)}function L(e){return e[O(0,e.length-1)]}t.getChallengeList=function(){return s(this,void 0,void 0,(function*(){return 0===M.length?$.getJSON("challenges/_list.json",(function(e){return M=e,M})):M}))},t.smooth=function(e,t,o=(e=>e)){const n=o,a=[];for(let o=0;o<e.length;o+=1){const i=o-t,s=o+t+1;let r=0,u=0;for(let t=i>=0?i:0;t<s&&t<e.length;t+=1)u+=n(e[t]),r+=1;a[o]=u/r}return a},t.stdDev=function(e){try{const t=e.length,o=e.reduce(((e,t)=>e+t))/t;return Math.sqrt(e.map((e=>Math.pow(e-o,2))).reduce(((e,t)=>e+t))/t)}catch(e){return 0}},t.mean=function(e){try{return e.reduce(((e,t)=>t+e))/e.length}catch(e){return 0}},t.median=function(e){try{const t=Math.floor(e.length/2),o=[...e].sort(((e,t)=>e-t));return e.length%2!=0?o[t]:(o[t-1]+o[t])/2}catch(e){return 0}},t.getReleasesFromGitHub=function(){return s(this,void 0,void 0,(function*(){return $.getJSON("https://api.github.com/repos/Miodec/monkeytype/releases",(e=>{$("#bottom .version .text").text(e[0].name),$("#bottom .version").css("opacity",1),$("#versionHistory .releases").empty(),e.forEach((e=>{e.draft||e.prerelease||$("#versionHistory .releases").append(`\n          <div class="release">\n            <div class="title">${e.name}</div>\n            <div class="date">${(0,d.default)(new Date(e.published_at),"dd MMM yyyy")}</div>\n            <div class="body">${e.body.replace(/\r\n/g,"<br>")}</div>\n          </div>\n        `)}))}))}))},t.getLastChar=function(e){try{return e.charAt(e.length-1)}catch(e){return""}},t.capitalizeFirstLetterOfEachWord=function(e){return e.split(/ +/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},t.isASCIILetter=function(e){return 1===e.length&&/[a-z]/i.test(e)},t.kogasa=function(e){return 100*(1-Math.tanh(e+Math.pow(e,3)/3+Math.pow(e,5)/5))},t.whorf=function(e,t){return Math.min(e,Math.floor(e*Math.pow(1.03,-2*(t-3))))},t.roundTo2=P,t.findLineByLeastSquares=function(e){let t=0,o=0,n=0,a=0,i=0,s=0,r=0;const u=e.length;if(0===u)return[[],[]];for(let d=0;d<u;d++)s=d+1,r=e[d],t+=s,o+=r,a+=s*s,n+=s*r,i++;const d=(i*n-t*o)/(i*a-t*t),l=o/i-d*t/i;return[[1,1*d+l],[u,u*d+l]]},t.getGibberish=function(){const e=O(1,7);let t="";for(let o=0;o<e;o++)t+=String.fromCharCode(97+O(0,25));return t},t.secondsToString=function(e,t=!1,o=!1){const n=Math.floor(e/3600),a=Math.floor(e%3600/60),i=P(e%3600%60);let s,r,u;s=n<10?"0"+n:n,r=a<10?"0"+a:a,u=i<10&&(a>0||n>0||t)?"0"+i:i;let d="";return(n>0||o)&&(d+=s+":"),(a>0||n>0||t)&&(d+=r+":"),d+=u,d},t.getNumbers=function(e){const t=O(1,e);let o="";for(let e=0;e<t;e++)o+=O(0,9).toString();return o},t.getSpecials=function(){const e=O(1,7);let t="";const o=["!","@","#","$","%","^","&","*","(",")","-","_","=","+","{","}","[","]","'",'"',"/","\\","|"];for(let n=0;n<e;n++)t+=L(o);return t},t.getASCII=function(){const e=O(1,10);let t="";for(let o=0;o<e;o++){let e=33+O(0,93);for(;96==e||94==e;)e=33+O(0,93);t+=String.fromCharCode(e)}return t},t.getArrows=function(){const e=["←","↑","→","↓"];let t,o="";for(let n=0;n<5;n++){let n=L(e);for(;n===t;)n=L(e);t=n,o+=n}return o},t.getPositionString=function(e){let t="th";const o=e%10,n=e%100;return 1==o&&11!=n&&(t="st"),2==o&&12!=n&&(t="nd"),3==o&&13!=n&&(t="rd"),e+t},t.findGetParameter=function(e){let t=null,o=[];return location.search.substr(1).split("&").forEach((function(n){o=n.split("="),o[0]===e&&(t=decodeURIComponent(o[1]))})),t},t.objectToQueryString=function(e){const t=[];for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},t.toggleFullscreen=function(){const e=document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},t.getWords=function(){return[...document.querySelectorAll("#words .word")].map((e=>[...e.querySelectorAll("letter")].map((e=>e.textContent)).join(""))).join(" ")},t.remove_non_ascii=function(e){return null===e||""===e?"":(e=e.toString()).replace(/[^\x20-\x7E]/g,"")},t.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},t.cleanTypographySymbols=function(e){const t={"“":'"',"”":'"',"’":"'","‘":"'",",":",","—":"-","…":"...","«":"<<","»":">>","–":"-"," ":" "," ":" "," ":" "};return e.replace(/[“”’‘—,…«»–\u2007\u202F\u00A0]/g,(e=>t[e]||""))},t.isUsernameValid=function(e){return null!=e&&""!==e&&!/miodec/.test(e.toLowerCase())&&!/bitly/.test(e.toLowerCase())&&!(e.length>14)&&!/^\..*/.test(e.toLowerCase())&&/^[0-9a-zA-Z_.-]+$/.test(e)},t.mapRange=function(e,t,o,n,a){let i=(e-t)*(a-n)/(o-t)+n;return n>a?i>n?i=n:i<a&&(i=a):i<n?i=n:i>a&&(i=a),i},t.canQuickRestart=function(e,t,o,n){return!!("words"===e&&t<1e3||"time"===e&&o<3600||"quote"===e||"custom"===e&&n.isWordRandom&&n.word<1e3||"custom"===e&&n.isTimeRandom&&n.time<3600||"custom"===e&&!n.isWordRandom&&n.text.length<1e3)},t.clearTimeouts=function(e){e.forEach((e=>{clearTimeout(e)}))},t.setCharAt=function(e,t,o){return t>e.length-1?e:e.substring(0,t)+o+e.substring(t+1)},t.regexIndexOf=function(e,t,o){const n=e.substring(o||0).search(t);return n>=0?n+(o||0):n},t.convertRGBtoHEX=function(e){const t=e.match(/^rgb\((\d+), \s*(\d+), \s*(\d+)\)$/);if(null!==t&&!(t.length<3))return"#"+o(t[1])+o(t[2])+o(t[3]);function o(e){return("0"+parseInt(e).toString(16)).slice(-2)}},String.prototype.lastIndexOfRegex=function(e){const t=this.match(e);return t?this.lastIndexOf(t[t.length-1]):-1},t.trailingComposeChars=/[\u02B0-\u02FF`´^¨~]+$|⎄.*$/,t.convertRemToPixels=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},t.swapElements=function(e,t,o,n=function(){},a=function(){}){if(e.hasClass("hidden")&&!t.hasClass("hidden")||!e.hasClass("hidden")&&t.hasClass("hidden")){if(e.hasClass("hidden"))return n(),!1;$(e).removeClass("hidden").css("opacity",1).animate({opacity:0},o/2,(()=>{a(),$(e).addClass("hidden"),$(t).removeClass("hidden").css("opacity",0).animate({opacity:1},o/2,(()=>{n()}))}))}else e.hasClass("hidden")&&t.hasClass("hidden")?$(t).removeClass("hidden").css("opacity",0).animate({opacity:1},o,(()=>{n()})):n()},t.getMode2=function(e,t){const o=e.mode;return"time"===o?e.time.toString():"words"===o?e.words.toString():"custom"===o?"custom":"zen"===o?"zen":"quote"===o?t.id.toString():""},t.downloadResultsCSV=function(e){return s(this,void 0,void 0,(function*(){u.show();const t=[["_id","isPb","wpm","acc","rawWpm","consistency","charStats","mode","mode2","quoteLength","restartCount","testDuration","afkDuration","incompleteTestSeconds","punctuation","numbers","language","funbox","difficulty","lazyMode","blindMode","bailedOut","tags","timestamp"],...e.map((e=>[e._id,e.isPb,e.wpm,e.acc,e.rawWpm,e.consistency,e.charStats.join(","),e.mode,e.mode2,e.quoteLength,e.restartCount,e.testDuration,e.afkDuration,e.incompleteTestSeconds,e.punctuation,e.numbers,e.language,e.funbox,e.difficulty,e.lazyMode,e.blindMode,e.bailedOut,e.tags.join(","),e.timestamp]))].map((e=>e.join("|"))).join("\n"),o=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(o),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download","results.csv"),document.body.appendChild(a),a.click(),a.remove(),u.hide()}))},t.randomIntFromRange=O,t.shuffle=function(e){for(let t=e.length-1;t>0;--t){const o=O(0,t),n=e[o];e[o]=e[t],e[t]=n}},t.randomElementFromArray=L,t.randomElementFromObject=function(e){return L(Object.values(e))},t.createErrorMessage=function(e,t){return e instanceof Error?`${t}: ${e.message}`:`${t}`}},134:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildSearchService=void 0;const a=o(1161),i=n(o(7718)),s={fuzzyMatchSensitivity:.2,scoreForSimilarMatch:.5,scoreForExactMatch:1};function r(e){return e.match(/[^\\\][.,"/#!?$%^&*;:{}=\-_`~()\s]+/g)||[]}t.buildSearchService=(e,t,o=s)=>{const n={},u={};e.forEach(((e,o)=>{const i=r(t(e)),s={id:o};i.forEach((e=>{const t=(0,a.stemmer)(e);t in u||(u[t]=new Set),u[t].add(e),t in n||(n[t]=new Set),n[t].add(s)}))}));const d=Object.keys(n);return{query:t=>{const s={results:[],matchedQueryTerms:[]},l=new Set(r(t).map((e=>(0,a.stemmer)(e))));if(0===l.size)return s;const c=new Map,p=new Set;l.forEach((t=>{d.forEach((a=>{const{similarity:s}=(0,i.default)(t,a),r=a===t,d=s>=1-o.fuzzyMatchSensitivity;if(r||d){const t=n[a],i=(l=e.length,0===(f=t.size)?0:Math.log10(l/f));t.forEach((e=>{var t;const n=null!==(t=c.get(e.id))&&void 0!==t?t:0,a=((r?o.scoreForExactMatch:0)+(d?o.scoreForSimilarMatch:0))*i;c.set(e.id,n+a)})),u[a].forEach((e=>{p.add(e)}))}var l,f}))}));const f=[...c].sort(((e,t)=>t[1]-e[1])).map((t=>e[t[0]]));return s.results=f,s.matchedQueryTerms=[...p],s}}}},2018:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splitByAndKeep=void 0,t.splitByAndKeep=function(e,t){const o=[];let n=[];const a=new Set(t);for(const t of e)a.has(t)?(n.length>0&&o.push(n.join("")),o.push(t),n=[]):n.push(t);return n.length>0&&o.push(n.join("")),o}},7995:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadCustomThemeFromUrl=void 0;const s=i(o(5021)),r=i(o(2426)),u=r,d=i(o(6030));t.loadCustomThemeFromUrl=function(){var e;const t=s.findGetParameter("customTheme");if(null===t)return;const o=t.split(",");let n=null;try{n=JSON.parse(null!==(e=atob(t))&&void 0!==e?e:"")}catch(e){}let a=[];if(Array.isArray(o)&&9===o.length?a=o:Array.isArray(n)&&9===n.length&&(a=n),0===a.length)return d.add("Invalid custom theme ",0);const i=r.default.customTheme,l=r.default.customThemeColors;try{u.setCustomThemeColors(a),d.add("Custom theme applied",1),r.default.customTheme||u.setCustomTheme(!0)}catch(e){d.add("Something went wrong. Reverting to previous state.",0),console.error(e),u.setCustomTheme(i),u.setCustomThemeColors(l)}}}},o={};function n(e){var a=o[e];if(void 0!==a)return a.exports;var i=o[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,a,i)=>{if(!o){var s=1/0;for(l=0;l<e.length;l++){for(var[o,a,i]=e[l],r=!0,u=0;u<o.length;u++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](o[u])))?o.splice(u--,1):(r=!1,i<s&&(s=i));if(r){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[o,a,i]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={96:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,i,[s,r,u]=o,d=0;if(s.some((t=>0!==e[t]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(u)var l=u(n)}for(t&&t(o);d<s.length;d++)i=s[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},o=self.webpackChunkmonkeytype_frontend=self.webpackChunkmonkeytype_frontend||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=n.O(void 0,[736],(()=>n(8929)));a=n.O(a)})();